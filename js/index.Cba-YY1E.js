import{r as oe,o as t,c as be,d as Je,m as pt,u as Ze,a as ve,L as Ne,e as Fe,b as s,f as e,g as z,w as F,h as Y,t as m,F as P,i as B,j as V,k as fe,l as Xe,n as Ce,p as dt,q as ze,s as et,P as je,v as ye,x as le,y as re,z as Ie,A as vt,B as o,T as $e,C as R,D as te,E as Qe,G as ee,H as ut,I as Se,J as gt,K as Ue,M as xe,N as qe,O as ge,Q as He,R as ke,S as bt,U as _e,V as Ae,W as Be,X as Ge,Y as it,Z as yt,_ as $t,$ as ht,a0 as Ee,a1 as wt,a2 as _t,a3 as kt}from"./vendor-BMKzemL--chunk.js";(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))M(w);new MutationObserver(w=>{for(const H of w)if(H.type==="childList")for(const O of H.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&M(O)}).observe(document,{childList:!0,subtree:!0});function _(w){const H={};return w.integrity&&(H.integrity=w.integrity),w.referrerPolicy&&(H.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?H.credentials="include":w.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function M(w){if(w.ep)return;w.ep=!0;const H=_(w);fetch(w.href,H)}})();const St={__name:"App",setup(n){return(v,_)=>{const M=oe("router-view");return t(),be(M)}}},Tt=Je({id:"alert",state:()=>({alert:null}),actions:{success(n){this.alert={message:n,type:"alert-success"}},error(n){this.alert={message:n,type:"alert-danger"}},clear(){this.alert=null}}});function tt(){const n=N=>{var $;let L=N,i=L.response,S="";if(!L.response)return N.message;if(i.status===500){if(typeof i.data=="string")return i.data;if(i.data.content)return i.data.content;if(i.data.detail)return i.data.detail}if(i.status===401){const W=`${window.location.pathname}${window.location.search}`;S=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(W)}`}'>here</a> to login.`}else if(i.status===400){let W=L.response.data.errors;S=L.response.data.title||L.response.data,W&&(S+="<ul>");for(let J in W){let u=W[J];for(let y in W[J]){let K=u[y];S+=`<li>${K}</li>`}}W&&(S+="</ul>"),S||(S=L.message),S&&S.content&&(S=S.content)}else i.status===404?S=(($=i==null?void 0:i.data)==null?void 0:$.title)||(i==null?void 0:i.data)||"Record not found.":typeof i.data=="string"&&(S=L.message,S===""&&(S=`Error <b>Http ${i.status}</b>.<br/>Please contact the System Administrator.`));return S},v=N=>JSON.parse(JSON.stringify(N)),_=N=>{if(typeof N!="number")return N;var L=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return L.format(N)},M=(N,L,i)=>{const $={value:L,expiry:new Date().getTime()+i};debugger;localStorage.setItem(N,JSON.stringify($))},w=N=>{debugger;const L=localStorage.getItem(N);if(!L)return null;const i=JSON.parse(L);return new Date().getTime()>i.expiry?(localStorage.removeItem(N),null):i.value},H="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:n,clone:v,toCurrency:_,moment:pt,localStorageSetWithExpiry:M,localStorageGetWithExpiry:w,setPageTab:(N,L)=>{var i=localStorage.getItem(H);i?i=JSON.parse(i):i={},i[N]=L,localStorage.setItem(H,JSON.stringify(i))},getPageTab:N=>{var L=localStorage.getItem(H);return L?L=JSON.parse(L):L={},L[N]},createHlsStream:(N,L,i)=>{var S=new Hls({autoStartLoad:i??!0});return S.on(Hls.Events.MEDIA_ATTACHED,function(){}),S.on(Hls.Events.MANIFEST_PARSED,function($,W){console.log("manifest loaded, found "+W.levels.length+" quality level")}),S.on(Hls.Events.ERROR,function($,W){if(W.fatal)switch(W.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),S.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",W);break;default:S.destroy();break}}),S.loadSource(L),S.attachMedia(N),S},isValidTime:N=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(N),generateReturnUrl:()=>{const N=Ze();let L=N.path;return N.query.returnUrl&&(L=N.query.returnUrl),L=`?returnUrl=${encodeURIComponent(L)}`,L},getValidFeedbackCss:N=>N?"is-valid":"is-invalid"}}const It=tt(),ct=JSON.parse(localStorage.getItem("user"))||{},Mt=It.moment.utc(ct.exp*1e3),xt=Mt.isAfter()?ct:null,we=Je({id:"auth",state:()=>({user:xt,returnUrl:null}),actions:{async login(n){try{this.user=n,localStorage.setItem("user",JSON.stringify(n))}catch(v){debugger;alert(v)}},logout(){this.user=null,localStorage.removeItem("user"),lt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),Ct="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(Ct));const Vt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://vivafastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://purple-glacier-0be51de00.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'",VITE_AWS_REGION:"us-west-2",VITE_AWS_USER_POOL_CLIENT_ID:"5bjn58mkaasn71076qm8ladcl0",VITE_AWS_USER_POOL_ID:"us-west-2_Ktunv0FfL"},Ke=Vt,Ye=Je("msal",()=>{const n=ve({auth:{clientId:Ke.VITE_AUTH_CLIENT_ID,authority:Ke.VITE_AUTH_AUTHORITY_URL,postLogoutUri:Ke.VITE_AUTH_POST_LOGOUT_URI},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1,secureCookies:!1},system:{loggerOptions:{logLevel:Ne.Verbose,loggerCallback:(M,w,H)=>{if(!H)switch(M){case Ne.Error:console.error(w);return;case Ne.Info:console.info(w);return;case Ne.Verbose:console.debug(w);return;case Ne.Warning:console.warn(w);return}},piiLoggingEnabled:!1}}}),v=ve("");return{msalConfig:n,accessToken:v,setAccessToken:M=>{v.value=M}}}),st={$on:(...n)=>Fe.on(...n),$once:(...n)=>Fe.once(...n),$off:(...n)=>Fe.off(...n),$emit:(...n)=>Fe.emit(...n)};function Ot(){const n=(H,O,Q,j)=>{st.$emit("toast-message",{title:H,message:O,type:Q,options:j})};return{success:(H,O,Q={})=>{n(H,O,"success",Q)},warning:(H,O,Q={})=>{n(H,O,"warning",Q)},info:(H,O,Q={})=>{n(H,O,"info",Q)},error:(H,O,Q={})=>{n(H,O,"danger",Q)}}}const Ve=(n,v)=>{const _=n.__vccOpts||n;for(const[M,w]of v)_[M]=w;return _},At={data(){return{notifications:[],messages:[]}},async created(){const n=this;n.$bus.$on("event:notification-received",()=>{n.getUnreadNotifications()}),n.$bus.$on("event:notification-marked-as-read",v=>{n.notifications.some(M=>M.notificationId===v)&&n.getUnreadNotifications()}),n.$bus.$on("event:notification-removed",v=>{n.notifications.some(M=>M.notificationId===v)&&n.getUnreadNotifications()}),n.$bus.$on("event:chat-marked-as-read",n.onChatMarkedAsRead),n.$bus.$on("event:chat-message-received",n.onChatMessageReceived)},async mounted(){const n=this,v=n.$refs.notifications,_=n.$refs.messages;v&&v.offsetParent,_&&_.offsetParent&&await n.getUnreadChats()},methods:{async logout(){const n=this;try{await n.$util.axios.post("/api/accounts/logout").then(v=>{const _="/";n.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){n.$util.href(_)}})})}catch(v){n.$util.handleError(v)}},async onChatMarkedAsRead(n){let v=this,_=v.messages.find(M=>M.chatId===n);if(_){let M=v.messages.indexOf(_);v.messages.splice(M,1)}},async onChatMessageReceived(n){let v=this,_=v.messages.find(w=>w.chatId===n.chatId);if(_)_.lastMessageText=n.content;else{var M={chatId:n.chatId,isRead:!1,lastDateSent:n.dateSent,lastMessageText:n.content,senderFirstLastName:`${n.sender.firstName} ${n.sender.lastName}`,senderInitials:n.sender.initials,senderProfilePicture32:n.sender.profilePicture32,urlPicture:v.$util.getProfilePictureUrl(n.sender.profilePicture32,n.sender.initials)};v.messages.push(M)}},async getUnreadNotifications(){const n=this;try{await n.$util.axios.get("api/accounts/unread-notifications").then(v=>{n.notifications=v.data})}catch(v){n.$util.handleError(v)}},async getUnreadChats(){const n=this;try{await n.$util.axios.get("api/accounts/unread-chats").then(v=>{n.messages=v.data;for(let _ in n.messages){let M=n.messages[_];n.$set(M,"urlPicture",n.$util.getProfilePictureUrl(M.senderProfilePicture32,M.senderInitials))}})}catch(v){n.$util.handleError(v)}},viewNotification(n){this.$bus.$emit("event:open-notification",n)},viewChat(n){this.$bus.$emit("event:open-chat",n)},showHiddenElements(){let v=this.$el.getElementsByClassName("initialHidden");for(let _=0;_<v.length;_++)v[_].classList.remove("invisible")}}},Pt={mixins:[At],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const v=we().user;return{user:v,username:v?v.nameFull:"Guest"}},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1},async openModalSearchUser747(n){this.$refs.refModalSearchUser747.open(n)}}},Lt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ut={class:"container-md"},Ht={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Dt={class:"navbar-nav"},Et={class:"nav-item dropdown"},qt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Bt={class:"nav-item dropdown"},Nt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Rt={class:"navbar-nav ms-auto"},Ft={class:"nav-item dropdown"},zt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Gt={class:"d-inline d-sm-none d-md-inline"},jt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Yt={class:"text-capitalize"};function Wt(n,v,_,M,w,H){const O=oe("router-link");return t(),s("nav",Lt,[e("div",Ut,[z(O,{class:"navbar-brand",to:"/member"},{default:F(()=>[Y(m(_.appName),1)]),_:1}),v[14]||(v[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ht,[e("ul",Dt,[e("li",Et,[v[3]||(v[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",qt,[e("li",null,[z(O,{class:"dropdown-item",to:"/member/announcements"},{default:F(()=>v[0]||(v[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),Y(" Announcements ")])),_:1})]),e("li",null,[z(O,{class:"dropdown-item",to:"/member/posts"},{default:F(()=>v[1]||(v[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),Y(" Posts ")])),_:1})]),e("li",null,[z(O,{class:"dropdown-item",to:"/member/yellow-pages"},{default:F(()=>v[2]||(v[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),Y(" Yellow Pages ")])),_:1})])])]),e("li",Bt,[v[5]||(v[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Nt,[e("li",null,[z(O,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:F(()=>v[4]||(v[4]=[Y(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Rt,[e("li",Ft,[e("a",zt,[e("span",null,[v[6]||(v[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Gt,m(w.username),1)])]),e("ul",jt,[v[9]||(v[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),v[10]||(v[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),v[11]||(v[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),v[12]||(v[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),w.user&&w.user.roles.length>1?(t(!0),s(P,{key:0},B(w.user.roles,Q=>(t(),s("li",null,[z(O,{to:`/${Q.toLowerCase()}`,class:"dropdown-item"},{default:F(()=>[e("span",Yt,m(Q),1)]),_:2},1032,["to"])]))),256)):V("",!0),e("li",null,[z(O,{to:"/",class:"dropdown-item"},{default:F(()=>v[7]||(v[7]=[Y(" Main ")])),_:1})]),v[13]||(v[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[z(O,{to:"/account/logout",class:"dropdown-item"},{default:F(()=>v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Y("Logout ")])),_:1})])])])])])])])}const Kt=Ve(Pt,[["render",Wt]]),Qt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const n=document.getElementById("top");n&&n.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let n=this;if(!n.$el.getElementsByClassName)return;let v=n.$el.getElementsByClassName("initialHidden");for(let _=0;_<v.length;_++){let M=v[_];M.classList.remove("invisible"),M.classList.remove("d-none")}},close(){const n=this,v=document.referrer.toLowerCase();v&&v.includes("/account/login")?n.$router.go(-2):n.$router.go(-1)},toggle(n){const v=this;v.toggles[n]=!v.toggles[n],localStorage.setItem(v.togglesKey,JSON.stringify(v.toggles))}}},Jt={mixins:[Qt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1}}},Zt={class:"footer sticky-bottom"},Xt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},es={class:"container-md"},ts={class:"navbar-text small p-0"},ss={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},os={class:"container-md"},as={class:"navbar-nav nav-fill w-100"},ls={class:"nav-item dropup"},ns={class:"dropdown-menu","aria-labelledby":"dropdown01"},rs={class:"nav-item dropup"},is={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ds(n,v,_,M,w,H){const O=oe("router-link");return t(),s("footer",Zt,[e("div",Xt,[e("div",es,[e("span",ts,"©"+m(w.copyright),1)])]),e("nav",ss,[e("div",os,[e("ul",as,[e("li",ls,[v[3]||(v[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",ns,[e("li",null,[z(O,{class:"dropdown-item",to:"/member/announcements"},{default:F(()=>v[0]||(v[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),Y(" Announcements ")])),_:1})]),e("li",null,[z(O,{class:"dropdown-item",to:"/member/posts"},{default:F(()=>v[1]||(v[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),Y(" Posts ")])),_:1})]),e("li",null,[z(O,{class:"dropdown-item",to:"/member/yellow-pages"},{default:F(()=>v[2]||(v[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),Y(" Yellow Pages ")])),_:1})])])]),e("li",rs,[v[5]||(v[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",is,[e("li",null,[z(O,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:F(()=>v[4]||(v[4]=[Y(" Property Monthly Dues ")])),_:1})])])])])])])])}const us=Ve(Jt,[["render",ds]]),cs={name:"AdminLayout",components:{TopNav:Kt,BottomNav:us},inject:["$config"],mounted(){const v=this.$config;document.title=`Account - ${v.appName}`}},ms={class:"d-flex flex-column vh-100"};function fs(n,v,_,M,w,H){const O=oe("Toasts"),Q=oe("router-view");return t(),s("div",ms,[z(O),z(Q,{class:"flex-grow-1 mb-2"})])}const ps=Ve(cs,[["render",fs]]),vs={__name:"index",setup(n){return we().user,fe(()=>{}),(_,M)=>(t(),s("div",null,M[0]||(M[0]=[Xe('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},gs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://vivafastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://purple-glacier-0be51de00.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'",VITE_AWS_REGION:"us-west-2",VITE_AWS_USER_POOL_CLIENT_ID:"5bjn58mkaasn71076qm8ladcl0",VITE_AWS_USER_POOL_ID:"us-west-2_Ktunv0FfL"},bs=gs;function ys(){Ce("$config");const n=bs.VITE_API_URL,v=dt.create({baseURL:n});return ze.configure({template:'<div class="bar pt-1 bg-warning" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-circle-notch fa-spin text-warning"></div></div>'}),v.interceptors.request.use(_=>{ze.start();const{user:M}=we();return M&&M.token&&(_.headers?(_.headers.Authorization||(_.headers.Authorization=`Bearer ${M.token}`),_.headers["Access-Control-Allow-Origin"]||(_.headers["Access-Control-Allow-Origin"]="*")):_.headers={Authorization:`Bearer ${M.token}`,"Access-Control-Allow-Origin":"*"}),_}),v.interceptors.response.use(_=>(ze.done(),_),_=>{throw ze.done(),_}),v}function he(n){if(!n.appTitle)throw Error("App Title is required.");if(!n.pageTitle)throw Error("Page Title is required.");const v=Ze(),_=et(),M=ys(),w=tt(),H=Ot(),Q=we().user,j=()=>Q&&Q.roles&&Q.roles.includes("System"),k=()=>Q&&Q.roles&&Q.roles.includes("administrator"),G=()=>Q&&Q.roles&&Q.roles.includes("employee"),ae=()=>Q&&Q.roles&&Q.roles.includes("Member"),N=async()=>{const K=document.referrer.toLowerCase();K&&K.includes("/accounts/login")?await _.go(-2):await _.go(-1)},L=K=>{var p;const f=v.path,q=(p=v.query)==null?void 0:p.returnUrl;q&&!(f.startsWith(q)||q.startsWith(f))?_.push(q):_.push(K)},i=n.appTitle,S=n.pageTitle,$=ve(!1),W=ve(new Map),J=ve(""),u=ve(""),y=ve("");return{appTitle:i,pageTitle:S,busy:$,validations:W,infoMessage:J,warningMessage:u,errorMessage:y,router:_,route:v,axios:M,utils:w,toasts:H,close:N,closeWithReturnUrl:L,generateReturnUrl:w.generateReturnUrl,security:{userId:Q?Q.userId:"",isSystem:j(),isAdministrator:k(),isEmployee:G(),isMember:ae()}}}const $s={class:"h-100 d-flex align-items-center justify-content-center"},hs={class:"form-signin w-100 m-auto"},ws={class:"h3 mb-3 fw-normal"},_s={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ks=["innerHTML"],Ss={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ts=["disabled"],Is={class:"d-flex flex-row align-items-center"},Ms={key:0,class:"float-start fas fa-fw fa-circle-notch fa-spin"},xs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(n){Ce("$config");const v=we(),_=Ye(),M=new je(_.msalConfig),w=ye({username:"",password:""}),H={username:{required:le.withMessage("Username is required.",re),$autoDirty:!0,$lazy:!0},password:{required:le.withMessage("Password is required.",re),$autoDirty:!0,$lazy:!0}},O=Ie(H,w),{appTitle:Q,pageTitle:j,busy:k,isDirty:G,validations:ae,infoMessage:N,warningMessage:L,errorMessage:i,router:S,route:$,axios:W,utils:J,toasts:u,close:y,security:K}=he({appTitle:"Arcadian-FAST",pageTitle:"Sign On"}),f={redirectUri:window.location.origin+"/accounts/loginRedirect"};fe(async()=>{k.value=!0,await M.initialize();let b=null;if(await M.handleRedirectPromise().then(r=>{const c=M.getAllAccounts();c.length>0&&(b=c[0])}).catch(r=>{debugger}),!b){k.value=!1;return}try{const r={loginHint:b==null?void 0:b.username,redirectUri:window.location.origin+"/accounts/loginRedirect"},c=await M.ssoSilent(r);if(c){await u.success("SSO","Session created, redirecting to home page.",{onClose:async()=>{await p(c.account)}});return}}catch(r){if(r.errorCode=="login_required")try{const c=await M.loginPopup(f);if(c){await u.success("SSO","Login popup successful, redirecting to home page.",{onClose:async()=>{await p(c.account)}});return}}catch{u.warning("SSO","Login failed. Please enable third-party cookies or remove popup blocker, then retry.")}else u.warning("SSO Active Session Check","There was an issue while checking for active session, please signin.")}k.value=!1});const q=async()=>{var b={account:M.getActiveAccount(),scopes:[]};await M.acquireTokenSilent(b).then(r=>{const l=r.account.idToken,a=vt(l);a.token=r.accessToken,console.log(r),a.roles||(a.roles=[]),a.userId=a.sub,v.login(a);var U=$.query.returnUrl;U?S.push(decodeURIComponent(U)):a.roles.length===1?S.push(`/${a.roles[0].toLowerCase()}`):S.push("/")}).catch(r=>{u.warning("Error while requesting access token",r),console.error(`error during acquireTokenSilent: ${r}`)})},p=async b=>{M.setActiveAccount(b),await q()},d=async()=>{k.value=!0;const b=M.getAllAccounts();if(b.length===0)try{await M.loginRedirect(f);return}catch(c){JSON.stringify(c);debugger}const r=b[0];await p(r)};return(b,r)=>(t(),be($e,null,{default:F(()=>[e("div",$s,[e("main",hs,[e("div",null,[e("h1",ws,m(o(Q)),1),e("div",null,[o(i)?(t(),s("div",_s,[r[1]||(r[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(i)},null,8,ks)])):V("",!0),o(O).$error?(t(),s("div",Ss,[r[2]||(r[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(O).$errors,c=>(t(),s("li",{key:c.$uid},m(c.$message),1))),128))])])):V("",!0)]),e("button",{onClick:r[0]||(r[0]=c=>d()),disabled:o(k),class:"btn btn-primary w-100 py-2"},[e("div",Is,[o(k)?(t(),s("span",Ms)):V("",!0),r[3]||(r[3]=e("span",{class:"mx-auto"},"Single Sign On",-1))])],8,Ts)])])])]),_:1}))}},Cs=Ve(xs,[["__scopeId","data-v-287b2951"]]),Vs={class:"d-flex flex-column justify-content-center align-items-middle"},Os={class:"mx-auto"},As={class:"alert text-bg-success shadow"},Ps={class:"d-flex flex-row align-items-center"},Ls={key:0,class:"float-start fas fa-fw fa-circle-notch fa-spin"},Us={__name:"loginRedirect",setup(n){we();const v=Ye(),_=new je(v.msalConfig);return fe(async()=>{await _.initialize(),await _.handleRedirectPromise().then(M=>{}).catch(M=>{debugger})}),(M,w)=>(t(),be($e,null,{default:F(()=>[e("div",Vs,[e("div",Os,[e("div",As,[e("div",Ps,[M.busy?(t(),s("span",Ls)):V("",!0),w[0]||(w[0]=e("span",null,"SSO successful, redirecting to login page.",-1))])])])])]),_:1}))}},Hs={class:"h-100 d-flex align-items-center justify-content-center"},Ds={__name:"logout",setup(n){const v=we();return v.user,fe(async()=>{v.logoutWithRedirect()}),(_,M)=>(t(),s("div",Hs,M[0]||(M[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[Y(" You have logged out from HOA MS."),e("br"),Y(" Click "),e("a",{href:"/",class:"d-inline"},"here"),Y(" to go back to home page. ")])],-1)])))}},Es={class:"h-100 d-flex align-items-center justify-content-center"},qs={class:"card m-3"},Bs={class:"card-header"},Ns={class:"card-body"},Rs={class:"m-2"},Fs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},zs=["innerHTML"],Gs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},js={class:"row row-cols-1 row-cols-sm-3"},Ys={class:"col-sm"},Ws={class:"form-group"},Ks={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Js={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},Xs={class:"col-sm"},eo={class:"form-group"},to={key:0,class:"d-block invalid-feedback"},so={class:"row row-cols-1 row-cols-sm-3"},oo={class:"col"},ao={class:"form-group"},lo={key:0,class:"d-block invalid-feedback"},no={class:"col"},ro={class:"form-group"},io={key:0,class:"d-block invalid-feedback"},uo={class:"row row-cols-1 row-cols-sm-3"},co={class:"col-sm"},mo={class:"form-group"},fo={key:0,class:"d-block invalid-feedback"},po={class:"col-sm"},vo={class:"form-group"},go={key:0,class:"d-block invalid-feedback"},bo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},yo={class:"col"},$o=["disabled"],ho={class:"col"},wo={class:"col"},_o={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(n){const v=ye({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),_=(K,f)=>K===f.password,M={firstName:{required:le.withMessage("First name is required.",re),$autoDirty:!0,$lazy:!0},middleName:{required:le.withMessage("Middle name is required.",re),$autoDirty:!0,$lazy:!0},lastName:{required:le.withMessage("Last name is required.",re),$autoDirty:!0,$lazy:!0},phoneNumber:{required:le.withMessage("Phone number is required.",re),$autoDirty:!0,$lazy:!0},email:{required:le.withMessage("Email is required.",re),$autoDirty:!0,$lazy:!0},password:{required:le.withMessage("Password is required.",re),$autoDirty:!0,$lazy:!0},confirmPassword:{required:le.withMessage("Confirm password is required.",re),confirmSamePassword:le.withMessage("Password and confirm passwrod are different.",_),$autoDirty:!0,$lazy:!0}},w=Ie(M,v),{appTitle:H,pageTitle:O,busy:Q,isDirty:j,validations:k,infoMessage:G,warningMessage:ae,errorMessage:N,router:L,axios:i,utils:S,toasts:$,close:W,security:J}=he({appTitle:"HOA MS",pageTitle:"Register User"}),u=Ce("$config");fe(()=>{});const y=async()=>{const K=v;if(Q.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}N.value=null;try{Q.value=!0;const q=S.clone(K);q.tenantid=u.tenantId;debugger;await i({method:"post",url:"/api/v1/accounts/register",data:q}).then(p=>{$.success("Register","Registration was successfull.",{onClose:async()=>{await L.push("/accounts/login")}})})}catch(q){N.value=S.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{Q.value=!1}};return(K,f)=>{const q=oe("router-link");return t(),be($e,null,{default:F(()=>[e("div",Es,[e("div",qs,[e("h4",Bs,m(o(O)),1),e("div",Ns,[e("div",Rs,[o(N)?(t(),s("div",Fs,[f[8]||(f[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,zs)])):V("",!0),o(w).$error?(t(),s("div",Gs,[f[9]||(f[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(w).$errors,p=>(t(),s("li",{key:p.$uid},m(p.$message),1))),128))])])):V("",!0)]),e("div",js,[e("div",Ys,[e("div",Ws,[f[10]||(f[10]=e("label",null,"First Name",-1)),R(e("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>v.firstName=p),type:"text",class:"form-control"},null,512),[[te,v.firstName]]),o(w).firstName.$error?(t(),s("div",Ks,[(t(!0),s(P,null,B(o(w).firstName.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])]),e("div",Qs,[e("div",Js,[f[11]||(f[11]=e("label",null,"Middle Name",-1)),R(e("input",{"onUpdate:modelValue":f[1]||(f[1]=p=>v.middleName=p),type:"text",class:"form-control"},null,512),[[te,v.middleName]]),o(w).middleName.$error?(t(),s("div",Zs,[(t(!0),s(P,null,B(o(w).middleName.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])]),e("div",Xs,[e("div",eo,[f[12]||(f[12]=e("label",null,"Last Name",-1)),R(e("input",{"onUpdate:modelValue":f[2]||(f[2]=p=>v.lastName=p),type:"text",class:"form-control"},null,512),[[te,v.lastName]]),o(w).lastName.$error?(t(),s("div",to,[(t(!0),s(P,null,B(o(w).lastName.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])])]),e("div",so,[e("div",oo,[e("div",ao,[f[13]||(f[13]=e("label",null,"Phone Number",-1)),R(e("input",{"onUpdate:modelValue":f[3]||(f[3]=p=>v.phoneNumber=p),type:"tel",class:"form-control"},null,512),[[te,v.phoneNumber]]),o(w).phoneNumber.$error?(t(),s("div",lo,[(t(!0),s(P,null,B(o(w).phoneNumber.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])]),e("div",no,[e("div",ro,[f[14]||(f[14]=e("label",null,"Email",-1)),R(e("input",{"onUpdate:modelValue":f[4]||(f[4]=p=>v.email=p),type:"email",class:"form-control"},null,512),[[te,v.email]]),o(w).email.$error?(t(),s("div",io,[(t(!0),s(P,null,B(o(w).email.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])])]),e("div",uo,[e("div",co,[e("div",mo,[f[15]||(f[15]=e("label",null,"Password",-1)),R(e("input",{"onUpdate:modelValue":f[5]||(f[5]=p=>v.password=p),type:"password",class:"form-control"},null,512),[[te,v.password]]),o(w).password.$error?(t(),s("div",fo,[(t(!0),s(P,null,B(o(w).password.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])]),e("div",po,[e("div",vo,[f[16]||(f[16]=e("label",null,"Confirm Password",-1)),R(e("input",{"onUpdate:modelValue":f[6]||(f[6]=p=>v.confirmPassword=p),type:"password",class:"form-control"},null,512),[[te,v.confirmPassword]]),o(w).confirmPassword.$error?(t(),s("div",go,[(t(!0),s(P,null,B(o(w).confirmPassword.$errors,p=>(t(),s("div",{key:p.$uid},m(p.$message),1))),128))])):V("",!0)])])]),e("div",bo,[e("div",yo,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:f[7]||(f[7]=p=>y()),class:"btn btn-primary w-100"},f[17]||(f[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),Y("Register ")]),8,$o)]),e("div",ho,[z(q,{to:"/",class:"btn btn-outline-primary w-100"},{default:F(()=>f[18]||(f[18]=[Y("Home")])),_:1})]),e("div",wo,[z(q,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:F(()=>f[19]||(f[19]=[Y("Login")])),_:1})])])])])])]),_:1})}}},ko={path:"/accounts",component:ps,props:!1,meta:{},children:[{path:"",component:vs},{path:"login",component:Cs},{path:"loginRedirect",component:Us},{path:"logout",component:Ds},{path:"register",component:_o}]};function ot(){const n=et(),v=j=>window.location.href.indexOf(j)>-1,_=j=>localStorage.getItem("data-bs-theme")||j,M=j=>{document.documentElement.setAttribute("data-bs-theme",j),localStorage.setItem("data-bs-theme",j)},w=async()=>await dt.get("https://bootswatch.com/api/5.json").then(j=>j.data),H=j=>{const k=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");k&&j?(k.setAttribute("href",j),localStorage.setItem("bootswatch-theme",j)):alert("cannot query css link")},O=j=>{Q(),n.push(j)},Q=()=>{if(screen.width<576){const k=document.getElementById("navbarCollapse");if(k){const G=Qe.getInstance(k);G&&G.hide()}}};return{isActive:v,getCurrentBsTheme:_,changeBsTheme:M,getBootswatch:w,changeTheme:H,navigate:O,collapseNavbar:Q}}const So={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},To={class:"container-md"},Io={class:"navbar-collapse collapse",id:"navbarCollapse"},Mo={class:"navbar-nav"},xo={class:"nav-item"},Co={class:"nav-item dropdown"},Vo={class:"dropdown-menu","aria-labelledby":"dropdown01"},Oo={class:"nav-item"},Ao={class:"nav-item dropdown"},Po={class:"dropdown-menu","aria-labelledby":"dropdown01"},Lo={class:"navbar-nav ms-auto"},Uo={class:"nav-item dropdown"},Ho={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Do=["onClick"],Eo={class:"nav-item dropdown"},qo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Bo={class:"d-sm-none d-xl-inline"},No={key:0},Ro={key:1},Fo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},zo={key:0},Go={key:1},jo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const v=Ye(),{isActive:_,getCurrentBsTheme:M,changeBsTheme:w,getBootswatch:H,changeTheme:O,navigate:Q,collapseNavbar:j}=ot(),k=we(),G=k.user,ae=ye({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const S=ae;S.bootswatch=await H();const $=M(S.bsTheme);debugger;$&&(S.bsTheme=$,w(S.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(S.currentTheme=W,O(W))});const N=S=>{O(S),ae.currentTheme=S,j()},L=S=>{w(S),ae.bsTheme=S,j()},i=async()=>{k.logoutWithRedirect();const S=new je(v.msalConfig);await S.initialize();const $={mainWindowRedirectUri:"/"};await S.logoutPopup($)};return(S,$)=>{const W=oe("router-link");return t(),be($e,null,{default:F(()=>[e("nav",So,[e("div",To,[z(W,{class:"navbar-brand",to:"/administrator"},{default:F(()=>[Y(m(n.appName),1)]),_:1}),$[18]||($[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Io,[e("ul",Mo,[e("li",xo,[z(W,{to:"/videos",onClick:o(j),class:"nav-link"},{default:F(()=>$[3]||($[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",Co,[$[6]||($[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",Vo,[e("li",null,[z(W,{to:"/source-groups",onClick:o(j),class:"dropdown-item"},{default:F(()=>$[4]||($[4]=[Y(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[z(W,{to:"/source-locations",onClick:o(j),class:"dropdown-item"},{default:F(()=>$[5]||($[5]=[Y(" Locations ")])),_:1},8,["onClick"])])])]),e("li",Oo,[z(W,{to:"/vod-sources",onClick:o(j),class:"nav-link"},{default:F(()=>$[7]||($[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",Ao,[$[10]||($[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",Po,[e("li",null,[z(W,{to:"/program-templates",onClick:o(j),class:"dropdown-item"},{default:F(()=>$[8]||($[8]=[Y(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[z(W,{to:"/channels",onClick:o(j),class:"dropdown-item"},{default:F(()=>$[9]||($[9]=[Y(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",Lo,[e("li",Uo,[$[14]||($[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",Ho,[e("li",null,[ae.bsTheme==="dark"?(t(),s("button",{key:0,onClick:$[0]||($[0]=J=>L("light")),class:"dropdown-item"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Y("Dark Mode ")]))):(t(),s("button",{key:1,onClick:$[1]||($[1]=J=>L("dark")),class:"dropdown-item"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Y("Light Mode ")])))]),$[13]||($[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(P,null,B(ae.bootswatch.themes,J=>(t(),s("li",null,[e("button",{onClick:u=>N(J.cssCdn),class:ee(["dropdown-item",{active:ae.currentTheme===J.cssCdn}])},m(J.name),11,Do)]))),256))])]),e("li",Eo,[e("a",qo,[e("span",null,[$[15]||($[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Bo,[o(G)?(t(),s("span",No,m(o(G).name),1)):(t(),s("span",Ro," Guest "))])])]),e("ul",Fo,[o(G)?(t(),s("li",zo,[e("button",{onClick:$[2]||($[2]=J=>i()),class:"dropdown-item"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Y("Logout ")]))])):(t(),s("li",Go,[z(W,{to:"/accounts/login",class:"dropdown-item"},{default:F(()=>$[17]||($[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),Y("Login ")])),_:1})]))])])])])])])]),_:1})}}},Yo={id:"sideNav",class:"collapse collapse-horizontal show"},Wo={class:"d-flex flex-column bg-dark min-vh-100 overflow-y-auto"},Ko={class:"navbar bg-primary bg-gradient","data-bs-theme":"dark"},Qo={class:"navbar-brand me-0 mb-1 px-2"},Jo={class:"d-none d-md-inline"},Zo={class:"nav nav-pills flex-column px-1 mt-2",role:"tablist"},Xo={class:"nav-item"},ea={id:"sources",class:"list-group collapse"},ta={class:"nav-item"},sa={id:"assets",class:"list-group collapse"},oa={class:"nav-item"},aa={id:"assembly",class:"list-group collapse"},la={class:"nav nav-pills flex-column mt-auto px-1 mb-5",role:"tablist"},na={class:"nav-item d-none1"},ra={id:"themes",class:"list-group collapse"},ia={class:"list-group-item border-bottom"},da=["onClick"],ua={class:"nav-item"},ca={href:"#",class:"nav-link dropdown-toggle collapsed","data-bs-toggle":"collapse","data-bs-target":"#user","aria-expanded":"false","aria-controls":"user"},ma={class:"d-none d-md-inline ms-1"},fa={id:"user",class:"list-group collapse"},pa={class:"list-group-item border-bottom"},va={key:0,class:"fas fa-fw fa-angle-double-left"},ga={key:1,class:"fas fa-fw fa-angle-double-right"},ba={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const v=Ye(),_=Ze(),M=et(),w=we(),H=w.user,{isActive:O,getCurrentBsTheme:Q,changeBsTheme:j,getBootswatch:k,changeTheme:G,navigate:ae,collapseNavbar:N}=ot(),L=ye({user:H,username:H?H.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const p=L;p.bootswatch=await k();const d=Q(p.bsTheme);d&&(p.bsTheme=d,j(p.bsTheme));const b=localStorage.getItem("bootswatch-theme");b&&(p.currentTheme=b,G(b)),J();const r=document.getElementById("sideNav");r&&(W.value?r.classList.add("show"):r.classList.remove("show"))});const i=p=>{G(p),L.currentTheme=p,q("themes")},S=p=>{j(p),L.bsTheme=p,q("themes")},$=async()=>{w.logoutWithRedirect();const p=new je(v.msalConfig);await p.initialize();const d={mainWindowRedirectUri:window.location.origin};try{await p.logoutRedirect(d)}catch(b){JSON.parse(JSON.stringify(b));debugger}},W=ve(!0),J=()=>{const p=localStorage.getItem("show-sideNav")||"true";W.value=p==="true"},u=()=>{localStorage.setItem("show-sideNav",W.value),Qe.getInstance("#sideNav").toggle()},y=()=>{W.value=!W.value,u()},K=(p,d)=>{var b=Array.isArray(p);const r=_;if(b){var c=p.find(a=>r.path.startsWith(a));return c?d||"active":""}var l=_.path.startsWith(p);return l?d||"active":""},f=async(p,d)=>{q(d),await M.push(p)},q=p=>{const d=Qe.getInstance(`#${p}`);d&&d.hide()};return(p,d)=>{const b=oe("router-link");return t(),s("div",null,[e("div",Yo,[e("div",Wo,[e("nav",Ko,[z(b,{to:"/",class:"text-decoration-none w-100 text-center"},{default:F(()=>[e("h1",Qo,[d[9]||(d[9]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Jo,m(n.appName),1)])]),_:1})]),e("ul",Zo,[e("li",Xo,[e("a",{href:"#",class:ee([K("/source-"),"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#sources","aria-expanded":"false","aria-controls":"sources"},d[10]||(d[10]=[e("span",{class:"fas fa-fw fa-boxes-packing"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Sources",-1)]),2),e("ul",ea,[e("li",{class:ee([K("/source-groups"),"list-group-item"])},[e("button",{onClick:d[0]||(d[0]=r=>f("/source-groups","sources")),class:"dropdown-item ps-3",role:"button"},d[11]||(d[11]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Groups",-1)]))],2),e("li",{class:ee([K("/source-locations"),"list-group-item"])},[e("button",{onClick:d[1]||(d[1]=r=>f("/source-locations","sources")),class:"dropdown-item ps-3",role:"button"},d[12]||(d[12]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Locations",-1)]))],2)])]),e("li",ta,[e("a",{href:"#",class:ee([[K("/videos"),K("/vod-sources","text-bg-secondary")],"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#assets","aria-expanded":"false","aria-controls":"sources"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Assets",-1)]),2),e("ul",sa,[e("li",{class:ee([K("/videos"),"list-group-item"])},[e("button",{onClick:d[2]||(d[2]=r=>f("/videos","assets")),class:"dropdown-item ps-3",role:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Videos",-1)]))],2),e("li",{class:ee([K("/vod-sources"),"list-group-item"])},[e("button",{onClick:d[3]||(d[3]=r=>f("/vod-sources","assets")),class:"dropdown-item ps-3",role:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"VOD",-1)]))],2)])]),e("li",oa,[e("a",{href:"#",class:ee([[K("/program-templates"),K("/channels")],"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#assembly","aria-expanded":"false","aria-controls":"sources"},d[16]||(d[16]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Assembly",-1)]),2),e("ul",aa,[e("li",{class:ee([K("/program-templates"),"list-group-item"])},[e("button",{onClick:d[4]||(d[4]=r=>f("/program-templates","assembly")),class:"dropdown-item ps-3",role:"button"},d[17]||(d[17]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Program Templates",-1)]))],2),e("li",{class:ee([K("/channels"),"list-group-item"])},[e("button",{onClick:d[5]||(d[5]=r=>f("/channels","assembly")),class:"dropdown-item ps-3",role:"button"},d[18]||(d[18]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Channels",-1)]))],2)])])]),e("ul",la,[e("li",na,[d[21]||(d[21]=e("a",{href:"#",class:"nav-link dropdown-toggle collapsed","data-bs-toggle":"collapse","data-bs-target":"#themes","aria-expanded":"false","aria-controls":"themes"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-md-inline ms-1"},"Themes")],-1)),e("ul",ra,[e("li",ia,[L.bsTheme==="dark"?(t(),s("button",{key:0,onClick:d[6]||(d[6]=r=>S("light")),class:"dropdown-item ps-3"},d[19]||(d[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Y("Dark Mode ")]))):(t(),s("button",{key:1,onClick:d[7]||(d[7]=r=>S("dark")),class:"dropdown-item ps-3"},d[20]||(d[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Y("Light Mode ")])))]),(t(!0),s(P,null,B(L.bootswatch.themes,r=>(t(),s("li",{class:ee([{active:L.currentTheme===r.cssCdn},"list-group-item"])},[e("button",{onClick:c=>i(r.cssCdn),class:"dropdown-item ps-3"},m(r.name),9,da)],2))),256))])]),e("li",ua,[e("a",ca,[d[22]||(d[22]=e("span",{class:"fas fa-fw fa-user-cog"},null,-1)),e("span",ma,m(o(H).name),1)]),e("ul",fa,[e("li",pa,[e("button",{onClick:d[8]||(d[8]=r=>$()),class:"dropdown-item"},d[23]||(d[23]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Y("Logout ")]))])])])])])]),e("button",{id:"sideNavToggler",onClick:y,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:ee([[W.value?"btn-primary":"btn-outline-primary"],"btn btn-sm fixed-bottom z-3 p-0 ms-1 mb-1"]),style:{width:"2rem",height:"2rem"}},[W.value?(t(),s("span",va)):(t(),s("span",ga))],2)])}}},ya={class:"footer sticky-bottom"},$a={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},ha={class:"container-md"},wa={class:"navbar-text small p-0"},_a={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(n){ot();const v=Ce("$config"),M=we().user;let H=new Date().getFullYear();const O=ye({user:M,username:M?M.nameFull:"Guest",copyright:`2020-${H} ${v.appName}`});return fe(async()=>{}),(Q,j)=>(t(),s("footer",ya,[e("div",$a,[e("div",ha,[e("span",wa,"©"+m(O.copyright),1)])])]))}},ka={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){st.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(n){n.message&&this.addMessage(n.title,n.message,n.type,n.options)},async addMessage(n,v,_,M={}){var w={id:this.count++,title:n,message:v,type:_,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};w=Object.assign({},w,M),this.messages.unshift(w),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),w.timeOut>0&&await this.startTimeout(w)},async startTimeout(n,v=0){const _=this,M=performance.now(),w=async()=>{n.animationFrame=requestAnimationFrame(async H=>{const O=H+v-M;if(!_.exists(n)||n.paused){cancelAnimationFrame(n.animationFrame);return}else if(O<n.timeOut){const Q=O/n.timeOut;n.progress=Q,await w()}else{n.progress=1,cancelAnimationFrame(n.animationFrame),_.remove(n);return}})};await w()},pauseProgress(n){n.timeOut<=0||(n.paused=!0)},async resumeProgress(n){n.timeOut<=0||(n.paused=!1,await this.startTimeout(n,n.timeOut*n.progress))},getCurrentProgress(n){return Math.round(n.progress*100)===100?100:n.progress*100},getIconClass(n){const v=n.type;let _="";switch(v){case"success":_="fas fa-fw fa-circle-check";break;case"info":_="fas fa-fw fa-circle-info";break;case"warning":_="fas fa-fw fa-circle-exclamation";break;case"danger":_="fas fa-fw fa-triangle-exclamation";break}let M=_;return n.rtl?"icon-right "+M:"icon-left "+M},async remove(n){const v=this.messages.findIndex(_=>_.id===n.id);this.messages.splice(v,1),typeof n.onClose=="function"&&await n.onClose()},exists(n){return this.messages.findIndex(_=>_.id===n.id)!==-1}}},Sa={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Ta=["onMouseover","onMouseout"],Ia={class:"me-auto text-white"},Ma=["onClick"],xa={class:"toast-body"},Ca=["innerHTML"],Va={key:0,class:"progress m-1",style:{height:"4px"}};function Oa(n,v,_,M,w,H){return t(),be($e,null,{default:F(()=>[e("div",Sa,[z(Se,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:F(()=>[(t(!0),s(P,null,B(w.messages,O=>(t(),s("div",{key:O.id,class:ee(["toast show mb-2 ms-auto",`border-${O.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Q=>H.pauseProgress(O),onMouseout:Q=>H.resumeProgress(O)},[e("div",{class:ee(["toast-header",`bg-${O.type}`])},[e("strong",Ia,[e("i",{class:ee([H.getIconClass(O),"me-1"])},null,2),Y(m(O.title),1)]),O.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Q=>H.remove(O)},v[0]||(v[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Ma)):V("",!0)],2),e("div",xa,[e("div",{innerHTML:O.message},null,8,Ca)]),O.timeOut>0&&O.showProgress?(t(),s("div",Va,[e("div",{class:ee(`bg-${O.type}`),style:ut({width:H.getCurrentProgress(O)+"%"})},null,6)])):V("",!0)],42,Ta))),128))]),_:1})])]),_:1})}const Aa=Ve(ka,[["render",Oa],["__scopeId","data-v-5272bd9a"]]),Pa={name:"AdminLayout",components:{TopNav:jo,SideNav:ba,BottomNav:_a},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},La={class:"d-flex flex-row flex-nowrap vh-100"};function Ua(n,v,_,M,w,H){const O=oe("Toasts"),Q=oe("SideNav"),j=oe("router-view"),k=oe("DialogsWrapper");return t(),s("div",La,[z(O),z(Q),z(j,{class:"d-flex flex-column w-100 h-100"}),z(k)])}const Ha=Ve(Pa,[["render",Ua]]),Da={class:"mt-2 container overflow-y-auto"},Ea={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},qa=["innerHTML"],Ba={class:"row gx-xxl-0 mb-2"},Na={class:"col-xxl-5"},Ra={class:""},Fa=["id"],za={key:1,class:"card card-header bg-warning-subtle mb-2"},Ga={class:"col-xxl-7 overflow-x-auto mt-xxl-0"},ja={class:"p-2"},Ya={class:"d-flex flex-row justify-content-between"},Wa=["src"],Ka={class:"badge bg-info"},Qa={class:"overflow-x-auto"},Ja={class:"d-flex flex-row"},Za={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Xa={class:"text-center"},el=["src"],tl=["data-bs-title"],sl={class:"border-bottom text-end mt-1"},ol={class:"text-nowrap"},al={key:0,class:"badge bg-warning mb-1"},ll={class:""},nl={class:"badge bg-info me-1"},rl={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,isDirty:w,validations:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,generateReturnUrl:i,security:S}=he({appTitle:"ARC AIO",pageTitle:"Dashboard"});Ce("$config"),we().user;const W=ye({item:null});ve("805630ed-f288-4f2f-83a4-6c71312f6970"),ve(),fe(async()=>{await y(),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(p=>new gt(p))}),Ue(()=>{W.item.forEach(q=>{q.hls&&(q.hls.stopLoad(),q.hls.destroy())})});const J=async()=>{const q=W;if(!M.value)try{M.value=!0;const p="/api/v1/epg/";q.item=[],await G.get(p).then(d=>{q.item=d.data}),q.item.forEach(d=>{K(d)})}catch(p){j.value=ae.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{M.value=!1}},u=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(d=>{N.success("Reset All Data","Reset data was successful.")})}catch(p){j.value=ae.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{M.value=!1}},y=async()=>{await J()},K=q=>{if(q.manifestUrl&&Hls.isSupported()){f(q);var p=document.getElementById(`video-${q.id}`);if(!p)return;q.hls&&(q.hsl.stopLoad(),q.hls.destroy());let d=q.manifestUrl;q.hls=ae.createHlsStream(p,d);return}},f=q=>{q.outputs&&q.outputs.forEach(d=>{if(d.hls){debugger;d.hls.detachMedia(),d.hls.destroy(),delete d.hls}d.playbackConfigurations.forEach(b=>{if(b.hls){debugger;b.hls.detachMedia(),b.hls.destroy(),delete b.hls}})})};return(q,p)=>{const d=oe("PageHeader"),b=oe("router-link");return t(),be($e,null,{default:F(()=>[e("div",null,[z(d,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(_)},{default:F(()=>[e("div",null,[e("button",{onClick:p[0]||(p[0]=r=>u()),class:"ms-2 btn btn-danger"},p[2]||(p[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),Y("Reset All Data ")])),e("button",{onClick:p[1]||(p[1]=r=>y()),class:"ms-2 btn btn-secondary"},p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Da,[o(j)?(t(),s("div",Ea,[p[4]||(p[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(j))},null,8,qa)])):V("",!0),(t(!0),s(P,null,B(W.item,r=>(t(),s("div",null,[e("div",Ba,[e("div",Na,[e("div",Ra,[r.manifestUrl?(t(),s("video",{key:0,id:`video-${r.id}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-scale align-middle"},null,8,Fa)):(t(),s("div",za," Channel not yet published "))])]),e("div",Ga,[e("div",ja,[e("div",Ya,[e("div",null,[e("h4",null,[e("img",{src:r.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Wa),z(b,{to:`${n.urlViewChannel}/${r.id}/${o(i)()}`},{default:F(()=>[Y(m(r.title),1)]),_:2},1032,["to"])])]),e("div",null,[e("span",Ka,m(r.playbackMode),1)])]),e("div",Qa,[e("div",Ja,[(t(!0),s(P,null,B(r.programs,c=>(t(),s("div",Za,[e("div",Xa,[e("img",{src:c.image,class:"img-fluid border",style:{height:"64px"}},null,8,el)]),e("div",{class:"text-truncate border-bottom","data-bs-toggle":"tooltip","data-bs-placement":"bottom","data-bs-title":c.title},m(c.title),9,tl),r.playbackMode==="LINEAR"?(t(),s(P,{key:0},[e("div",sl,[e("div",null,[e("small",ol,m(o(ae).moment(c.since).format("lll")),1)]),e("div",null,[e("small",null,m(o(ae).moment(c.till).format("lll")),1)])]),o(ae).moment().isAfter(c.since)&&o(ae).moment().isBefore(c.till)?(t(),s("span",al,"Now Playing")):V("",!0)],64)):V("",!0),e("div",ll,[(t(!0),s(P,null,B(c.genres,l=>(t(),s("span",nl,m(l),1))),256))])]))),256))])])])])])]))),256))])])]),_:1})}}};function De(n){if(!n.cacheKey)throw Error("Cache Key required.");if(!n.baseUrl)throw Error("Base Url required.");const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,closeWithReturnUrl:N,generateReturnUrl:L,security:i}=he({appTitle:n.appTitle,pageTitle:n.pageTitle}),S=JSON.parse(JSON.stringify(n.filter));S.pageIndex=S.pageIndex||1,S.pageSize=S.pageSize||5,S.sortField=S.sortField||"",S.sortOrder=S.sortOrder||1,S.updateUrl=S.updateUrl||!1,S.items=S.items||[],S.query=S.query||{},S.query.criteria=S.query.criteria||"";const $=ve(S),W=()=>{var r;if(M.value){console.log("Paginated search is currently busy.");return}const p=JSON.parse(localStorage.getItem(n.cacheKey))||{},d=new URLSearchParams(window.location.search),b=$.value;b.query.criteria=d.get("c")||p.criteria||b.query.criteria||"",b.pageIndex=parseInt(d.get("p"),10)||p.pageIndex||b.pageIndex||1,b.pageSize=parseInt(d.get("s"),10)||p.pageSize||b.pageSize||5,b.sortField=d.get("sf")||p.sortField||b.sortField||"",b.sortOrder=parseInt(d.get("so"),10)||p.sortOrder||b.sortOrder||1,b.visible=p.visible||b.visible,(r=n.initializeFilter)==null||r.call(n,$,n.cacheKey)},J=()=>{if(n.getQuery)return n.getQuery($.value);{const p=$.value;return["?c=",encodeURIComponent(p.query.criteria),"&p=",p.pageIndex,"&s=",p.pageSize,"&sf=",p.sortField,"&so=",p.sortOrder].join("")}},u=()=>{if(n.saveQuery)n.saveQuery($.value,n.cacheKey);else{const p=$.value;localStorage.setItem(n.cacheKey,JSON.stringify({criteria:p.query.criteria,pageIndex:p.pageIndex,pageSize:p.pageSize,sortField:p.sortField,sortOrder:p.sortOrder,visible:p.visible}))}};return{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,closeWithReturnUrl:N,generateReturnUrl:L,security:i,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:async p=>{var b;let d=$.value;if(M.value){console.log("Paginated search is currently busy.");return}p>0&&(d.pageIndex=p);try{M.value=!0,O.value="";const r=J();d.selected=null,await j(`${n.baseUrl}/${r}`).then(async c=>{var a;Array.isArray(c.data)?d.items=c.data:d=Object.assign(d,c.data);let l=location.pathname;l.endsWith("/")?l+=r:l+="/"+r,d.updateUrl&&window.history.replaceState(r,`${v}-search`,l),d.items.forEach(U=>{U.expand=!1}),u(),(a=n.successAction)==null||a.call(n,$.value)})}catch(r){if(localStorage.removeItem(n.cacheKey),n.failAction)n.failAction(r);else{const c=k.getErrorMessageAsHtml(r);O.value=c,G.error("Error Occured",c)}}finally{M.value=!1,(b=n.finalAction)==null||b.call(n)}},getRowNumber:p=>{const d=$.value;return(d.pageIndex-1)*d.pageSize+(p+1)},setSelected:p=>{const d=$.value;d.selected&&p&&d.selected===p?d.selected=null:(d.selected&&(d.selected.expand=!1),d.selected=p,d.selected.expand=!0)},isSelected:p=>{const d=$.value;return p===null||d.selected===null?!1:p===d.selected}}}const il=["disabled"],dl={class:"row row-cols-1 row-cols-sm-3"},ul={class:"col"},cl={class:"form-floating mb-2"},ml={key:0,class:"d-block invalid-feedback"},fl={class:"col"},pl={class:"form-floating"},vl={class:"col"},gl={class:"form-floating"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={class:"row row-cols-1 row-cols-sm-2"},hl={class:"col-sm-8"},wl={class:"ps-2"},_l={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},kl={class:"col"},Sl={class:"form-check"},Tl=["onUpdate:modelValue","id"],Il=["for"],Ml={class:"col-sm-4"},xl={class:"border p-2"},Cl={class:"form-check"},Vl=["onUpdate:modelValue","id"],Ol=["for"],Al={class:"table-responsive mt-2"},Pl={class:"text-end"},Ll={class:"table table-sm mb-0 mt-2"},Ul={class:"align-middle"},Hl={class:"text-center"},Dl=["onUpdate:modelValue"],El=["onUpdate:modelValue"],ql=["onUpdate:modelValue"],Bl={class:"text-start"},Nl=["onClick"],Rl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Video"}),L=n,i=ye({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:k.moment().format("YYYY-MM-DD"),formats:[]}}),S={item:{title:{title:le.withMessage("Title is required.",re),$autoDirty:!0,$lazy:!0},durationInMillis:{title:le.withMessage("Duration is required.",re),$autoDirty:!0,$lazy:!0},dateReleased:{title:le.withMessage("Date Released is required.",re),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i),W=xe(()=>{const f=k.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&k.isValidTime(i.durationTime)){const q=f().startOf("day"),p=q.format("YYYY-MM-DD ")+i.durationTime,b=f(p).subtract(q);return i.item.durationInMillis=b.valueOf(),i.item.durationInMillis}return 0});fe(async()=>{await u()});const J=async()=>{const f=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const p=k.clone(f.item);p.durationInMillis=W.value;const d=k.moment(f.item.dateReleased).utc(!0).format();p.dateReleased=d;const b=i.lookups.genres.filter(c=>c.selected).map(c=>c.id);p.genres=b;const r=i.lookups.categories.filter(c=>c.selected).map(c=>c.id);p.categories=r;debugger;await j.post("/api/v1/videos/",p).then(c=>{G.success("Add Video","Video added",{onClose:async()=>{const l=`${L.urlView}/${c.data}`;await Q.push(l)}})})}catch(p){O.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{M.value=!1}},u=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(f=>{const p=f.data.filter(d=>d.id!==0);i.lookups.genres=p})}catch(f){O.value=k.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},y=()=>{const f={format:"HLS",serverUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",path:"/ads/10seconds/10seconds.m3u8"};i.item.formats.push(f)},K=f=>{i.item.formats.splice(f,1)};return(f,q)=>{const p=oe("router-link"),d=oe("PageHeader"),b=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:q[0]||(q[0]=r=>J()),class:"btn btn-primary"},q[6]||(q[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,il),z(p,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>q[7]||(q[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(b,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",null,[e("div",dl,[e("div",ul,[e("div",cl,[R(e("input",{"onUpdate:modelValue":q[1]||(q[1]=r=>i.item.title=r),id:"name",class:ee([o(k).getValidFeedbackCss(i.item.title),"form-control"]),placeholder:"Title"},null,2),[[te,i.item.title]]),q[8]||(q[8]=e("label",{for:"title",class:""},"Title",-1)),o($).item.title.$error?(t(),s("div",ml,[(t(!0),s(P,null,B(o($).item.title.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):V("",!0)])]),e("div",fl,[e("div",pl,[R(e("input",{"onUpdate:modelValue":q[2]||(q[2]=r=>i.item.dateReleased=r),type:"date",step:"1",id:"dateReleased",class:ee([o(k).getValidFeedbackCss(i.item.dateReleased),"form-control"])},null,2),[[te,i.item.dateReleased]]),q[9]||(q[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",vl,[e("div",gl,[R(e("input",{"onUpdate:modelValue":q[3]||(q[3]=r=>i.durationTime=r),type:"time",step:"1",id:"durationTime",class:ee([o(k).getValidFeedbackCss(i.item.durationTime),"form-control"])},null,2),[[te,i.durationTime]]),q[10]||(q[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",bl,[e("div",yl,[R(e("textarea",{"onUpdate:modelValue":q[4]||(q[4]=r=>i.item.description=r),id:"name",class:ee([o(k).getValidFeedbackCss(i.item.description),"form-control"]),placeholder:"Description",style:{height:"5rem"}},null,2),[[te,i.item.description]]),q[11]||(q[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",$l,[e("div",hl,[q[12]||(q[12]=e("b",null,"Genres",-1)),e("div",wl,[e("div",_l,[(t(!0),s(P,null,B(i.lookups.genres,r=>(t(),s("div",kl,[e("div",Sl,[R(e("input",{"onUpdate:modelValue":c=>r.selected=c,class:"form-check-input",type:"checkbox",id:r.name},null,8,Tl),[[qe,r.selected]]),e("label",{class:"form-check-label",for:r.name},m(r.name),9,Il)])]))),256))])])]),e("div",Ml,[q[13]||(q[13]=e("b",null,"Categories",-1)),e("div",xl,[(t(!0),s(P,null,B(i.lookups.categories,r=>(t(),s("div",Cl,[R(e("input",{"onUpdate:modelValue":c=>r.selected=c,class:"form-check-input",type:"checkbox",id:r.name},null,8,Vl),[[qe,r.selected]]),e("label",{class:"form-check-label",for:r.name},m(r.name),9,Ol)]))),256))])])]),e("div",Al,[e("div",Pl,[e("button",{onClick:q[5]||(q[5]=r=>y()),class:"btn btn-outline-primary btn-sm"},q[14]||(q[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Ll,[q[17]||(q[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(P,null,B(i.item.formats,(r,c)=>(t(),s("tr",Ul,[e("td",Hl,m(c+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":l=>r.format=l,class:"form-control"},q[15]||(q[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,Dl),[[ge,r.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":l=>r.serverUrl=l,type:"text",class:"form-control"},null,8,El),[[te,r.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":l=>r.path=l,type:"text",class:"form-control"},null,8,ql),[[te,r.path]])]),e("td",Bl,[e("button",{onClick:l=>K(c),class:"btn btn-outline-warning btn-sm"},q[16]||(q[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Nl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Fl=["disabled"],zl={class:"row row-cols-1 row-cols-sm-3"},Gl={class:"col"},jl={class:"form-floating mb-2"},Yl={key:0,class:"d-block invalid-feedback"},Wl={class:"col"},Kl={class:"form-floating"},Ql={class:"col"},Jl={class:"form-floating"},Zl={class:"col"},Xl={class:"form-floating mb-2"},en={class:"row row-cols-1 row-cols-sm-2"},tn={class:"col-sm-8"},sn={class:"ps-2"},on={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},an={class:"col"},ln={class:"form-check"},nn=["onUpdate:modelValue","id"],rn=["for"],dn={class:"col-sm-4"},un={class:"border p-2"},cn={class:"form-check"},mn=["onUpdate:modelValue","id"],fn=["for"],pn={class:"table-responsive mt-2"},vn={class:"text-end"},gn={class:"table table-sm mb-0 mt-2 border1"},bn={class:"align-middle"},yn={class:"text-center"},$n=["onUpdate:modelValue"],hn=["value"],wn=["onUpdate:modelValue"],_n=["onUpdate:modelValue"],kn={class:"text-end"},Sn=["onClick"],Tn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Edit Video"}),L=n,i=ye({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),S={item:{title:{title:le.withMessage("title is required.",re),$autoDirty:!0,$lazy:!0},durationInMillis:{title:le.withMessage("durationInMillis is required.",re),$autoDirty:!0,$lazy:!0},dateReleased:{title:le.withMessage("Date Released is required.",re),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i),W=xe(()=>{const p=k.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&k.isValidTime(i.durationTime)){const d=p().startOf("day"),b=d.format("YYYY-MM-DD ")+i.durationTime,c=p(b).subtract(d);return i.item.durationInMillis=c.valueOf(),i.item.durationInMillis}return 0});fe(async()=>{await u(),await y(),await J()});const J=async()=>{try{await j.get(`/api/v1/videos/${L.id}/`).then(p=>{i.item=p.data;const d=k.moment(i.item.dateReleased).format("YYYY-MM-DD");i.item.dateReleased=d;const b=i.lookups.genres,r=i.item.genres.map(a=>a.genre);b.forEach(a=>{a.selected=r.includes(a.id)});const c=i.lookups.categories,l=i.item.categories.map(a=>a.category);c.forEach(a=>{a.selected=l.includes(a.id)})})}catch(p){O.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},u=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(p=>{const b=p.data.filter(r=>r.id!==0);i.lookups.genres=b})}catch(p){O.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},y=async()=>{try{await j.get("/api/v1/lookups/video-formats/").then(p=>{const b=p.data.filter(r=>r.id!==0);i.lookups.formats=b})}catch(p){O.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},K=async()=>{const p=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const b=k.clone(p.item);b.durationInMillis=W.value;const r=k.moment(p.item.dateReleased).utc(!0).format();b.dateReleased=r;const c=i.lookups.genres.filter(a=>a.selected).map(a=>a.id);b.genres=c;const l=i.lookups.categories.filter(a=>a.selected).map(a=>a.id);b.categories=l;debugger;await j.put("/api/v1/videos/",b).then(a=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const U=`${L.urlView}/${L.id}`;await Q.push(U)}})})}catch(b){O.value=k.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{M.value=!1}},f=()=>{const p={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};i.item.formats.push(p)},q=p=>{i.item.formats.splice(p,1)};return(p,d)=>{const b=oe("router-link"),r=oe("PageHeader"),c=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:d[0]||(d[0]=l=>K()),class:"btn btn-primary"},d[6]||(d[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Fl),e("button",{onClick:J,class:"btn btn-secondary ms-2"},d[7]||(d[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(b,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-2"},{default:F(()=>d[8]||(d[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(c,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",null,[e("div",zl,[e("div",Gl,[e("div",jl,[R(e("input",{"onUpdate:modelValue":d[1]||(d[1]=l=>i.item.title=l),id:"name",class:ee([o(k).getValidFeedbackCss(i.item.title),"form-control"]),placeholder:"Title"},null,2),[[te,i.item.title]]),d[9]||(d[9]=e("label",{for:"title",class:""},"Title",-1)),o($).item.title.$error?(t(),s("div",Yl,[(t(!0),s(P,null,B(o($).item.title.$errors,l=>(t(),s("div",{key:l.$uid},m(l.$message),1))),128))])):V("",!0)])]),e("div",Wl,[e("div",Kl,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=l=>i.item.dateReleased=l),type:"date",step:"1",id:"dateReleased",class:ee([o(k).getValidFeedbackCss(i.item.dateReleased),"form-control"])},null,2),[[te,i.item.dateReleased]]),d[10]||(d[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",Ql,[e("div",Jl,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=l=>i.durationTime=l),type:"time",step:"1",id:"durationTime",class:ee([o(k).getValidFeedbackCss(i.item.ddurationTime),"form-control"])},null,2),[[te,i.durationTime]]),d[11]||(d[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Zl,[e("div",Xl,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=l=>i.item.description=l),id:"name",class:"form-control is-valid",placeholder:"Description",style:{height:"5rem"}},null,512),[[te,i.item.description]]),d[12]||(d[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",en,[e("div",tn,[d[13]||(d[13]=e("b",null,"Genres",-1)),e("div",sn,[e("div",on,[(t(!0),s(P,null,B(i.lookups.genres,l=>(t(),s("div",an,[e("div",ln,[R(e("input",{"onUpdate:modelValue":a=>l.selected=a,class:"form-check-input",type:"checkbox",id:l.name},null,8,nn),[[qe,l.selected]]),e("label",{class:"form-check-label",for:l.name},m(l.name),9,rn)])]))),256))])])]),e("div",dn,[d[14]||(d[14]=e("b",null,"Categories",-1)),e("div",un,[(t(!0),s(P,null,B(i.lookups.categories,l=>(t(),s("div",cn,[R(e("input",{"onUpdate:modelValue":a=>l.selected=a,class:"form-check-input",type:"checkbox",id:l.name},null,8,mn),[[qe,l.selected]]),e("label",{class:"form-check-label",for:l.name},m(l.name),9,fn)]))),256))])])]),e("div",pn,[e("div",vn,[e("button",{onClick:d[5]||(d[5]=l=>f()),class:"btn btn-outline-primary btn-sm"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",gn,[d[17]||(d[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(P,null,B(i.item.formats,(l,a)=>(t(),s("tr",bn,[e("td",yn,m(a+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":U=>l.format=U,class:"form-control"},[(t(!0),s(P,null,B(i.lookups.formats,U=>(t(),s("option",{value:U.id},m(U.name),9,hn))),256))],8,$n),[[ge,l.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":U=>l.serverUrl=U,type:"text",class:"form-control"},null,8,wn),[[te,l.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":U=>l.path=U,type:"text",class:"form-control"},null,8,_n),[[te,l.path]])]),e("td",kn,[e("button",{onClick:U=>q(a),class:"btn btn-outline-warning btn-sm"},d[16]||(d[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Sn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},In={class:"ms-2"},Mn={class:"input-group"},xn=["value"],Cn={class:"ms-1"},Vn={class:"input-group"},On={class:"ms-1"},An={class:"input-group"},Pn={class:"table-responsive border shadow-sm"},Ln={class:"table table-hover mb-0"},Un=["textContent"],Hn={class:"d-flex flex-column flex-md-row justify-content-start"},Dn={class:"mt-1"},En=["src"],qn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Bn={class:"ms-md-2"},Nn={key:0},Rn={class:"badge bg-primary me-1"},Fn={key:1},zn={class:"badge bg-info me-1"},Gn={class:"text-center"},jn={class:"text-end"},Yn=["onClick"],Wn={key:0,class:"fas fa-fw fa-chevron-circle-up"},Kn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Qn={key:0},Jn={colspan:"999"},Zn={class:""},Xn={class:"d-flex flex-column flex-md-row justify-content-start"},er={class:"col mb-2"},tr={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},sr={class:"col col-lg-auto mb-2"},or={key:0},ar={class:"badge bg-secondary me-1"},lr="/api/v1/videos/search",nr={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:J,search:u,getRowNumber:y,setSelected:K,isSelected:f}=De({appTitle:"Arcadian-FAST",pageTitle:"Videos",cacheKey:`${_==null?void 0:_.userId}/videos/search`,baseUrl:lr,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(p,d)=>{const b=p.value,r=new URLSearchParams(window.location.search),c=JSON.parse(localStorage.getItem(d))||{};b.query.genre=r.get("genre")||c.genre||b.query.genre||0,b.query.category=r.get("category")||c.category||b.query.category||0},getQuery:p=>["?c=",encodeURIComponent(p.query.criteria),"&p=",p.pageIndex,"&s=",p.pageSize,"&sf=",p.sortField,"&so=",p.sortOrder,"&genre=",p.query.genre,"&category=",p.query.category].join(""),saveQuery:(p,d)=>{localStorage.setItem(d,JSON.stringify({criteria:p.query.criteria,pageIndex:p.pageIndex,pageSize:p.pageSize,sortField:p.sortField,sortOrder:p.sortOrder,visible:p.visible,genre:p.query.genre,category:p.query.category}))}});fe(async()=>{$(),await q(),await u()});const q=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(p=>{const d=p.data;S.value.lookups.genres=d})}catch(p){j.value=ae.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}};return(p,d)=>{const b=oe("router-link"),r=oe("PageHeader"),c=oe("m-pagination"),l=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:F(()=>[z(b,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",In,[e("div",Mn,[d[6]||(d[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":d[0]||(d[0]=a=>o(S).query.genre=a),class:"form-select"},[(t(!0),s(P,null,B(o(S).lookups.genres,a=>(t(),s("option",{value:a.id},m(a.name),9,xn))),256))],512),[[ge,o(S).query.genre]])])]),e("div",Cn,[e("div",Vn,[d[8]||(d[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":d[1]||(d[1]=a=>o(S).query.category=a),class:"form-select"},d[7]||(d[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(S).query.category]])])]),e("div",On,[e("div",An,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=a=>o(S).query.criteria=a),onKeyup:d[3]||(d[3]=He(a=>o(u)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[te,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[4]||(d[4]=a=>o(u)(1))},d[9]||(d[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(l,{errorMessage:o(j)},{default:F(()=>[e("div",Pn,[e("table",Ln,[d[14]||(d[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o(S).items,(a,U)=>(t(),s(P,{key:a.videoId},[e("tr",null,[e("td",{textContent:m(o(y)(U)),class:"text-center"},null,8,Un),e("td",null,[e("div",Hn,[e("div",null,[a.thumbnails.length>0?(t(!0),s(P,{key:0},B(a.thumbnails,T=>(t(),s("div",Dn,[e("img",{src:T.url,class:"img-fuild border",width:"128"},null,8,En)]))),256)):(t(),s("img",qn))]),e("div",Bn,[z(b,{to:`${n.urlView}/${a.videoId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[Y(m(a.title),1)]),_:2},1032,["to"]),e("div",null,[a.categories.length>0?(t(),s("div",Nn,[(t(!0),s(P,null,B(a.categories,T=>(t(),s("span",Rn,m(T.categoryName),1))),256))])):V("",!0),a.genres.length>0?(t(),s("div",Fn,[(t(!0),s(P,null,B(a.genres,T=>(t(),s("span",zn,m(T.genreName),1))),256))])):V("",!0)])])])]),e("td",Gn,m(o(ae).moment.utc(a.durationInMillis).format("HH:mm:ss")),1),e("td",jn,[e("button",{onClick:T=>a.expand=!a.expand,class:ee([[a.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[a.expand?(t(),s("span",Wn)):(t(),s("span",Kn))],10,Yn)])]),a.expand?(t(),s("tr",Qn,[d[13]||(d[13]=e("td",null,null,-1)),e("td",Jn,[e("div",Zn,[e("div",Xn,[e("div",er,[d[10]||(d[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,m(a.description),1)]),e("div",tr,[d[11]||(d[11]=e("label",{class:"form-label"},"Date Released",-1)),e("div",null,m(o(bt).utc(a.dateReleased).format("l")),1)]),e("div",sr,[d[12]||(d[12]=e("label",{class:"form-label"},"Formats",-1)),a.formats.length>0?(t(),s("div",or,[(t(!0),s(P,null,B(a.formats,T=>(t(),s("span",ar,m(T.formatName),1))),256))])):V("",!0)])])])])])):V("",!0)],64))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(c,{filter:o(S),search:o(u),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},rr={key:0},ir={class:"nav nav-tabs",id:"myTab",role:"tablist"},dr={class:"nav-item",role:"presentation"},ur={class:"nav-item",role:"presentation"},cr={class:"nav-item",role:"presentation"},mr={class:"nav-item",role:"presentation"},fr={class:"tab-content",id:"myTabContent"},pr={class:""},vr={class:"row row-cols-1 row-cols-sm-2"},gr={class:"col"},br=["id"],yr={class:"col"},$r={class:"col"},hr={class:"form-floating mb-2"},wr={class:"row row-cols-1 row-cols-sm-2"},_r={class:"col"},kr={class:"form-floating mb-2"},Sr={class:"col"},Tr={class:"form-floating mb-2"},Ir={class:"col"},Mr={class:"form-floating mb-2"},xr={class:"mt-1"},Cr={class:"badge bg-info me-1"},Vr={class:"badge bg-primary me-1"},Or={class:""},Ar={class:"table-responsive border"},Pr={class:"table table-hover mb-0"},Lr={class:"table-group-divider"},Ur={class:"align-middle"},Hr={class:"text-center"},Dr={class:""},Er={class:"text-end"},qr={class:"table-responsive border mt-2"},Br={class:"table table-hover mb-0 caption-top"},Nr={class:""},Rr={class:"table-responsive"},Fr={class:"table table-hover mb-0 caption-top"},zr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View Video"});Ce("$config");const J=we();J.user;const u=ye({user:J.user,item:null,hls:null}),y=ve();fe(async()=>{await p(),y.value=N.getPageTab("video")||"information-tab"}),Ue(()=>{u.hls&&(u.hls.stopLoad(),u.hls.destroy())});const K=c=>{N.setPageTab("video",c),y.value=c},f=c=>c!==y.value?"":"active",q=c=>c!==y.value?"":"show active",p=async()=>{const c=u;if(!w.value)try{w.value=!0,k.value="",u.item=null;const l=`/api/v1/videos/${v.id}/`;await ae.get(l).then(a=>{c.item=a.data,c.item.duration=N.moment.utc(c.item.durationInMillis).format("HH:mm:ss"),c.item.dateReleased=N.moment.utc(c.item.dateReleased).format("ll")}),b()}catch(l){k.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},d=async()=>{await p()},b=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),u.hls&&u.hls.destroy();const l=`video-${u.item.videoId}`;var c=document.getElementById(l);const a=u.item.formats.find(T=>T.formatName==="HLS"),U=a.serverUrl+a.path;u.hls=N.createHlsStream(c,U,!1),u.hls.startLoad(-1)}},r=async()=>{if(!w.value)try{w.value=!0,k.value="";const c=`/api/v1/videos/${v.id}/get-blank-frames/`;await ae.post(c).then(l=>{}),w.value=!1,await d()}catch(c){k.value=N.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{w.value=!1}};return(c,l)=>{const a=oe("router-link"),U=oe("PageHeader"),T=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(U,{"page-icon":"fas fa-fw fa-video",pageTitle:o(M)},{default:F(()=>[z(a,{to:`${n.urlEdit}/${n.id}`,class:"btn btn-primary ms-1"},{default:F(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=g=>d()),class:"ms-2 btn btn-secondary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[1]||(l[1]=g=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(T,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",rr,[e("div",null,[e("ul",ir,[e("li",dr,[e("button",{onClick:l[2]||(l[2]=g=>K("information-tab")),class:ee([f("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ur,[e("button",{onClick:l[3]||(l[3]=g=>K("formats-tab")),class:ee([f("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",cr,[e("button",{onClick:l[4]||(l[4]=g=>K("blankFrames-tab")),class:ee([f("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",mr,[e("button",{onClick:l[5]||(l[5]=g=>K("vodSources-tab")),class:ee([f("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",fr,[e("div",{class:ee([q("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",pr,[e("div",vr,[e("div",gr,[e("video",{id:`video-${u.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,br)]),e("div",yr,[e("div",$r,[e("div",hr,[R(e("input",{"onUpdate:modelValue":l[6]||(l[6]=g=>u.item.title=g),type:"text",class:"form-control-plaintext card",id:"title",placeholder:"Title"},null,512),[[te,u.item.title]]),l[14]||(l[14]=e("label",{for:"title"},"Title",-1))])]),e("div",wr,[e("div",_r,[e("div",kr,[R(e("input",{"onUpdate:modelValue":l[7]||(l[7]=g=>u.item.dateReleased=g),type:"text",class:"form-control-plaintext card",id:"dateReleased",placeholder:"Date Released"},null,512),[[te,u.item.dateReleased]]),l[15]||(l[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Sr,[e("div",Tr,[R(e("input",{"onUpdate:modelValue":l[8]||(l[8]=g=>u.item.duration=g),type:"text",class:"form-control-plaintext card",id:"duration",placeholder:"Duration"},null,512),[[te,u.item.duration]]),l[16]||(l[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Ir,[e("div",Mr,[R(e("textarea",{"onUpdate:modelValue":l[9]||(l[9]=g=>u.item.description=g),type:"text",class:"form-control-plaintext card",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[te,u.item.description]]),l[17]||(l[17]=e("label",{for:"description"},"Description",-1))])]),e("div",xr,[(t(!0),s(P,null,B(u.item.genres,g=>(t(),s("span",Cr,m(g.genreName),1))),256)),(t(!0),s(P,null,B(u.item.categories,g=>(t(),s("span",Vr,m(g.categoryName),1))),256))])])])])],2),e("div",{class:ee([q("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",Or,[e("div",Ar,[e("table",Pr,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Lr,[(t(!0),s(P,null,B(u.item.formats,(g,E)=>(t(),s("tr",Ur,[e("td",Hr,m(E+1),1),e("td",null,m(g.formatName),1),e("td",null,m(g.serverUrl),1),e("td",null,m(g.path),1)]))),256))])])])])],2),e("div",{class:ee([q("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",Dr,[e("div",null,[e("div",Er,[e("button",{onClick:l[10]||(l[10]=g=>r()),class:"btn btn-outline-primary btn-sm"},l[19]||(l[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),Y("Process ")]))]),e("div",qr,[e("table",Br,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.blankFrames,(g,E)=>(t(),s("tr",{key:g.videoBlankFrameId},[e("td",null,m(E+1),1),e("td",null,m(o(N).moment.utc(g.startInMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(g.endInMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(g.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[ke,u.item.blankFrames.length>0]])])])])])],2),e("div",{class:ee([q("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Nr,[e("div",Rr,[e("table",Fr,[l[21]||(l[21]=e("caption",null,"VOD Sources",-1)),l[22]||(l[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.vodSources,(g,E)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,m(E+1),1),e("td",null,[z(a,{to:`${v.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(g.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[ke,u.item.vodSources.length>0]])])])])],2)])])])):V("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Gr=["disabled"],jr={class:"form-floating mb-2"},Yr={key:0,class:"d-block invalid-feedback"},Wr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Source Group"}),L=n,i=ye({lookups:{},item:{name:null}}),S={item:{name:{required:le.withMessage("name is required.",re),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i);fe(async()=>{});const W=async()=>{const J=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const y=k.clone(J.item);await j.post("/api/v1/sourcegroups/",y).then(K=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const f=`${L.urlView}/${K.data}`;await Q.push(f)}})})}catch(y){O.value=k.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{M.value=!1}};return(J,u)=>{const y=oe("router-link"),K=oe("PageHeader"),f=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(K,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:u[0]||(u[0]=q=>W()),class:"btn btn-primary"},u[2]||(u[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gr),z(y,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>u[3]||(u[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(f,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",null,[e("div",jr,[R(e("input",{"onUpdate:modelValue":u[1]||(u[1]=q=>i.item.name=q),type:"text",class:ee([o(k).getValidFeedbackCss(i.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[te,i.item.name]]),u[4]||(u[4]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",Yr,[(t(!0),s(P,null,B(o($).item.name.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):V("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Kr={key:0,class:"d-flex justify-content-end"},Qr=["disabled"],Jr={key:0},Zr={class:"row row-cols-1 row-cols-sm-2"},Xr={class:"col"},ei={class:"form-floating mb-2"},ti={key:0,class:"d-block invalid-feedback"},si={class:"col"},oi={class:"form-floating mb-2"},ai={key:0,class:"d-block invalid-feedback"},li={class:"row row-cols-sm-2"},ni={class:"col"},ri={class:"form-floating mb-2"},ii={class:"form-floating mb-2"},di={key:0,class:"d-block invalid-feedback"},ui={class:"form-floating mb-2"},ci={key:0,class:"d-block invalid-feedback"},mi={class:"col"},fi={class:"form-floating mb-2"},at={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),L=n,i=ye({editorElementId:"editor",htmlContent:"",item:null}),S={item:{title:{required:le.withMessage("Title is required.",re),$autoDirty:!0,$lazy:!0},eidr:{required:le.withMessage("eidr is required.",re),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:le.withMessage("eidrPrefix is required.",re),$autoDirty:!0,$lazy:!0}},htmlContent:{required:le.withMessage("Content is required.",re),$autoDirty:!0,$lazy:!0}},$=Ie(S,i);fe(async()=>{await u()});const W=()=>{const K=i;var f=document.getElementById(K.editorElementId);f.innerHTML=K.htmlContent},J=K=>{const f=i;f.htmlContent=K.target.innerHTML;var q=document.getElementById(f.editorElementId);q.value=f.htmlContent},u=async()=>{const K=i;if(!M.value)try{M.value=!0,i.item=null,await j.get(`/api/v1/movies/${L.id}`).then(f=>{K.item=f.data,K.htmlContent=K.item.description}),W()}catch(f){O.value=k.getErrorMessageAsHtml(f)}finally{M.value=!1}},y=async()=>{const K=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const q=k.clone(K.item);q.description=K.htmlContent,await j.put("/api/v1/movies",q).then(p=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const d=`${L.urlView}/${L.id}`;await Q.push(d)}})})}catch(q){O.value=k.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{M.value=!1}};return(K,f)=>{const q=oe("router-link"),p=oe("PageHeader"),d=oe("PageBody");return t(),s("div",null,[z(p,{"page-icon":"fas fa-fw fa-film",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:F(()=>[i.item?(t(),s("div",Kr,[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:f[0]||(f[0]=b=>y()),class:"btn btn-primary"},f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qr),e("button",{onClick:u,class:"ms-2 btn btn-secondary"},f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(q,{to:`${L.urlView}/${L.id}`,class:"ms-1 btn btn-secondary"},{default:F(()=>f[9]||(f[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):V("",!0)]),_:1},8,["pageTitle"]),z(d,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[i.item?(t(),s("div",Jr,[e("div",Zr,[e("div",Xr,[e("div",ei,[R(e("input",{"onUpdate:modelValue":f[1]||(f[1]=b=>i.item.eidrPrefix=b),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[te,i.item.eidrPrefix]]),f[10]||(f[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o($).item.eidrPrefix.$error?(t(),s("div",ti,[(t(!0),s(P,null,B(o($).item.eidrPrefix.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):V("",!0)])]),e("div",si,[e("div",oi,[R(e("input",{"onUpdate:modelValue":f[2]||(f[2]=b=>i.item.eidr=b),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[te,i.item.eidr]]),f[11]||(f[11]=e("label",{for:"title"},"Eidr",-1)),o($).item.eidr.$error?(t(),s("div",ai,[(t(!0),s(P,null,B(o($).item.eidr.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):V("",!0)])])]),e("div",li,[e("div",ni,[e("div",ri,[R(e("input",{"onUpdate:modelValue":f[3]||(f[3]=b=>i.item.releaseYear=b),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[te,i.item.releaseYear]]),f[12]||(f[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",ii,[R(e("input",{"onUpdate:modelValue":f[4]||(f[4]=b=>i.item.title=b),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[te,i.item.title]]),f[13]||(f[13]=e("label",{for:"title"},"Title",-1)),o($).item.title.$error?(t(),s("div",di,[(t(!0),s(P,null,B(o($).item.title.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):V("",!0)])])]),e("div",null,[e("div",ui,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:f[5]||(f[5]=b=>J(b))},null,32),f[14]||(f[14]=e("label",{for:"editor"},"Content",-1)),o($).htmlContent.$error?(t(),s("div",ci,[(t(!0),s(P,null,B(o($).htmlContent.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):V("",!0)])]),e("div",mi,[e("div",fi,[R(e("textarea",{"onUpdate:modelValue":f[6]||(f[6]=b=>i.item.metadata=b),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[te,i.item.metadata]]),f[15]||(f[15]=e("label",{for:"title"},"Metadata",-1))])])])):V("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},pi={components:{Page:at},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function vi(n,v,_,M,w,H){const O=oe("Page");return t(),be(O,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const gi=Ve(pi,[["render",vi]]),bi={class:"ms-2"},yi={class:"input-group"},$i={class:"table-responsive border shadow-sm"},hi={class:"table table-hover mb-0"},wi=["textContent"],_i={key:0,class:"fas fa-fw fa-check-circle text-success"},ki={class:"text-center"},Si={class:"text-center"},Ti="/api/v1/sourcegroups/search",Ii={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:J,search:u,getRowNumber:y,setSelected:K,isSelected:f}=De({appTitle:"Arcadian-FAST",pageTitle:"Source Groups",cacheKey:`${_==null?void 0:_.userId}/source-groups/search`,baseUrl:Ti,filter:{updateUrl:!0}});return fe(async()=>{$(),await u()}),(q,p)=>{const d=oe("router-link"),b=oe("PageHeader"),r=oe("m-pagination"),c=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(b,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w)},{default:F(()=>[z(d,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",bi,[e("div",yi,[R(e("input",{"onUpdate:modelValue":p[0]||(p[0]=l=>o(S).query.criteria=l),onKeyup:p[1]||(p[1]=He(l=>o(u)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[te,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:p[2]||(p[2]=l=>o(u)(1))},p[4]||(p[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(c,{errorMessage:o(j)},{default:F(()=>[e("div",$i,[e("table",hi,[p[5]||(p[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"# of Channel Outputs"),e("th",{class:"text-center"},"# of Package Configurations")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o(S).items,(l,a)=>(t(),s("tr",{key:l.sourceGroupId},[e("td",{textContent:m(o(y)(a)),class:"text-center"},null,8,wi),e("td",null,[z(d,{to:`${n.urlView}/${l.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[l.arn?(t(),s("span",_i)):V("",!0),Y(" "+m(l.name),1)]),_:2},1032,["to"])]),e("td",ki,m(l.channelOutputs),1),e("td",Si,m(l.packageConfigurations),1)]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(r,{filter:o(S),search:o(u),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Mi={key:0},xi={class:"nav nav-tabs",id:"myTab",role:"tablist"},Ci={class:"nav-item",role:"presentation"},Vi={class:"nav-item",role:"presentation"},Oi={class:"nav-item",role:"presentation"},Ai={class:"tab-content",id:"myTabContent"},Pi={class:""},Li={class:"form-floating"},Ui={class:""},Hi={class:"table-responsive border"},Di={class:"table table-hover mb-0"},Ei={class:""},qi={class:"table-responsive border"},Bi={class:"table table-hover mb-0"},Ni={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View Source Group"});Ce("$config");const J=we();J.user;const u=ye({user:J.user,item:null}),y=ve();fe(async()=>{await p(),y.value=N.getPageTab("sourceGroup")||"information-tab"});const K=r=>{N.setPageTab("sourceGroup",r),y.value=r},f=r=>r!==y.value?"":"active",q=r=>r!==y.value?"":"show active",p=async()=>{const r=u;if(!w.value)try{w.value=!0,k.value="",u.item=null;const c=`/api/v1/sourcegroups/${v.id}/`;await ae.get(c).then(l=>{r.item=l.data})}catch(c){k.value=N.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{w.value=!1}},d=async()=>{if(!w.value)try{w.value=!0,k.value="";const r=`/api/v1/sourcegroups/${v.id}/`;await ae.delete(r).then(c=>{L.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const l=`${v.urlMain}/`;await G.push(l)}})})}catch(r){k.value=N.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{w.value=!1}},b=async()=>{await p()};return(r,c)=>{const l=oe("PageHeader"),a=oe("router-link"),U=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(M)},{default:F(()=>[e("button",{onClick:c[0]||(c[0]=T=>d()),class:"ms-1 btn btn-warning"},c[7]||(c[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:c[1]||(c[1]=T=>b()),class:"ms-2 btn btn-secondary"},c[8]||(c[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:c[2]||(c[2]=T=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},c[9]||(c[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(U,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",Mi,[e("div",null,[e("ul",xi,[e("li",Ci,[e("button",{onClick:c[3]||(c[3]=T=>K("information-tab")),class:ee([f("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Vi,[e("button",{onClick:c[4]||(c[4]=T=>K("channelOutputs-tab")),class:ee([f("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",Oi,[e("button",{onClick:c[5]||(c[5]=T=>K("packageConfigurations-tab")),class:ee([f("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",Ai,[e("div",{class:ee([q("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Pi,[e("div",Li,[R(e("input",{"onUpdate:modelValue":c[6]||(c[6]=T=>u.item.name=T),type:"text",class:"form-control-plaintext card",id:"name",readonly:""},null,512),[[te,u.item.name]]),c[10]||(c[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:ee([q("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Ui,[e("div",Hi,[e("table",Di,[c[11]||(c[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.channelOutputs,(T,g)=>(t(),s("tr",{key:T.channelOutputId},[e("td",null,m(g+1),1),e("td",null,[z(a,{to:`${n.urlViewChannel}/${T.channelId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(T.manifestName),1)]),_:2},1032,["to"])]),e("td",null,m(T.outputType),1)]))),128))]),_:1},512),[[ke,u.item.channelOutputs.length>0]])])])])],2),e("div",{class:ee([q("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Ei,[e("div",qi,[e("table",Bi,[c[12]||(c[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.packageConfigurations,(T,g)=>(t(),s("tr",{key:T.packageConfigurationId},[e("td",null,m(g+1),1),e("td",null,[z(a,{to:`${n.urlViewVodSource}/${T.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(T.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,m(T.path),1),e("td",null,m(T.type),1)]))),128))]),_:1},512),[[ke,u.item.packageConfigurations.length>0]])])])])],2)])])])):V("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ri=["disabled"],Fi={class:"form-floating mb-2"},zi={key:0,class:"d-block invalid-feedback"},Gi={class:"form-floating mb-2"},ji={key:0,class:"d-block invalid-feedback"},Yi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Source Location"}),L=n,i=ye({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),S={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:le.withMessage("HTTP Configuration Base Url is required.",re),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i);fe(async()=>{});const W=async()=>{const J=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const y=k.clone(J.item);await j.post("/api/v1/sourcelocations/",y).then(K=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const f=`${L.urlView}/${K.data}`;await Q.push(f)}})})}catch(y){O.value=k.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{M.value=!1}};return(J,u)=>{const y=oe("router-link"),K=oe("PageHeader"),f=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(K,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:u[0]||(u[0]=q=>W()),class:"btn btn-primary"},u[3]||(u[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ri),z(y,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>u[4]||(u[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(f,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",null,[e("div",Fi,[R(e("input",{"onUpdate:modelValue":u[1]||(u[1]=q=>i.item.name=q),type:"text",class:ee([o(k).getValidFeedbackCss(i.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[te,i.item.name]]),u[5]||(u[5]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",zi,[(t(!0),s(P,null,B(o($).item.name.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):V("",!0)]),e("div",Gi,[R(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=q=>i.item.httpConfigurationBaseUrl=q),type:"text",class:ee([o(k).getValidFeedbackCss(i.item.httpConfigurationBaseUrl),"form-control"]),id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,2),[[te,i.item.httpConfigurationBaseUrl]]),u[6]||(u[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o($).item.httpConfigurationBaseUrl.$error?(t(),s("div",ji,[(t(!0),s(P,null,B(o($).item.httpConfigurationBaseUrl.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):V("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Wi={components:{Page:at},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ki(n,v,_,M,w,H){const O=oe("Page");return t(),be(O,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const Qi=Ve(Wi,[["render",Ki]]),Ji={class:"ms-1"},Zi={class:"input-group"},Xi={class:"table-responsive border shadow-sm"},ed={class:"table table-hover mb-0"},td={class:"text-center"},sd=["textContent"],od={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ad={class:"text-center"},ld=["onUpdate:modelValue"],nd="/api/v1/sourcelocations/search",rd={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:J,search:u,getRowNumber:y,setSelected:K,isSelected:f}=De({appTitle:"Arcadian-FAST",pageTitle:"Source Locations",cacheKey:`${_==null?void 0:_.userId}/source-locations/search`,baseUrl:nd,filter:{updateUrl:!0}}),q=xe(()=>{const b=S.value;return b&&b.items?b.items.filter(l=>l.selected):null});fe(async()=>{$(),await u()});const p=async()=>{if(!(q.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!H.value){j.value=null;try{H.value=!0;const c={sourceLocationIds:q.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",c).then(l=>{N.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),H.value=!1,await u()}catch(r){j.value=ae.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{H.value=!1}}},d=async()=>{if(!(q.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!H.value){j.value=null;try{H.value=!0;const c={sourceLocationIds:q.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",c).then(l=>{N.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),H.value=!1,await u()}catch(r){j.value=ae.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{H.value=!1}}};return(b,r)=>{const c=oe("router-link"),l=oe("PageHeader"),a=oe("m-pagination"),U=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w)},{default:F(()=>[z(c,{to:n.urlAdd,class:"btn btn-primary ms-2"},{default:F(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ji,[e("div",Zi,[R(e("input",{"onUpdate:modelValue":r[0]||(r[0]=T=>o(S).query.criteria=T),onKeyup:r[1]||(r[1]=He(T=>o(u)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[te,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:r[2]||(r[2]=T=>o(u)(1))},r[4]||(r[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(U,{errorMessage:o(j)},{default:F(()=>[e("div",Xi,[e("table",ed,[e("thead",null,[e("tr",null,[r[7]||(r[7]=e("td",{class:"text-center"},"#",-1)),r[8]||(r[8]=e("th",null,"Name",-1)),r[9]||(r[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",td,[q.value.length?(t(),s(P,{key:0},[e("button",{onClick:p,class:"btn btn-primary btn-sm"},r[5]||(r[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:d,class:"btn btn-warning btn-sm ms-1"},r[6]||(r[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):V("",!0)])])]),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o(S).items,(T,g)=>(t(),s("tr",{key:T.sourceLocationId},[e("td",{textContent:m(o(y)(g)),class:"text-center"},null,8,sd),e("td",null,[z(c,{to:`${n.urlView}/${T.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[T.arn?(t(),s("i",od)):V("",!0),e("span",null,m(T.name),1)]),_:2},1032,["to"])]),e("td",null,m(T.httpConfigurationBaseUrl),1),e("td",ad,[R(e("input",{"onUpdate:modelValue":E=>T.selected=E,type:"checkbox",class:"form-check-input"},null,8,ld),[[qe,T.selected]])])]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(a,{filter:o(S),search:o(u),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},id={key:0},dd={class:"nav nav-tabs",id:"myTab",role:"tablist"},ud={class:"nav-item",role:"presentation"},cd={class:"nav-item",role:"presentation"},md={class:"nav-item",role:"presentation"},fd={class:"tab-content",id:"myTabContent"},pd={class:""},vd={class:"col"},gd={class:"form-floating mb-2"},bd={class:"col"},yd={class:"form-floating"},$d={class:""},hd={class:"table-responsive border"},wd={class:"table table-hover mb-0"},_d={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},kd={class:""},Sd={class:"table-responsive border"},Td={class:"table table-hover mb-0"},Id={key:0,class:"fas fa-fw fa-check-circle text-success"},Md={class:"badge bg-info"},xd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View Source Location"});Ce("$config");const J=we();J.user;const u=ye({user:J.user,item:null}),y=ve();fe(async()=>{await p(),y.value=N.getPageTab("sourceLocation")||"information-tab"});const K=c=>{N.setPageTab("sourceLocation",c),y.value=c},f=c=>c!==y.value?"":"active",q=c=>c!==y.value?"":"show active",p=async()=>{const c=u;if(!w.value)try{w.value=!0,k.value="",u.item=null;const l=`/api/v1/sourcelocations/${v.id}/`;await ae.get(l).then(a=>{c.item=a.data})}catch(l){k.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},d=async()=>{await p()},b=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!w.value){k.value=null;try{w.value=!0;const l={sourceLocationIds:[v.id]};await ae.post("/api/v1/sourcelocations/publish/",l).then(a=>{L.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),w.value=!1,await d()}catch(l){k.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}}},r=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!w.value){k.value=null;try{w.value=!0;const l={sourceLocationIds:[v.id]};await ae.post("/api/v1/sourcelocations/unpublish/",l).then(a=>{L.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),w.value=!1,await d()}catch(l){k.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}}};return(c,l)=>{const a=oe("PageHeader"),U=oe("router-link"),T=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(M)},{default:F(()=>[u.item?(t(),s(P,{key:0},[u.item.arn?(t(),s("button",{key:0,onClick:l[0]||(l[0]=g=>r()),class:"ms-1 btn btn-warning"},l[9]||(l[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:l[1]||(l[1]=g=>b()),class:"ms-1 btn btn-primary"},l[10]||(l[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):V("",!0),e("button",{onClick:l[2]||(l[2]=g=>d()),class:"ms-2 btn btn-secondary"},l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[3]||(l[3]=g=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(T,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",id,[e("div",null,[e("ul",dd,[e("li",ud,[e("button",{onClick:l[4]||(l[4]=g=>K("information-tab")),class:ee([f("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",cd,[e("button",{onClick:l[5]||(l[5]=g=>K("vodSources-tab")),class:ee([f("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",md,[e("button",{onClick:l[6]||(l[6]=g=>K("programs-tab")),class:ee([f("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",fd,[e("div",{class:ee([q("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",pd,[e("div",vd,[e("div",gd,[R(e("input",{"onUpdate:modelValue":l[7]||(l[7]=g=>u.item.name=g),type:"text",class:"form-control-plaintext card",id:"name",readonly:""},null,512),[[te,u.item.name]]),l[13]||(l[13]=e("label",{for:"name"},"Name",-1))])]),e("div",bd,[e("div",yd,[R(e("input",{"onUpdate:modelValue":l[8]||(l[8]=g=>u.item.httpConfigurationBaseUrl=g),type:"text",class:"form-control-plaintext card",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[te,u.item.httpConfigurationBaseUrl]]),l[14]||(l[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ee([q("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",$d,[e("div",hd,[e("table",wd,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.vodSources,(g,E)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,m(E+1),1),e("td",null,[g.arn?(t(),s("span",_d)):V("",!0),z(U,{to:`${v.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(g.name),1)]),_:2},1032,["to"])]),e("td",null,[z(U,{to:`${v.urlViewVideo}/${encodeURIComponent(g.video.videoId)}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(g.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,m(o(N).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[ke,u.item.vodSources.length>0]])])])])],2),e("div",{class:ee([q("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",kd,[e("div",Sd,[e("table",Td,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.programs,(g,E)=>(t(),s("tr",{key:g.programId},[e("td",null,m(E+1),1),e("td",null,[z(U,{to:`${v.urlViewChannel}/${encodeURIComponent(g.channel.channelId)}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(g.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[g.arn?(t(),s("span",Id)):V("",!0),Y(" "+m(g.name)+" ",1),e("div",null," Start: "+m(o(N).moment.utc(g.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+m(o(N).moment.utc(g.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[Y(m(o(N).moment(g.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",Md,m(o(N).moment(g.dateScheduledStart).fromNow()),1)])]),l[16]||(l[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[ke,u.item.programs.length>0]])])])])],2)])])])):V("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Cd=["id"],Vd={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Od={class:"modal-content"},Ad={class:"modal-header py-2"},Pd={class:"modal-title"},Ld={class:"modal-body p-0"},Ud={class:"row row-cols-1 row-cols-sm-3 g-2 g-md-3"},Hd={class:"col"},Dd={class:"form-floating mb-2"},Ed=["value"],qd={class:"col"},Bd={class:"form-floating mb-2"},Nd=["value"],Rd={class:"col"},Fd={class:"input-group mb-2"},zd={class:"form-floating"},Gd={class:"row g-2 g-md-3"},jd={class:"col-md-4"},Yd={class:"card h-100"},Wd={key:0,class:"mt-2"},Kd={class:"col"},Qd={class:"form-floating mb-2"},Jd={class:"col ms-2 my-2"},Zd={class:"badge bg-info me-1"},Xd={class:"badge bg-primary me-1"},eu={class:"row row-cols-1 row-cols-sm-2"},tu={class:"col"},su={class:"form-floating mb-2"},ou={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},au={class:"col"},lu={class:"form-floating mb-2"},nu={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},ru={class:"col"},iu={class:"form-floating mb-2"},du={class:"form-control-plaintext",id:"description",placeholder:"Description"},uu={class:"table-responsive card shadow-sm"},cu={class:"table table-sm table-hover mb-0 overflow-auto"},mu=["textContent"],fu={class:"d-flex flex-row justify-content-start"},pu=["src"],vu={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},gu={class:"ms-2"},bu=["onClick"],yu={key:0,class:"fas fa-fw fa-check-circle text-primary"},$u={class:"badge text-bg-info"},hu={class:"modal-footer py-2"},wu=["disabled"],_u="/api/v1/videos/search",mt={__name:"_selectVideo",props:{sourceLocationId:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const w=we().user,{appTitle:H,pageTitle:O,busy:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,security:S,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:y,getRowNumber:K,setSelected:f,isSelected:q}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Video",cacheKey:`${w==null?void 0:w.userId}/videos/select`,baseUrl:_u,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(A,h)=>{const D=A.value,X=new URLSearchParams(window.location.search),C=JSON.parse(localStorage.getItem(h))||{};D.query.genreId=X.get("genre")||C.genreId||D.query.genreId||0,D.query.categoryId=X.get("category")||C.categoryId||D.query.categoryId||0},getQuery:A=>["?c=",encodeURIComponent(A.query.criteria),"&p=",A.pageIndex,"&s=",A.pageSize,"&sf=",A.sortField,"&so=",A.sortOrder,"&genre=",A.query.genreId,"&category=",A.query.categoryId,"&sourceLocationId=",A.query.sourceLocationId].join(""),saveQuery:(A,h)=>{localStorage.setItem(h,JSON.stringify({criteria:A.query.criteria,pageIndex:A.pageIndex,pageSize:A.pageSize,sortField:A.sortField,sortOrder:A.sortOrder,visible:A.visible,genreId:A.query.genreId,category:A.query.categoryId}))},successAction:A=>{A.items.length===1&&g(A.items[0])}}),p=_,d=n,b=ve("modalSelectVideo"),r=ye({video:null,hls:null});fe(async()=>{W(),await c(),await l(),await y(1)}),Ue(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const c=async()=>{await U(),await T()},l=async()=>{$.value.query.sourceLocationId=d.sourceLocationId,G.value="";var A=document.getElementById(b.value),h=_e.getOrCreateInstance(A);h.show()},a=async A=>{var h=document.getElementById(b.value),D=_e.getOrCreateInstance(h);D.hide(),r.hls&&(r.hls.stopLoad(),r.hls.destroy()),p(A?"confirm":"cancel",A?r.video:null)},U=async A=>{try{const D=await N.get("/api/v1/lookups/video-categories/").then(X=>X.data);$.value.lookups.categories=D}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},T=async A=>{try{const D=await N.get("/api/v1/lookups/video-genres/").then(X=>X.data);$.value.lookups.genres=D}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},g=A=>{r.video=A,E()},E=()=>{if(Hls.isSupported()){r.hls&&(r.hls.stopLoad(),r.hls.destroy());var A=document.getElementById("video-select-preview");const D=r.video.formats.find(C=>C.formatName==="HLS"),X=D.serverUrl+D.path;r.hls=L.createHlsStream(A,X)}};return v({open:l,close:a}),(A,h)=>{const D=oe("m-pagination"),X=oe("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:b.value,tabindex:"-1","aria-hidden":"true"},[e("div",Vd,[e("div",Od,[e("div",Ad,[e("h5",Pd,[h[9]||(h[9]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Y(m(o(O)),1)]),e("button",{type:"button",class:"btn-close",onClick:h[0]||(h[0]=C=>a(!1)),"aria-label":"Close"})]),e("div",Ld,[z(X,{errorMessage:o(G)},{default:F(()=>[e("div",Ud,[e("div",Hd,[e("div",Dd,[R(e("select",{"onUpdate:modelValue":h[1]||(h[1]=C=>o($).query.categoryId=C),class:"form-select",id:"category"},[(t(!0),s(P,null,B(o($).lookups.categories,C=>(t(),s("option",{value:C.id},m(C.name),9,Ed))),256))],512),[[ge,o($).query.categoryId]]),h[10]||(h[10]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",qd,[e("div",Bd,[R(e("select",{"onUpdate:modelValue":h[2]||(h[2]=C=>o($).query.genreId=C),class:"form-select",id:"genre"},[(t(!0),s(P,null,B(o($).lookups.genres,C=>(t(),s("option",{value:C.id},m(C.name),9,Nd))),256))],512),[[ge,o($).query.genreId]]),h[11]||(h[11]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Rd,[e("div",Fd,[e("div",zd,[R(e("input",{"onUpdate:modelValue":h[3]||(h[3]=C=>o($).query.criteria=C),onKeyup:h[4]||(h[4]=He(C=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[te,o($).query.criteria]]),h[12]||(h[12]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:h[5]||(h[5]=C=>o(y)(1))},h[13]||(h[13]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Gd,[R(e("div",jd,[e("div",Yd,[h[18]||(h[18]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,-1)),r.video?(t(),s("div",Wd,[e("div",Kd,[e("div",Qd,[R(e("input",{"onUpdate:modelValue":h[6]||(h[6]=C=>r.video.title=C),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[te,r.video.title]]),h[14]||(h[14]=e("label",{for:"title"},"Title",-1))])]),e("div",Jd,[e("div",null,[(t(!0),s(P,null,B(r.video.genres,C=>(t(),s("span",Zd,m(C.genreName),1))),256)),(t(!0),s(P,null,B(r.video.categories,C=>(t(),s("span",Xd,m(C.categoryName),1))),256))])]),e("div",eu,[e("div",tu,[e("div",su,[e("div",ou,m(o(L).moment(r.video.dateReleased).calendar()),1),h[15]||(h[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",au,[e("div",lu,[e("div",nu,m(o(L).moment.utc(r.video.durationInMillis).format("HH:mm:ss")),1),h[16]||(h[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",ru,[e("div",iu,[e("div",du,m(r.video.description),1),h[17]||(h[17]=e("label",{for:"description"},"Description",-1))])])])):V("",!0)])],512),[[ke,r.video]]),e("div",{class:ee([[r.video?"col-md-8":"col-md-12"],""])},[e("div",uu,[e("table",cu,[h[19]||(h[19]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o($).items,(C,ne)=>(t(),s("tr",{key:C.videoId},[e("td",{textContent:m(o(K)(ne)),class:"text-center"},null,8,mu),e("td",null,[e("div",fu,[e("div",null,[C.thumbnails.length>0?(t(!0),s(P,{key:0},B(C.thumbnails,(Z,se)=>(t(),s("div",{class:ee([se>0?"mt-1":""])},[e("img",{src:Z.url,class:"img-fuild border",width:"128"},null,8,pu)],2))),256)):(t(),s("img",vu))]),e("div",gu,[e("a",{onClick:Z=>g(C),class:"text-wrap link-offset-2",role:"button"},[r.video===C?(t(),s("span",yu)):V("",!0),Y(m(C.title),1)],8,bu),e("div",null,[e("span",$u,m(o(L).moment.utc(C.durationInMillis).format("HH:mm:ss")),1)])])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(D,{filter:o($),search:o(y),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",hu,[e("button",{onClick:h[7]||(h[7]=C=>a(!0)),class:"btn btn-primary btn-sm",type:"button",disabled:!r.video},h[20]||(h[20]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)]),8,wu),e("button",{onClick:h[8]||(h[8]=C=>a(!1)),class:"btn btn-secondary btn-sm ms-1"},h[21]||(h[21]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Cd)}}},ku=["disabled"],Su={class:"col"},Tu={class:"form-floating mb-2"},Iu={key:0,class:"d-block invalid-feedback"},Mu={class:"row row-cols-1 row-cols-sm-2"},xu={class:"col"},Cu={class:"form-floating mb-2"},Vu=["value"],Ou={key:0,class:"d-block invalid-feedback"},Au={class:"col"},Pu={class:"input-group mb-2"},Lu={class:"form-floating"},Uu={key:0},Hu={class:"d-flex flex-row justify-content-start align-items-center"},Du={key:0,class:"d-inline invalid-feedback"},Eu={class:"table-responsive border mt-1"},qu={class:"table table-sm mb-0 caption-top"},Bu={class:"align-middle"},Nu=["onUpdate:modelValue"],Ru=["value"],Fu=["onUpdate:modelValue"],zu=["value"],Gu=["onClick"],ju={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,route:j,axios:k,utils:G,toasts:ae,close:N,closeWithReturnUrl:L,security:i}=he({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source"}),S=n,$=ye({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),W=(l,a,U)=>l.length>0,J={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},videoId:{required:le.withMessage("Video is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("Source Locaton is required.",re),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:le.withMessage("PackageConfigurations is required.",W),$each:le.forEach({path:{required:le.withMessage("Path is required.",re)},sourceGroupId:{required:le.withMessage("Source Group is required.",re)}}),$autoDirty:!0,$lazy:!0}}},u=Ie(J,$);fe(async()=>{if(await y(),await K(),j.query.videoId)debugger});const y=async()=>{try{await k.get("/api/v1/sourcegroups/lookup/").then(a=>{$.lookups.sourceGroups=a.data})}catch(l){O.value=G.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},K=async()=>{try{if(await k.get("/api/v1/sourcelocations/lookup/").then(a=>{$.lookups.sourceLocations=a.data}),$.lookups.sourceLocations.length===1){const a=$.lookups.sourceLocations[0];$.selected.sourceLocation=a,await f()}}catch(l){O.value=G.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},f=async()=>{const l=$.selected.sourceLocation;$.item.sourceLocationId=l.id},q=async()=>{$.item.videoId=$.selected.video.videoId,await p($.item.videoId)},p=async l=>{try{const a=`/api/v1/videos/${l}/formats`;await k.get(a).then(U=>{$.selected.video.formats=U.data})}catch(a){O.value=G.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},d=async()=>{const l=$;if(M.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const U=G.clone(l.item),T=l.item.packageConfigurations.filter(g=>g.selectedFormat&&g.sourceGroupId);T.forEach(g=>{const E=g.selectedFormat;g.path=E.path,g.format=E.format,delete g.selectedFormat}),U.packageConfigurations=T,delete U.video,await k.post("/api/v1/vodSources/",U).then(g=>{debugger;ae.success("Add VOD Source","VOD source added",{onClose:async()=>{const E=`${S.urlView}/${g.data}`;await Q.push(E)}})})}catch(U){O.value=G.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{M.value=!1}},b=()=>{const l={sourceGroupId:null,selectedFormat:null},a=$.selected.video;if(a){const U=a.formats.find(T=>T.formatName==="HLS");l.path=`${U.serverUrl}${U.path}`}$.item.packageConfigurations.push(l)},r=l=>{$.item.packageConfigurations.splice(l,1)},c=async()=>{const l=Ae(mt,{sourceLocationId:$.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:a,isCanceled:U}=await l.reveal();l.closeAll(),!U&&a&&($.selected.video=a,await q())};return(l,a)=>{const U=oe("PageHeader"),T=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(U,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:a[0]||(a[0]=g=>d()),class:"btn btn-primary"},a[6]||(a[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ku),e("button",{onClick:a[1]||(a[1]=g=>o(L)(S.urlMain)),class:"btn btn-secondary ms-1"},a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(T,{errorMessage:o(O),vuelidate:o(u)},{default:F(()=>[e("div",null,[e("div",Su,[e("div",Tu,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=g=>$.item.name=g),id:"name",class:ee([o(G).getValidFeedbackCss($.item.name),"form-control"]),placeholder:"Name"},null,2),[[te,$.item.name]]),a[8]||(a[8]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",Iu,[(t(!0),s(P,null,B(o(u).item.name.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):V("",!0)])]),e("div",Mu,[e("div",xu,[e("div",Cu,[R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=g=>$.selected.sourceLocation=g),onChange:a[4]||(a[4]=g=>f()),class:ee([o(G).getValidFeedbackCss($.selected.sourceLocation),"form-select"]),id:"sourceLocationId"},[(t(!0),s(P,null,B($.lookups.sourceLocations,g=>(t(),s("option",{value:g},m(g.name),9,Vu))),256))],34),[[ge,$.selected.sourceLocation]]),a[9]||(a[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(u).item.sourceLocationId.$error?(t(),s("div",Ou,[(t(!0),s(P,null,B(o(u).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):V("",!0)])]),e("div",Au,[e("div",Pu,[e("div",Lu,[e("div",{id:"video",class:ee([o(G).getValidFeedbackCss($.selected.video),"form-control"]),placeholder:"Title"},[$.selected.video?(t(),s(P,{key:0},[Y(m(o(G).moment.utc($.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+m($.selected.video.title),1)],64)):V("",!0)],2),a[10]||(a[10]=e("label",{for:"video",class:""},"Video",-1))]),$.selected.sourceLocation?(t(),s("button",{key:0,onClick:a[5]||(a[5]=g=>c()),class:"btn btn-primary",type:"button"},a[11]||(a[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):V("",!0)])])]),$.item.videoId?(t(),s("div",Uu,[e("div",Hu,[e("fieldset",null,[e("legend",null,[a[13]||(a[13]=Y(" Package Configurations ")),o(u).item.packageConfigurations.$error?(t(),s("span",Du,a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):V("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:b,class:"btn btn-outline-primary btn-sm"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Eu,[e("table",qu,[a[16]||(a[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",Bu,[(t(!0),s(P,null,B($.item.packageConfigurations,(g,E)=>(t(),s("tr",null,[e("td",null,m(E+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":A=>g.selectedFormat=A,class:ee([o(G).getValidFeedbackCss(g.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(P,null,B($.selected.video.formats,A=>(t(),s("option",{value:A},m(A.path),9,Ru))),256))],10,Nu),[[ge,g.selectedFormat]]),o(u).item.packageConfigurations.$each.$response?(t(!0),s(P,{key:0},B(o(u).item.packageConfigurations.$each.$response.$errors[E].path,A=>(t(),s("div",{key:A,class:"d-block invalid-feedback"},m(A.$message),1))),128)):V("",!0)]),e("td",null,[g.selectedFormat?(t(),s(P,{key:0},[Y(m(g.selectedFormat.formatName),1)],64)):V("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":A=>g.sourceGroupId=A,class:ee([o(G).getValidFeedbackCss(g.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(P,null,B($.lookups.sourceGroups,A=>(t(),s("option",{value:A.id},m(A.name),9,zu))),256))],10,Fu),[[ge,g.sourceGroupId]]),o(u).item.packageConfigurations.$each.$response?(t(!0),s(P,{key:0},B(o(u).item.packageConfigurations.$each.$response.$errors[E].path,A=>(t(),s("div",{key:A,class:"d-block invalid-feedback"},m(A.$message),1))),128)):V("",!0)])]),e("td",null,[e("button",{onClick:A=>r(E),class:"btn btn-outline-warning btn-sm"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gu)])]))),256))])])])])):V("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Yu=["disabled"],Wu={key:0},Ku={class:"col"},Qu={class:"form-floating mb-2"},Ju={key:0,class:"d-block invalid-feedback"},Zu={class:"row row-cols-1 row-cols-sm-2"},Xu={class:"col"},ec={class:"form-floating mb-2"},tc=["value"],sc={key:0,class:"d-block invalid-feedback"},oc={class:"col"},ac={class:"col"},lc=["disabled"],nc={class:"form-floating"},rc={id:"video",class:"form-control",placeholder:"Title"},ic={key:0},dc={class:"d-flex flex-row justify-content-between mt-3"},uc={key:0,class:"d-inline invalid-feedback"},cc={class:"table-responsive border mt-1"},mc={class:"table table-sm mb-0"},fc={class:"align-middle"},pc=["onUpdate:modelValue"],vc=["value"],gc=["onUpdate:modelValue"],bc=["value"],yc={class:"text-end"},$c=["onClick"],hc={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Edit VOD Source"}),L=n,i=ye({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),S=(l,a,U)=>l.length>0,$={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},videoId:{required:le.withMessage("Video is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("Source Locaton is required.",re),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:le.withMessage("PackageConfigurations is required.",S),$each:le.forEach({path:{required:le.withMessage("Path is required.",re)},sourceGroupId:{required:le.withMessage("Source Group is required.",re)}})}}},W=Ie($,i);fe(async()=>{await J(),await K(),await f()});const J=async()=>{await u(),await y()},u=async()=>{const l=i;if(!M.value)try{M.value=!0,O.value="",i.item=null;const a=`/api/v1/vodsources/${L.id}/`;await j.get(a).then(U=>{l.item=U.data;const T=l.item,g=k.moment.utc(l.item.video.durationInMillis).format("HH:mm:ss");T.video.duration=g})}catch(a){O.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{M.value=!1}},y=async()=>{const l=i;if(!M.value)try{M.value=!0,O.value="";const a=`/api/v1/videos/${l.item.videoId}/`;await j.get(a).then(U=>{l.selected.video=U.data})}catch(a){O.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{M.value=!1}},K=async()=>{try{await j.get("/api/v1/sourcegroups/lookup/").then(a=>{i.lookups.sourceGroups=a.data})}catch(l){O.value=k.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},f=async()=>{try{if(await j.get("/api/v1/sourcelocations/lookup/").then(a=>{i.lookups.sourceLocations=a.data}),i.lookups.sourceLocations.length>0){const a=i.lookups.sourceLocations.find(U=>U.id===i.item.sourceLocationId);i.selected.sourceLocation=a}}catch(l){O.value=k.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},q=async()=>{i.item.videoId=i.selected.video.videoId,i.item.packageConfigurations=[],await p(i.item.videoId)},p=async l=>{try{const a=`/api/v1/videos/${l}/formats`;await j.get(a).then(U=>{i.selected.video.formats=U.data;debugger})}catch(a){O.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},d=async()=>{const l=i;if(M.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const U=k.clone(l.item);delete U.video,delete U.programs,delete U.sourceLocation,await j.put("/api/v1/vodsources/",U).then(T=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const g=`${L.urlView}/${L.id}`;await Q.push(g)}})})}catch(U){O.value=k.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{M.value=!1}},b=()=>{debugger;const l={path:"",sourceGroupId:null,type:"HLS"},a=i.selected.video;if(a){const U=a.formats.find(T=>T.formatName==="HLS");l.path=`${U.path}`}i.item.packageConfigurations.push(l)},r=l=>{i.item.packageConfigurations.splice(l,1)},c=async()=>{const l=Ae(mt,{sourceLocationId:i.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:a,isCanceled:U}=await l.reveal();l.close(),!U&&a&&(i.selected.video=a,await q())};return(l,a)=>{const U=oe("router-link"),T=oe("PageHeader"),g=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(T,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:a[0]||(a[0]=E=>d()),class:"btn btn-primary"},a[5]||(a[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yu),e("button",{onClick:a[1]||(a[1]=E=>J()),class:"btn btn-secondary ms-2"},a[6]||(a[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(U,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:F(()=>a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(g,{errorMessage:o(O),vuelidate:o(W)},{default:F(()=>[i.item?(t(),s("div",Wu,[e("div",Ku,[e("div",Qu,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=E=>i.item.name=E),id:"name",class:"form-control",placeholder:"Name"},null,512),[[te,i.item.name]]),a[8]||(a[8]=e("label",{for:"name",class:""},"Name",-1)),o(W).item.name.$error?(t(),s("div",Ju,[(t(!0),s(P,null,B(o(W).item.name.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):V("",!0)])]),e("div",Zu,[e("div",Xu,[e("div",ec,[R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=E=>i.selected.sourceLocation=E),class:"form-select",id:"sourceLocationId"},[(t(!0),s(P,null,B(i.lookups.sourceLocations,E=>(t(),s("option",{value:E},m(E.name),9,tc))),256))],512),[[ge,i.selected.sourceLocation]]),a[9]||(a[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",sc,[(t(!0),s(P,null,B(o(W).item.sourceLocationId.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):V("",!0)])]),e("div",oc,[e("div",ac,[e("div",{class:"input-group mb-2",disabled:i.item.packageConfigurations.length>0},[e("div",nc,[e("div",rc,[i.selected.video?(t(),s(P,{key:0},[Y(m(i.selected.video.title),1)],64)):V("",!0)]),a[10]||(a[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:a[4]||(a[4]=E=>c()),class:"btn btn-primary",type:"button"},a[11]||(a[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))],8,lc)])])]),i.item.videoId?(t(),s("div",ic,[e("div",dc,[e("div",null,[e("h5",null,[a[13]||(a[13]=Y(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",uc,a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):V("",!0)])]),e("button",{onClick:b,class:"btn btn-outline-primary btn-sm"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",cc,[e("table",mc,[a[16]||(a[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",fc,[(t(!0),s(P,null,B(i.item.packageConfigurations,(E,A)=>(t(),s("tr",null,[e("td",null,m(A+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":h=>E.selectedFormat=h,class:ee([o(k).getValidFeedbackCss(E.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(P,null,B(i.selected.video.formats,h=>(t(),s("option",{value:h},m(h.path),9,vc))),256))],10,pc),[[ge,E.selectedFormat]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(P,{key:0},B(o(W).item.packageConfigurations.$each.$response.$errors[A].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},m(h.$message),1))),128)):V("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":h=>E.sourceGroupId=h,class:"form-select",id:"sourceGroupId"},[(t(!0),s(P,null,B(i.lookups.sourceGroups,h=>(t(),s("option",{value:h.id},m(h.name),9,bc))),256))],8,gc),[[ge,E.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(P,{key:0},B(o(W).item.packageConfigurations.$each.$response.$errors[A].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},m(h.$message),1))),128)):V("",!0)])]),e("td",null,[E.selectedFormat?(t(),s(P,{key:0},[Y(m(E.selectedFormat.formatName),1)],64)):V("",!0)]),e("td",yc,[e("button",{onClick:h=>r(A),class:"btn btn-outline-warning btn-sm"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,$c)])]))),256))])])])])):V("",!0)])):V("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},wc={class:"ms-2"},_c={class:"input-group"},kc=["value"],Sc={class:"ms-1"},Tc={class:"input-group"},Ic=["value"],Mc={class:"ms-1"},xc={class:"input-group"},Cc={class:"ms-1"},Vc={class:"input-group"},Oc={class:"table-responsive border shadow-sm"},Ac={class:"table table-hover mb-0"},Pc={class:"text-center"},Lc=["textContent"],Uc={class:"d-flex flex-column flex-md-row justify-content-start"},Hc={class:""},Dc=["src"],Ec={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},qc={class:"ms-md-2"},Bc={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Nc={class:"badge bg-primary me-1"},Rc={key:0},Fc={class:"badge bg-info me-1"},zc={class:"d-flex flex-row justify-content-start"},Gc={class:"ms-2"},jc={class:"small"},Yc={class:"badge bg-secondary me-1"},Wc={class:"text-center"},Kc=["onUpdate:modelValue"],Qc="/api/v1/vodsources/search",Jc={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,closeWithReturnUrl:i,generateReturnUrl:S,security:$,filter:W,initializeFilter:J,getQuery:u,saveQuery:y,search:K,getRowNumber:f,setSelected:q,isSelected:p}=De({appTitle:"Arcadian-FAST",pageTitle:"VOD Sources",cacheKey:`${_==null?void 0:_.userId}/vod-sources/search`,baseUrl:Qc,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(U,T)=>{const g=U.value,E=new URLSearchParams(window.location.search),A=JSON.parse(localStorage.getItem(T))||{};g.query.category=E.get("category")||A.category||g.query.category||0,g.query.genre=E.get("genre")||A.genre||g.query.genre||0,g.query.sourceLocationId=E.get("slid")||A.sourceLocationId||g.query.sourceLocationId||""},getQuery:U=>["?c=",encodeURIComponent(U.query.criteria),"&p=",U.pageIndex,"&s=",U.pageSize,"&sf=",U.sortField,"&so=",U.sortOrder,"&category=",U.query.category,"&genre=",U.query.genre,"&slid=",U.query.sourceLocationId].join(""),saveQuery:(U,T)=>{localStorage.setItem(T,JSON.stringify({criteria:U.query.criteria,pageIndex:U.pageIndex,pageSize:U.pageSize,sortField:U.sortField,sortOrder:U.sortOrder,visible:U.visible,category:U.query.category,genre:U.query.genre,sourceLocationId:U.query.sourceLocationId}))}}),d=xe(()=>{const U=W.value;return U&&U.items?U.items.filter(E=>E.selected):[]});fe(async()=>{J(),await l(),await a(),await K()});const b=async()=>{if(!(d.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!H.value){j.value=null;try{H.value=!0;const g={vodSourceIds:d.value.map(E=>E.vodSourceId)};await G.post("/api/v1/vodsources/publish/",g).then(E=>{N.success("Publish VODs","VODs was published.",{async onClose(){}})}),H.value=!1,await K()}catch(T){j.value=ae.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{H.value=!1}}},r=async()=>{if(!(d.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!H.value){j.value=null;try{H.value=!0;const g={vodSourceIds:d.value.map(E=>E.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",g).then(E=>{N.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),H.value=!1,await K()}catch(T){j.value=ae.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{H.value=!1}}},c=()=>{const U=W.value.items;if(U.length<1)return;const T=!U[0].selected;W.value.items.forEach(g=>{g.selected=T})},l=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then(T=>{W.value.lookups.sourceLocations=T.data})}catch(U){j.value=ae.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},a=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(U=>{const T=U.data;W.value.lookups.genres=T})}catch(U){j.value=ae.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}};return ve(!1),(U,T)=>{const g=oe("router-link"),E=oe("PageHeader"),A=oe("m-pagination"),h=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(E,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(w)},{default:F(()=>[z(g,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>T[6]||(T[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",wc,[e("div",_c,[T[8]||(T[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),R(e("select",{"onUpdate:modelValue":T[0]||(T[0]=D=>o(W).query.sourceLocationId=D),class:"form-select"},[T[7]||(T[7]=e("option",{value:""},"All",-1)),(t(!0),s(P,null,B(o(W).lookups.sourceLocations,D=>(t(),s("option",{value:D.id},m(D.name),9,kc))),256))],512),[[ge,o(W).query.sourceLocationId]])])]),e("div",Sc,[e("div",Tc,[T[9]||(T[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":T[1]||(T[1]=D=>o(W).query.genre=D),class:"form-select"},[(t(!0),s(P,null,B(o(W).lookups.genres,D=>(t(),s("option",{value:D.id},m(D.name),9,Ic))),256))],512),[[ge,o(W).query.genre]])])]),e("div",Mc,[e("div",xc,[T[11]||(T[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":T[2]||(T[2]=D=>o(W).query.category=D),class:"form-select"},T[10]||(T[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(W).query.category]])])]),e("div",Cc,[e("div",Vc,[R(e("input",{"onUpdate:modelValue":T[3]||(T[3]=D=>o(W).query.criteria=D),onKeyup:T[4]||(T[4]=He(D=>o(K)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[te,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:T[5]||(T[5]=D=>o(K)(1))},T[12]||(T[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(h,{errorMessage:o(j)},{default:F(()=>[e("div",Oc,[e("table",Ac,[e("thead",null,[e("tr",null,[T[16]||(T[16]=e("td",{class:"text-center"},"#",-1)),T[17]||(T[17]=e("th",null,"Name",-1)),T[18]||(T[18]=e("th",null,"Video Title",-1)),e("th",Pc,[d.value.length?(t(),s(P,{key:0},[e("button",{onClick:b,class:"btn btn-sm btn-primary"},T[13]||(T[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:r,class:"btn btn-sm btn-warning ms-1"},T[14]||(T[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):V("",!0),e("button",{onClick:c,class:"btn btn-sm btn-outline-primary ms-2"},T[15]||(T[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o(W).items,(D,X)=>(t(),s("tr",{key:D.vodSourceId},[e("td",{textContent:m(o(f)(X)),class:"text-center"},null,8,Lc),e("td",null,[e("div",Uc,[e("div",null,[D.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(D.video.thumbnails,C=>(t(),s("div",Hc,[e("img",{src:C.url,class:"img-fuild border",width:"128"},null,8,Dc)]))),256)):(t(),s("img",Ec))]),e("div",qc,[z(g,{to:`${n.urlView}/${D.vodSourceId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[D.arn?(t(),s("span",Bc)):V("",!0),Y(m(D.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(P,null,B(D.video.categories,C=>(t(),s("div",null,[e("span",Nc,m(C.categoryName),1)]))),256)),D.video.genres.length>0?(t(),s("div",Rc,[(t(!0),s(P,null,B(D.video.genres,C=>(t(),s("span",Fc,m(C.genreName),1))),256))])):V("",!0)])])])]),e("td",null,[e("div",zc,[e("div",Gc,[z(g,{to:`${n.urlViewVideo}/${encodeURIComponent(D.video.videoId)}/${o(S)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(D.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",jc,m(o(ae).moment.utc(D.video.durationInMillis).format("HH:mm:ss")),1)]),D.video.formats.length>0?(t(!0),s(P,{key:0},B(D.video.formats,C=>(t(),s("span",Yc,m(C.formatName),1))),256)):V("",!0)])])]),e("td",Wc,[R(e("input",{"onUpdate:modelValue":C=>D.selected=C,type:"checkbox",class:"form-check-input"},null,8,Kc),[[qe,D.selected]])])]))),128))]),_:1},512),[[ke,o(W).items.length>0]])])]),z(A,{filter:o(W),search:o(K),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Zc=["id"],Xc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},em={class:"modal-content"},tm={class:"modal-header"},sm={class:"modal-title"},om={class:"modal-body"},am={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},lm=["innerHTML"],nm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},rm={class:"container"},im={class:"col"},dm={class:"form-floating mb-2"},um=["value"],cm={key:0,class:"d-block invalid-feedback"},mm={class:"col"},fm={class:"form-floating mb-2"},pm={key:0,class:"d-block invalid-feedback"},vm={class:"col"},gm={class:"form-floating mb-2"},bm=["value"],ym={key:0,class:"d-block invalid-feedback"},$m={class:"modal-footer"},hm=["disabled"],wm={__name:"_addPackageConfiguration",emits:["refresh"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source Package Configuration"}),W=_;ve();const J=ve("modalAddChannelOutput"),u=ye({lookups:{sourceGroups:[],formats:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),y={item:{sourceGroupId:{required:le.withMessage("Source Group is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("VOD Source is required.",re),$autoDirty:!0,$lazy:!0},path:{required:le.withMessage("Path is required.",re),$autoDirty:!0,$lazy:!0},type:{required:le.withMessage("Type is required.",re),$autoDirty:!0,$lazy:!0}}},K=Ie(y,u);fe(async()=>{K.value.$reset()});const f=async()=>{await q()},q=async()=>{try{await N.get("/api/v1/sourceGroups/lookup/").then(l=>{u.lookups.sourceGroups=l.data,u.lookups.sourceGroups.length===1&&(u.item.sourceGroupId=u.lookups.sourceGroups[0].id)})}catch(c){G.value=L.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},p=async c=>{try{const l=`/api/v1/videos/${c}/formats/`;await N.get(l).then(a=>{u.lookups.formats=a.data})}catch(l){G.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},d=async(c,l)=>{const a=u;Q.value.clear(),G.value="",a.lookups={sourceGroups:[],formats:[]},a.item={sourceGroupId:null,vodSourceId:c,path:null,type:null},await f(),await p(l),K.value.$reset();var U=document.getElementById(J.value),T=_e.getOrCreateInstance(U);T.show()},b=async()=>{var c=document.getElementById(J.value),l=_e.getOrCreateInstance(c);l.hide(),W("refresh")},r=async()=>{const c=u;if(H.value)return;const l=await K.value.$validate();debugger;if(!l){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const a=c.item;await N.post("/api/v1/vodSources/package-configurations/",a).then(U=>{i.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await b()}catch(a){G.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{H.value=!1}};return v({open:d,close:b}),(c,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Xc,[e("div",em,[e("div",tm,[e("h5",sm,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=a=>b()),"aria-label":"Close"})]),e("div",om,[o(G)?(t(),s("div",am,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,lm)])):V("",!0),o(Q).size>0?(t(),s("div",nm,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),a=>(t(),s("li",null,m(a),1))),256))])])):V("",!0),e("div",rm,[e("div",im,[e("div",dm,[R(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>u.item.sourceGroupId=a),class:ee([o(L).getValidFeedbackCss(u.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(P,null,B(u.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},m(a.name),9,um))),256))],2),[[ge,u.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(K).item.sourceGroupId.$error?(t(),s("div",cm,[(t(!0),s(P,null,B(o(K).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",mm,[e("div",fm,[R(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>u.item.type=a),class:ee([o(L).getValidFeedbackCss(u.item.type),"form-select"]),id:"type"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,u.item.type]]),l[10]||(l[10]=e("label",{for:"type",class:""},"Type",-1)),o(K).item.type.$error?(t(),s("div",pm,[(t(!0),s(P,null,B(o(K).item.type.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",vm,[e("div",gm,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=a=>u.item.path=a),class:ee([o(L).getValidFeedbackCss(u.item.path),"form-control"]),id:"path"},[(t(!0),s(P,null,B(u.lookups.formats,a=>(t(),s("option",{value:a.path},m(a.path),9,bm))),256))],2),[[ge,u.item.path]]),l[11]||(l[11]=e("label",{for:"path",class:""},"Path",-1)),o(K).item.path.$error?(t(),s("div",ym,[(t(!0),s(P,null,B(o(K).item.path.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])])])]),e("div",$m,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:l[4]||(l[4]=a=>r()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hm),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Zc))}},_m=["id"],km={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Sm={class:"modal-content"},Tm={class:"modal-header"},Im={class:"modal-title"},Mm={class:"modal-body"},xm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cm=["innerHTML"],Vm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Om={class:"container"},Am={class:"col"},Pm={class:"form-floating mb-2"},Lm={class:"col"},Um={class:"form-floating mb-2"},Hm={key:0,class:"d-block invalid-feedback"},Dm={class:"col"},Em={class:"form-floating mb-2"},qm={key:0,class:"d-block invalid-feedback"},Bm={class:"col"},Nm={class:"form-floating mb-2"},Rm={key:0,class:"d-block invalid-feedback"},Fm={class:"modal-footer"},zm=["disabled"],Gm={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=_,J=ve(),u=ve("modalAddPlaybackConfiguration"),y=ye({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),K={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:le.withMessage("adDecisionServerUrl is required.",re),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:le.withMessage("videoContentSourceUrl is required.",re),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{f.value.$reset()});const q=async(b,r)=>{J.value=b;const c=y;Q.value.clear(),G.value="";const l=r,a=l.lastIndexOf("/"),U=l.substring(0,a),T="ad_campaign_"+l.substring(a+1).replace(".","_");c.item={name:T,originalVideoContentSourceUrl:r,videoContentSourceUrl:U,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},f.value.$reset();var g=document.getElementById(u.value),E=_e.getOrCreateInstance(g);E.show()},p=async()=>{var b=document.getElementById(u.value),r=_e.getOrCreateInstance(b);r.hide(),W("refresh")},d=async()=>{const b=y;if(H.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const c=b.item;c.vodSourceId=J.value,await N.post("/api/v1/playbackconfigurations/vodsource",c).then(l=>{i.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await p()}catch(c){G.value=L.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{H.value=!1}};return v({open:q,close:p}),(b,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",km,[e("div",Sm,[e("div",Tm,[e("h5",Im,[r[6]||(r[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:r[0]||(r[0]=c=>p()),"aria-label":"Close"})]),e("div",Mm,[o(G)?(t(),s("div",xm,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Cm)])):V("",!0),o(Q).size>0?(t(),s("div",Vm,[r[8]||(r[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),c=>(t(),s("li",null,m(c),1))),256))])])):V("",!0),e("div",Om,[e("div",Am,[e("div",Pm,[R(e("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>y.item.originalVideoContentSourceUrl=c),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[te,y.item.originalVideoContentSourceUrl]]),r[9]||(r[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",Lm,[e("div",Um,[R(e("input",{"onUpdate:modelValue":r[2]||(r[2]=c=>y.item.name=c),id:"name",class:"form-control",placeholder:"Name"},null,512),[[te,y.item.name]]),r[10]||(r[10]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",Hm,[(t(!0),s(P,null,B(o(f).item.name.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0)])]),e("div",Dm,[e("div",Em,[R(e("input",{"onUpdate:modelValue":r[3]||(r[3]=c=>y.item.videoContentSourceUrl=c),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[te,y.item.videoContentSourceUrl]]),r[11]||(r[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),r[12]||(r[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(f).item.videoContentSourceUrl.$error?(t(),s("div",qm,[(t(!0),s(P,null,B(o(f).item.videoContentSourceUrl.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0)])]),e("div",Bm,[e("div",Nm,[R(e("textarea",{"onUpdate:modelValue":r[4]||(r[4]=c=>y.item.adDecisionServerUrl=c),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[te,y.item.adDecisionServerUrl]]),r[13]||(r[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(f).item.adDecisionServerUrl.$error?(t(),s("div",Rm,[(t(!0),s(P,null,B(o(f).item.adDecisionServerUrl.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0)])])])]),e("div",Fm,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:r[5]||(r[5]=c=>d()),class:"btn btn-primary",type:"button"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,zm),r[15]||(r[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,_m))}},jm={key:0},Ym={class:"nav nav-tabs",id:"myTab",role:"tablist"},Wm={class:"nav-item",role:"presentation"},Km={class:"nav-item",role:"presentation"},Qm={class:"nav-item",role:"presentation"},Jm={class:"nav-item",role:"presentation"},Zm={class:"nav-item",role:"presentation"},Xm={class:"tab-content",id:"myTabContent"},ef={class:""},tf={class:"row row-cols-1 row-cols-sm-2"},sf={class:"col"},of=["id"],af={class:"col"},lf={class:"col"},nf={class:"form-floating mb-2"},rf={class:"mt-2"},df={class:"row row-cols-sm-2"},uf={class:"col"},cf={class:"form-floating mb-2"},mf={class:"form-control-plaintext card"},ff={class:"col"},pf={class:"form-floating mb-2"},vf={class:"mt-2"},gf={class:"badge bg-info me-1"},bf={class:"badge bg-primary me-1"},yf={class:"badge bg-info me-1"},$f={class:"table-responsive border mt-2"},hf={class:"table table-hover mb-0"},wf={class:"table-group-divider"},_f={class:"align-middle"},kf={class:"text-center"},Sf={class:"text-truncate text-wrap"},Tf={class:"text-truncate text-wrap"},If={class:""},Mf={class:"mt-2 text-end"},xf={class:"table-responsive border mt-2"},Cf={class:"table table-hover mb-0 caption-top"},Vf={class:"text-end"},Of=["onClick"],Af={class:""},Pf={class:"mt-1"},Lf=["id"],Uf={class:"text-end"},Hf={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View VOD Source"});Ce("$config");const J=we();J.user;const u=ye({user:J.user,item:null,hls:null}),y=ve();ve(null);const K=ve();fe(async()=>{await d();const T=N.getPageTab("vodSource")||"information-tab";f(T)}),Ue(()=>{u.hls&&(u.hls.stopLoad(),u.hls.destroy())});const f=T=>{N.setPageTab("vodSource",T),y.value=T},q=T=>T!==y.value?"":"active",p=T=>T!==y.value?"":"show active",d=async()=>{const T=u;if(!w.value)try{w.value=!0,k.value="",u.item=null;const g=`/api/v1/vodsources/${v.id}/`;await ae.get(g).then(E=>{T.item=E.data;const A=T.item,h=N.moment.utc(T.item.video.durationInMillis).format("HH:mm:ss");A.video.duration=h}),U()}catch(g){k.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{w.value=!1}},b=async()=>{await d()},r=()=>{K.value.open(u.item.vodSourceId,u.item.videoId)},c=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!w.value){k.value=null;try{w.value=!0;const g={vodSourceIds:[v.id]};await ae.post("/api/v1/vodsources/publish/",g).then(E=>{L.success("Publish VOD","VOD was published.",{async onClose(){}})}),w.value=!1,await b()}catch(g){k.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{w.value=!1}}},l=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!w.value){k.value=null;try{w.value=!0;const g={vodSourceIds:[v.id]};await ae.post("/api/v1/vodsources/unpublish/",g).then(E=>{L.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),w.value=!1,await b()}catch(g){k.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{w.value=!1}}},a=async T=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!w.value){k.value=null;try{w.value=!0,await ae.delete(`/api/v1/vodSources/package-configurations/${T}/`).then(E=>{L.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),w.value=!1,await b()}catch(E){k.value=N.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{w.value=!1}}},U=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());const T=`video-${u.item.vodSourceId}`,g=document.getElementById(T),E=u.item.video.formats.find(h=>h.formatName==="HLS"),A=`${E.serverUrl}${E.path}`;u.hls=N.createHlsStream(g,A)}};return(T,g)=>{const E=oe("router-link"),A=oe("PageHeader"),h=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(A,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(M)},{default:F(()=>[u.item?(t(),s(P,{key:0},[u.item.arn?(t(),s("button",{key:0,onClick:g[0]||(g[0]=D=>l()),class:"ms-1 btn btn-warning"},g[14]||(g[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=D=>c()),class:"ms-1 btn btn-primary"},g[15]||(g[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):V("",!0),z(E,{to:`${n.urlEdit}/${n.id}`,class:"ms-2 btn btn-primary"},{default:F(()=>g[16]||(g[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:g[2]||(g[2]=D=>b()),class:"ms-2 btn btn-secondary"},g[17]||(g[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:g[3]||(g[3]=D=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},g[18]||(g[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(h,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",jm,[e("div",null,[e("ul",Ym,[e("li",Wm,[e("button",{onClick:g[4]||(g[4]=D=>f("information-tab")),class:ee([q("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Km,[e("button",{onClick:g[5]||(g[5]=D=>f("packageConfigurations-tab")),class:ee([q("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Qm,[e("button",{onClick:g[6]||(g[6]=D=>f("channels-tab")),class:ee([q("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},g[19]||(g[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Y("Channels ")]),2)]),e("li",Jm,[e("button",{onClick:g[7]||(g[7]=D=>f("programs-tab")),class:ee([q("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},g[20]||(g[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Y("Programs ")]),2)]),e("li",Zm,[e("button",{onClick:g[8]||(g[8]=D=>f("programTemplates-tab")),class:ee([q("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},g[21]||(g[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Y("Program Templates ")]),2)])]),e("div",Xm,[e("div",{class:ee([p("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ef,[e("div",tf,[e("div",sf,[e("video",{id:`video-${u.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,of)]),e("div",af,[e("div",lf,[e("div",nf,[R(e("input",{"onUpdate:modelValue":g[9]||(g[9]=D=>u.item.name=D),type:"text",class:"form-control-plaintext card",id:"name"},null,512),[[te,u.item.name]]),g[22]||(g[22]=e("label",{for:"name"},"Name",-1))])]),e("div",rf,[g[26]||(g[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",df,[e("div",uf,[e("div",cf,[e("div",mf,[z(E,{to:`${n.urlViewVideo}/${u.item.video.videoId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(u.item.video.title),1)]),_:1},8,["to"])]),g[23]||(g[23]=e("label",{for:"title"},"Title",-1))])]),e("div",ff,[e("div",pf,[R(e("input",{"onUpdate:modelValue":g[10]||(g[10]=D=>u.item.video.duration=D),type:"text",class:"form-control-plaintext card",id:"duration"},null,512),[[te,u.item.video.duration]]),g[24]||(g[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",vf,[(t(!0),s(P,null,B(u.item.video.genres,D=>(t(),s("span",gf,m(D.genreName),1))),256)),(t(!0),s(P,null,B(u.item.video.categories,D=>(t(),s("span",bf,m(D.categoryName),1))),256)),(t(!0),s(P,null,B(u.item.video.categories,D=>(t(),s("span",yf,m(D.categoryName),1))),256))]),e("div",$f,[e("table",hf,[g[25]||(g[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",wf,[(t(!0),s(P,null,B(u.item.video.formats,(D,X)=>(t(),s("tr",_f,[e("td",kf,m(X+1),1),e("td",null,m(D.formatName),1),e("td",null,[e("div",Sf,m(D.serverUrl),1)]),e("td",null,[e("div",Tf,m(D.path),1)])]))),256))])])])])])])])])],2),e("div",{class:ee([p("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",If,[e("div",Mf,[e("button",{onClick:g[11]||(g[11]=D=>r()),class:"btn btn-outline-primary btn-sm"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",xf,[e("table",Cf,[g[29]||(g[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.packageConfigurations,(D,X)=>(t(),s("tr",{key:D.packageConfigurationId,class:"align-middle"},[e("td",null,m(X+1),1),e("td",null,m(D.path),1),e("td",null,m(D.sourceGroup.name),1),e("td",null,m(D.type),1),e("td",Vf,[e("button",{onClick:C=>a(D.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Of)])]))),128))]),_:1},512),[[ke,u.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ee([p("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",Af,[e("div",Pf,[e("video",{id:`video-${u.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Lf),e("div",Uf,[e("button",{onClick:g[12]||(g[12]=D=>u.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},g[30]||(g[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:ee([p("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},g[31]||(g[31]=[e("div",{class:""}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:ee([p("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},g[32]||(g[32]=[e("div",{class:""}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:ee([p("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},g[33]||(g[33]=[e("div",{class:""}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):V("",!0)]),_:1},8,["errorMessage"]),z(wm,{ref_key:"modalAddPackageConfiguration",ref:K,onRefresh:b},null,512),z(Gm,{ref:"modalAddPlaybackConfiguration",onRefresh:g[13]||(g[13]=D=>b())},null,512)])]),_:1})}}},Df=["id"],Ef={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qf={class:"modal-content"},Bf={class:"modal-header py-2"},Nf={class:"modal-title"},Rf={class:"modal-body p-0"},Ff={class:"row row-cols-1 row-cols-sm-3 g-2 g-md-3"},zf={class:"col"},Gf={class:"form-floating mb-2"},jf=["disabled"],Yf=["value","disabled"],Wf={class:"col"},Kf={class:"form-floating mb-2"},Qf=["value"],Jf={class:"col"},Zf={class:"input-group mb-2"},Xf={class:"form-floating"},ep={class:"row g-2 g-md-3"},tp={class:"col-md-4"},sp={class:"card h-100"},op={key:0,class:"mt-2"},ap={class:"col"},lp={class:"form-floating mb-2"},np={class:"col ms-2 my-2"},rp={class:"badge bg-info me-1"},ip={class:"badge bg-primary me-1"},dp={class:"row row-cols-1 row-cols-sm-2"},up={class:"col"},cp={class:"form-floating mb-2"},mp={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},fp={class:"col d-block"},pp={class:"form-floating mb-2"},vp={class:"form-control-plaintext",id:"duration",placeholder:"Duration"},gp={class:"col"},bp={class:"form-floating mb-2"},yp={class:"table-responsive card shadow-sm"},$p={class:"table table-sm table-hover mb-0 overflow-auto"},hp=["textContent"],wp={class:"d-flex flex-row justify-content-start"},_p={class:"mt-1"},kp=["src"],Sp={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Tp={class:"ms-2"},Ip=["onClick"],Mp={key:0,class:"fas fa-fw fa-check-circle text-primary"},xp={class:"badge text-bg-info"},Cp={class:"modal-footer py-2"},Vp=["disabled"],Op="/api/v1/vodSources/search",Re={__name:"_selectVodSource",props:{sourceLocationId:{type:String,required:!0},genreId:{type:String},categoryId:{type:String},durationInMillis:{type:String},withArn:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const w=we().user,{appTitle:H,pageTitle:O,busy:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,security:S,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:y,getRowNumber:K,setSelected:f,isSelected:q}=De({appTitle:"Arcadian-FAST",pageTitle:"Select VOD Source",cacheKey:`${w==null?void 0:w.userId}/vodsources/select`,baseUrl:Op,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null,durationInMillis:0}},initializeFilter:(A,h)=>{A.value,new URLSearchParams(window.location.search),JSON.parse(localStorage.getItem(h)),A.value.query.sourceLocationId=d.sourceLocationId||null,A.value.query.genreId=d.genreId||0,A.value.query.categoryId=d.categoryId||0,A.value.query.durationInMillis=d.durationInMillis||0,A.value.query.withArn=d.withArn||!1},getQuery:A=>["?c=",encodeURIComponent(A.query.criteria),"&p=",A.pageIndex,"&s=",A.pageSize,"&sf=",A.sortField,"&so=",A.sortOrder,"&slid=",A.query.sourceLocationId,"&genre=",A.query.genreId,"&category=",A.query.categoryId,"&durationInMillis=",A.query.durationInMillis,"&withArn=true"].join(""),saveQuery:(A,h)=>{localStorage.setItem(h,JSON.stringify({criteria:A.query.criteria,pageIndex:A.pageIndex,pageSize:A.pageSize,sortField:A.sortField,sortOrder:A.sortOrder,visible:A.visible}))},successAction:A=>{A.items.length===1&&g(A.items[0])}}),p=_,d=n,b=ve("modalSelectVodSource"),r=ye({vodSource:null,hls:null});fe(async()=>{W(),await c(),await l()}),Ue(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const c=async()=>{await U(),await T()},l=async()=>{G.value="",await y();var A=document.getElementById(b.value),h=_e.getOrCreateInstance(A);h.show()},a=async A=>{var h=document.getElementById(b.value),D=_e.getOrCreateInstance(h);D.hide(),r.hls&&(r.hls.stopLoad(),r.hls.destroy()),p(A?"confirm":"cancel",A?r.vodSource:null)},U=async A=>{try{const D=await N.get("/api/v1/lookups/video-categories/").then(X=>X.data);$.value.lookups.categories=D}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},T=async A=>{try{const D=await N.get("/api/v1/lookups/video-genres/").then(X=>X.data);$.value.lookups.genres=D}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},g=A=>{r.vodSource=A,E()},E=()=>{if(Hls.isSupported()){r.hls&&(r.hls.stopLoad(),r.hls.destroy());var A=document.getElementById("video-select-preview");const D=r.vodSource.video.formats.find(C=>C.formatName==="HLS"),X=D.serverUrl+D.path;r.hls=L.createHlsStream(A,X)}};return v({open:l,close:a}),(A,h)=>{const D=oe("m-pagination"),X=oe("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:b.value,tabindex:"-1","aria-hidden":"true"},[e("div",Ef,[e("div",qf,[e("div",Bf,[e("h5",Nf,[h[10]||(h[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(O)),1)]),e("button",{type:"button",class:"btn-close",onClick:h[0]||(h[0]=C=>a(!1)),"aria-label":"Close"})]),e("div",Rf,[z(X,{errorMessage:o(G)},{default:F(()=>[e("div",Ff,[e("div",zf,[e("div",Gf,[R(e("select",{"onUpdate:modelValue":h[1]||(h[1]=C=>o($).query.categoryId=C),class:"form-select form-control-plaintext",id:"category",disabled:d.categoryId>0},[(t(!0),s(P,null,B(o($).lookups.categories,C=>(t(),s("option",{value:C.id,disabled:d.categoryId>0},m(C.name),9,Yf))),256))],8,jf),[[ge,o($).query.categoryId]]),h[11]||(h[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",Wf,[e("div",Kf,[R(e("select",{"onUpdate:modelValue":h[2]||(h[2]=C=>o($).query.genreId=C),class:"form-select",id:"genre"},[(t(!0),s(P,null,B(o($).lookups.genres,C=>(t(),s("option",{value:C.id},m(C.name),9,Qf))),256))],512),[[ge,o($).query.genreId]]),h[12]||(h[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Jf,[e("div",Zf,[e("div",Xf,[R(e("input",{"onUpdate:modelValue":h[3]||(h[3]=C=>o($).query.criteria=C),onKeyup:h[4]||(h[4]=He(C=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[te,o($).query.criteria]]),h[13]||(h[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:h[5]||(h[5]=C=>o(y)(1))},h[14]||(h[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",ep,[R(e("div",tp,[e("div",sp,[h[19]||(h[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),r.vodSource?(t(),s("div",op,[e("div",ap,[e("div",lp,[R(e("input",{"onUpdate:modelValue":h[6]||(h[6]=C=>r.vodSource.video.title=C),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[te,r.vodSource.video.title]]),h[15]||(h[15]=e("label",{for:"title"},"Title",-1))])]),e("div",np,[e("div",null,[(t(!0),s(P,null,B(r.vodSource.video.genres,C=>(t(),s("span",rp,m(C.genreName),1))),256)),(t(!0),s(P,null,B(r.vodSource.video.categories,C=>(t(),s("span",ip,m(C.categoryName),1))),256))])]),e("div",dp,[e("div",up,[e("div",cp,[e("div",mp,m(o(L).moment(r.vodSource.video.dateReleased).calendar()),1),h[16]||(h[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",fp,[e("div",pp,[e("div",vp,m(o(L).moment.utc(r.vodSource.video.durationInMillis).format("HH:mm:ss")),1),h[17]||(h[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",gp,[e("div",bp,[R(e("textarea",{"onUpdate:modelValue":h[7]||(h[7]=C=>r.vodSource.video.description=C),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"11rem"}},null,512),[[te,r.vodSource.video.description]]),h[18]||(h[18]=e("label",{for:"description"},"Description",-1))])])])):V("",!0)])],512),[[ke,r.vodSource]]),e("div",{class:ee([r.vodSource?"col-md-8":"col-md-12"])},[e("div",yp,[e("table",$p,[h[20]||(h[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o($).items,(C,ne)=>(t(),s("tr",{key:C.videoId},[e("td",{textContent:m(o(K)(ne)),class:"text-center"},null,8,hp),e("td",null,[e("div",wp,[e("div",null,[C.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(C.video.thumbnails,Z=>(t(),s("div",_p,[e("img",{src:Z.url,class:"img-fuild border",width:"128"},null,8,kp)]))),256)):(t(),s("img",Sp))]),e("div",Tp,[e("a",{onClick:Z=>g(C),class:"text-wrap link-offset-2",role:"button"},[r.vodSource===C?(t(),s("span",Mp)):V("",!0),Y(m(C.name),1)],8,Ip),e("div",null,[e("span",xp,m(o(L).moment.utc(C.video.durationInMillis).format("HH:mm:ss")),1)])])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(D,{filter:o($),search:o(y),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",Cp,[e("button",{onClick:h[8]||(h[8]=C=>a(!0)),class:"btn btn-primary btn-sm",type:"button",disabled:!r.vodSource},h[21]||(h[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)]),8,Vp),e("button",{onClick:h[9]||(h[9]=C=>a(!1)),class:"btn btn-secondary btn-sm ms-1"},h[22]||(h[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Df)}}},Ap=["disabled"],Pp={class:"container1"},Lp={class:"row"},Up={class:"col-12 col-lg-5"},Hp={class:"col"},Dp={class:"form-floating mb-2"},Ep=["value"],qp={key:0,class:"d-block invalid-feedback"},Bp={class:"col"},Np={class:"input-group mb-2"},Rp={class:"form-floating"},Fp={class:"col-12 col-lg-7"},zp={class:"col"},Gp={class:"form-floating mb-2"},jp={key:0,class:"d-block invalid-feedback"},Yp={class:"row row-cols-1 row-cols-sm-3 mt-2"},Wp={class:"col"},Kp={class:"form-floating mb-2"},Qp={key:0},Jp={key:1},Zp={key:2},Xp={key:3,class:"d-block invalid-feedback"},ev={class:"col"},tv={class:"form-floating mb-2"},sv={key:0},ov={key:1},av={key:2,class:"d-block invalid-feedback"},lv={class:"col"},nv={class:"form-floating mb-2"},rv={key:0,class:"mt-3"},iv={class:"table-responsive border mt-1"},dv={class:"table table-sm mb-0 align-middle"},uv={class:"table-group-divider"},cv={class:"text-center"},mv=["onUpdate:modelValue","onChange"],fv={key:0},pv=["onUpdate:modelValue","onChange"],vv={key:0},gv={key:1},bv={class:"text-start"},yv={class:"d-flex flex-row justify-content-end align-items-baseline"},$v=["onClick"],hv=["onClick"],wv={class:"col mt-2"},_v={class:"row row-cols-1 row-cols-sm-2"},kv={class:"col"},Sv={class:"form-floating mb-2"},Tv={class:"col"},Iv={class:"form-floating mb-2"},Mv={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Program Template"}),L=n,i=ye({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:null,endOffsetTime:null,item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),S={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:le.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:le.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i),W=xe(()=>{const X=k.moment;if(i.startOffsetTime&&i.startOffsetTime!=="00:00:00"&&k.isValidTime(i.startOffsetTime)){const C=X().startOf("day"),ne=C.format("YYYY-MM-DD ")+i.startOffsetTime,se=X(ne).subtract(C);return i.item.startOffsetMillis=se.valueOf(),i.item.startOffsetMillis}return 0}),J=xe(()=>{const X=k.moment;if(i.endOffsetTime&&i.endOffsetTime!=="00:00:00"&&k.isValidTime(i.endOffsetTime)){const C=X().startOf("day"),ne=C.format("YYYY-MM-DD ")+i.endOffsetTime,se=X(ne).subtract(C);return i.item.endOffsetMillis=se.valueOf(),i.item.endOffsetMillis}return 0}),u=xe(()=>i.item.endOffsetMillis-i.item.startOffsetMillis),y=xe(()=>k.moment.utc(u.value).format("HH:mm:ss")),K=xe(()=>{const X=i.item.adBreaks;return X&&X.length>0?X.reduce((ne,Z,se)=>ne+Z.durationInMillis,0):0}),f=xe(()=>{const X=u.value+K.value;return k.moment.utc(X).format("HH:mm:ss")}),q=xe(()=>k.moment.utc(K.value).format("HH:mm:ss"));fe(async()=>{await p()}),Ue(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const p=async()=>{await d(),await l()},d=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(C=>{i.lookups.sourceLocations=C.data,i.lookups.sourceLocations.length===1&&(i.item.sourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.sourceLocationId&&await b(i.item.sourceLocationId)}catch(X){O.value=k.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{}},b=async X=>{try{const C=`/api/v1/vodSources/lookup/source-location/${X}/?category=3`;await j.get(C).then(ne=>{i.lookups.vodSources=ne.data}),i.selected.vodSource=null,r()}catch(C){O.value=k.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},r=async()=>{const X=i.selected.vodSource;X?(i.item.vodSourceId=X.id,i.endOffsetTime=k.moment.utc(X.durationInMillis).format("HH:mm:ss"),await c(X.vodSourceId),A()):(i.selected.vodSource=null,i.item.vodSourceId=null,i.startOffsetTime=null,i.endOffsetTime=null,i.hls&&(i.hls.stopLoad(),i.hls.destroy()))},c=async X=>{try{let C=`/api/v1/vodSources/${X}/blank-frames`;const ne=await j.get(C).then(Z=>Z.data);i.item.adBreaks=[],ne&&ne.length>0&&(i.item.adBreaks=ne.map(Z=>{const se=(Z.endInMillis-Z.startInMillis)/2+Z.startInMillis;return{offsetTime:k.moment.utc(se).format("HH:mm:ss"),offsetMillis:se,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch{}finally{}},l=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(C=>{i.lookups.adBreakSourceLocations=C.data})}catch(X){O.value=k.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{}},a=()=>{const X={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};i.item.adBreaks.push(X)},U=X=>{i.item.adBreaks.splice(X,1)},T=X=>{const C=k.moment,ne=C().startOf("day"),Z=ne.format("YYYY-MM-DD ")+X.offsetTime,x=C(Z).subtract(ne);X.offsetMillis=x.valueOf()},g=X=>{const C=k.moment,ne=C().startOf("day"),Z=ne.format("YYYY-MM-DD ")+X.durationTime,x=C(Z).subtract(ne);X.durationInMillis=x.valueOf()},E=async()=>{const X=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const ne=k.clone(X.item),Z=ne.adBreaks.filter(se=>se.durationInMillis>0).map(se=>({offsetMillis:se.offsetMillis,durationInMillis:se.durationInMillis,vodSourceId:se.vodSource?se.vodSource.vodSourceId:null}));ne.adBreaks=Z,await j.post("/api/v1/programtemplates/",ne).then(se=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const x=`${L.urlView}/${se.data}`;await Q.push(x)}})})}catch(ne){O.value=k.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{M.value=!1}},A=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var X=document.getElementById("video-add-program-template");const ne=i.selected.vodSource.video.formats.find(se=>se.formatName==="HLS"),Z=ne.serverUrl+ne.path;i.hls=k.createHlsStream(X,Z)}},h=async()=>{const X=Ae(Re,{sourceLocationId:i.item.sourceLocationId,genreId:0,categoryId:3,withArn:!0},{chore:!0,keepInitial:!1}),{data:C,isCanceled:ne}=await X.reveal();if(X.closeAll(),!ne&&C){const Z=C;i.selected.vodSource=Z,i.item.vodSourceId=Z.vodSourceId,i.startOffsetTime="00:00:00",i.endOffsetTime=k.moment.utc(Z.video.durationInMillis).format("HH:mm:ss"),await c(Z.vodSourceId),A()}},D=async X=>{const C=Ae(Re,{sourceLocationId:null,genreId:0,categoryId:1,durationInMillis:X.durationInMillis,withArn:!0},{chore:!0,keepInitial:!1}),{data:ne,isCanceled:Z}=await C.reveal();C.closeAll(),!Z&&ne&&(X.vodSource=ne)};return(X,C)=>{const ne=oe("router-link"),Z=oe("PageHeader"),se=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(Z,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:C[0]||(C[0]=x=>E()),class:"btn btn-primary"},C[9]||(C[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ap),z(ne,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>C[10]||(C[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(se,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",null,[e("div",Pp,[e("div",Lp,[e("div",Up,[e("div",Hp,[e("div",Dp,[R(e("select",{"onUpdate:modelValue":C[1]||(C[1]=x=>i.item.sourceLocationId=x),onChange:C[2]||(C[2]=x=>b(i.item.sourceLocationId)),class:ee([o(k).getValidFeedbackCss(i.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(P,null,B(i.lookups.sourceLocations,x=>(t(),s("option",{value:x.id},m(x.name),9,Ep))),256))],34),[[ge,i.item.sourceLocationId]]),C[11]||(C[11]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o($).item.sourceLocationId.$error?(t(),s("div",qp,[(t(!0),s(P,null,B(o($).item.sourceLocationId.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",Bp,[e("div",Np,[e("div",Rp,[e("div",{id:"selectedVodSource",class:ee([o(k).getValidFeedbackCss(i.selected.vodSource),"form-control"]),placeholder:"Title"},[i.selected.vodSource?(t(),s(P,{key:0},[Y(" ["+m(o(k).moment.utc(i.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(i.selected.vodSource.name),1)],64)):V("",!0)],2),C[12]||(C[12]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),i.item.sourceLocationId?(t(),s("button",{key:0,onClick:h,class:"btn btn-primary",type:"button"},C[13]||(C[13]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):V("",!0)])]),C[14]||(C[14]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Fp,[e("div",zp,[e("div",Gp,[R(e("input",{"onUpdate:modelValue":C[3]||(C[3]=x=>i.item.name=x),id:"name",class:ee([o(k).getValidFeedbackCss(i.item.name),"form-control"]),placeholder:"Name"},null,2),[[te,i.item.name]]),C[15]||(C[15]=e("label",{for:"name",class:""},"Name",-1)),o($).item.name.$error?(t(),s("div",jp,[(t(!0),s(P,null,B(o($).item.name.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",Yp,[e("div",Wp,[e("div",null,[e("div",Kp,[R(e("input",{"onUpdate:modelValue":C[4]||(C[4]=x=>i.startOffsetTime=x),type:"time",step:"1",id:"startOffsetTime",class:ee([o(k).getValidFeedbackCss(i.startOffsetTime),"form-control"])},null,2),[[te,i.startOffsetTime]]),C[16]||(C[16]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Qp,C[17]||(C[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):V("",!0),W.value>J.value&&J.value>0?(t(),s("div",Jp,C[18]||(C[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):V("",!0),i.selected.vodSource&&W.value>=i.selected.vodSource.durationInMillis?(t(),s("div",Zp,C[19]||(C[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0),o($).item.startOffsetMillis.$error?(t(),s("div",Xp,[(t(!0),s(P,null,B(o($).item.startOffsetMillis.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",ev,[e("div",null,[e("div",tv,[R(e("input",{"onUpdate:modelValue":C[5]||(C[5]=x=>i.endOffsetTime=x),type:"time",step:"1",id:"endOffsetTime",class:ee([o(k).getValidFeedbackCss(i.endOffsetTime),"form-control"])},null,2),[[te,i.endOffsetTime]]),C[20]||(C[20]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),J.value>0&&J.value<3e4?(t(),s("div",sv,C[21]||(C[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):V("",!0),i.selected.vodSource&&J.value>i.selected.vodSource.durationInMillis?(t(),s("div",ov,C[22]||(C[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0),o($).item.endOffsetMillis.$error?(t(),s("div",av,[(t(!0),s(P,null,B(o($).item.endOffsetMillis.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",lv,[e("div",nv,[R(e("input",{"onUpdate:modelValue":C[6]||(C[6]=x=>y.value=x),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[te,y.value]]),C[23]||(C[23]=e("label",{for:"durationTime"},"Clip",-1))])])]),i.item.vodSourceId?(t(),s("div",rv,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[C[25]||(C[25]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:a,class:"btn btn-outline-primary btn-sm"},C[24]||(C[24]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",iv,[e("table",dv,[C[29]||(C[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",uv,[(t(!0),s(P,null,B(i.item.adBreaks,(x,me)=>(t(),s("tr",null,[e("td",cv,m(me+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":ce=>x.offsetTime=ce,onChange:ce=>T(x),type:"time",step:"1",class:ee([o(k).getValidFeedbackCss(x.offsetTime),"form-control"])},null,42,mv),[[te,x.offsetTime]]),x.offsetMillis>=i.selected.vodSource.durationInMillis?(t(),s("div",fv,C[26]||(C[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":ce=>x.durationTime=ce,onChange:ce=>g(x),type:"time",step:"1",class:ee([o(k).getValidFeedbackCss(x.durationTime),"form-control"])},null,42,pv),[[te,x.durationTime]])]),e("td",null,[x.vodSource?(t(),s("span",vv,m(x.vodSource.name),1)):V("",!0),x.durationInMillis<=0?(t(),s("span",gv," Specify the Ad Break Duration Time to configure the VOD to assign ")):V("",!0)]),e("td",bv,[e("div",yv,[x.durationInMillis>0?(t(),s("button",{key:0,onClick:ce=>D(x),class:"btn btn-outline-info btn-sm"},C[27]||(C[27]=[e("span",{class:"fas fa-fw fa-cog"},null,-1)]),8,$v)):V("",!0),e("button",{onClick:ce=>U(me),class:"btn btn-outline-warning btn-sm ms-2"},C[28]||(C[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,hv)])])]))),256))])]),C[30]||(C[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),Y(" Vod source can also be defined during creation of Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):V("",!0),e("div",wv,[C[33]||(C[33]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",_v,[e("div",kv,[e("div",Sv,[R(e("input",{"onUpdate:modelValue":C[7]||(C[7]=x=>q.value=x),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[te,q.value]]),C[31]||(C[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Tv,[e("div",Iv,[R(e("input",{"onUpdate:modelValue":C[8]||(C[8]=x=>f.value=x),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[te,f.value]]),C[32]||(C[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},xv=["disabled"],Cv={class:"container1"},Vv={class:"row"},Ov={class:"col-12 col-lg-5"},Av={class:"col"},Pv={class:"form-floating mb-2"},Lv=["value"],Uv={key:0,class:"d-block invalid-feedback"},Hv={class:"col"},Dv={class:"form-floating"},Ev={id:"selectedVodSource",class:"form-control",placeholder:"Title"},qv={class:"col-12 col-lg-7"},Bv={class:"col"},Nv={class:"form-floating mb-2"},Rv={key:0,class:"d-block invalid-feedback"},Fv={class:"row row-cols- row-cols-sm-3"},zv={class:"col"},Gv={class:"form-floating mb-2"},jv={key:0},Yv={key:1},Wv={key:2},Kv={key:3,class:"d-block invalid-feedback"},Qv={class:"col"},Jv={class:"form-floating"},Zv={key:0},Xv={key:1},eg={key:2,class:"d-block invalid-feedback"},tg={class:"col"},sg={class:"form-floating mb-2"},og={key:0,class:"mt-2"},ag={class:"table-responsive border mt-1"},lg={class:"table table-sm mb-0 align-middle"},ng={class:"table-group-divider"},rg=["onUpdate:modelValue","onChange"],ig={key:0},dg=["onUpdate:modelValue","onChange"],ug={key:0},cg=["onClick"],mg={key:1},fg={class:"text-start"},pg={class:"d-flex flex-row justify-content-end align-items-baseline"},vg=["onClick"],gg=["onClick"],bg={class:"col mt-2"},yg={class:"row row-cols-1 row-cols-sm-2"},$g={class:"col"},hg={class:"form-floating mb-2"},wg={class:"col"},_g={class:"form-floating mb-2"},kg={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,closeWithReturnUrl:N,security:L}=he({appTitle:"Arcadian-FAST",pageTitle:"Edit Program Template"}),i=n,S=ye({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),$=ve(!0),W={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:le.withMessage("startOffsetMillis is required.",re),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:le.withMessage("endOffsetMillis is required.",re),$autoDirty:!0,$lazy:!0}}},J=Ie(W,S),u=xe(()=>{if(S.startOffsetTime&&S.startOffsetTime!=="00:00:00"&&k.isValidTime(S.startOffsetTime)){const se=k.moment,x=se().startOf("day"),ce=se(S.startOffsetTime,"hh:mm:ss").diff(x);return S.item.startOffsetMillis=ce.valueOf(),S.item.startOffsetMillis}return 0}),y=xe(()=>{if(S.endOffsetTime&&S.endOffsetTime!=="00:00:00"&&k.isValidTime(S.endOffsetTime)){const se=k.moment,x=se().startOf("day"),ce=se(S.endOffsetTime,"hh:mm:ss").diff(x);return S.item.endOffsetMillis=ce.valueOf(),S.item.endOffsetMillis}return 0}),K=xe(()=>S.item.endOffsetMillis-S.item.startOffsetMillis),f=xe(()=>k.moment.utc(K.value).format("HH:mm:ss")),q=xe(()=>{const se=S.item.adBreaks;return se&&se.length>0?se.reduce((me,ce,de)=>me+ce.durationInMillis,0):0}),p=xe(()=>{const se=K.value+q.value;return k.moment.utc(se).format("HH:mm:ss")}),d=xe(()=>k.moment.utc(q.value).format("HH:mm:ss"));fe(async()=>{await b()});const b=async()=>{$.value=!0,await r(),await c(),await l()},r=async()=>{try{const se=`/api/v1/programtemplates/${i.id}/`;await j.get(se).then(x=>{S.item=x.data}),S.startOffsetTime=k.moment.utc(S.item.startOffsetMillis).format("HH:mm:ss"),S.endOffsetTime=k.moment.utc(S.item.endOffsetMillis).format("HH:mm:ss"),S.item.adBreaks.forEach(x=>{x.offsetTime=k.moment.utc(x.offsetMillis).format("HH:mm:ss"),x.durationTime=k.moment.utc(x.durationInMillis).format("HH:mm:ss")})}catch(se){O.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{}},c=async()=>{try{const se=`/api/v1/vodSources/${S.item.vodSourceId}/`;await j.get(se).then(x=>{S.selected.vodSource=x.data}),X()}catch(se){O.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{}},l=async()=>{await a()},a=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(x=>{S.lookups.sourceLocations=x.data}),S.item.sourceLocationId&&await U(S.item.sourceLocationId)}catch(se){O.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{}},U=async se=>{try{const x=`/api/v1/vodSources/lookup/source-location/${se}/?type=3`;if(await j.get(x).then(me=>{S.lookups.vodSources=me.data}),$.value){$.value=!1;return}S.selected.vodSource=null,T()}catch(x){O.value=k.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},T=async()=>{const se=S.selected.vodSource;if(se){debugger;S.item.vodSourceId=se.vodSourceId,S.startOffsetTime=k.moment.utc(0).format("HH:mm:ss"),S.endOffsetTime=k.moment.utc(se.video.durationInMillis).format("HH:mm:ss"),X()}else S.selected.vodSource=null,S.item.vodSourceId=null,S.startOffsetTime=null,S.endOffsetTime=null,S.hls&&(S.hls.stopLoad(),S.hls.destroy())},g=()=>{const se={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};S.item.adBreaks.push(se)},E=se=>{S.item.adBreaks.splice(se,1)},A=se=>{const x=k.moment,me=x().startOf("day"),ce=me.format("YYYY-MM-DD ")+se.offsetTime,ue=x(ce).subtract(me);se.offsetMillis=ue.valueOf()},h=se=>{const x=k.moment,me=x().startOf("day"),ce=me.format("YYYY-MM-DD ")+se.durationTime,ue=x(ce).subtract(me);se.durationInMillis=ue.valueOf()},D=async()=>{const se=S;if(M.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const me=k.clone(se.item);debugger;const ce=me.adBreaks.filter(de=>de.durationInMillis>0).map(de=>{debugger;return{offsetMillis:de.offsetMillis,durationInMillis:de.durationInMillis,vodSourceId:de.vodSource?de.vodSource.vodSourceId:null}});me.adBreaks=ce,await j.put("/api/v1/programtemplates/",me).then(de=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ue=`${i.urlView}/${i.id}`;await Q.push(ue)}})})}catch(me){O.value=k.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{M.value=!1}},X=()=>{if(Hls.isSupported()){S.hls&&(S.hls.stopLoad(),S.hls.destroy());var se=document.getElementById("video-edit-program-template");const me=S.selected.vodSource.video.formats.find(de=>de.formatName==="HLS"),ce=me.serverUrl+me.path;S.hls=k.createHlsStream(se,ce)}},C=async se=>{try{let x=`/api/v1/vodSources/${se}/blank-frames`;const me=await j.get(x).then(ce=>ce.data);S.item.adBreaks=[],me&&me.length>0&&(S.item.adBreaks=me.map(ce=>{const de=(ce.endInMillis-ce.startInMillis)/2+ce.startInMillis;return{offsetTime:k.moment.utc(de).format("HH:mm:ss"),offsetMillis:de,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(x){O.value=k.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},ne=async()=>{const se=Ae(Re,{sourceLocationId:S.sourceLocationId,genreId:0,categoryId:3,withArn:!0},{chore:!0,keepInitial:!1}),{data:x,isCanceled:me}=await se.reveal();if(se.closeAll(),!me&&x){const ce=x;S.selected.vodSource=ce,S.item.vodSourceId=ce.vodSourceId,T(),await C(ce.vodSourceId)}},Z=async se=>{const x=Ae(Re,{sourceLocationId:null,genreId:0,categoryId:1,durationInMillis:se.durationInMillis,withArn:!0},{chore:!0,keepInitial:!1}),{data:me,isCanceled:ce}=await x.reveal();x.closeAll(),!ce&&me&&(se.vodSource=me)};return(se,x)=>{const me=oe("PageHeader"),ce=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(me,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:x[0]||(x[0]=de=>D()),class:"btn btn-primary"},x[11]||(x[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xv),e("button",{onClick:x[1]||(x[1]=de=>b()),class:"btn btn-secondary ms-2"},x[12]||(x[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:x[2]||(x[2]=de=>o(N)(i.urlMain)),class:"btn btn-secondary ms-1"},x[13]||(x[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(ce,{errorMessage:o(O),vuelidate:o(J)},{default:F(()=>[e("div",null,[e("div",Cv,[e("div",Vv,[e("div",Ov,[e("div",Av,[e("div",Pv,[R(e("select",{"onUpdate:modelValue":x[3]||(x[3]=de=>S.item.sourceLocationId=de),onChange:x[4]||(x[4]=de=>U(S.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(P,null,B(S.lookups.sourceLocations,de=>(t(),s("option",{value:de.id},m(de.name),9,Lv))),256))],544),[[ge,S.item.sourceLocationId]]),x[14]||(x[14]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(J).item.sourceLocationId.$error?(t(),s("div",Uv,[(t(!0),s(P,null,B(o(J).item.sourceLocationId.$errors,de=>(t(),s("div",{key:de.$uid},m(de.$message),1))),128))])):V("",!0)])]),e("div",Hv,[e("div",{onClick:ne,class:"input-group mb-2"},[e("div",Dv,[e("div",Ev,[S.selected.vodSource?(t(),s(P,{key:0},[Y(" ["+m(o(k).moment.utc(S.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(S.selected.vodSource.name),1)],64)):V("",!0)]),x[15]||(x[15]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),x[16]||(x[16]=e("button",{class:"btn btn-primary",type:"button"},[e("i",{class:"fa-solid fa-filter"})],-1))])]),x[17]||(x[17]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",qv,[e("div",Bv,[e("div",Nv,[R(e("input",{"onUpdate:modelValue":x[5]||(x[5]=de=>S.item.name=de),id:"name",class:ee([o(k).getValidFeedbackCss(S.item.name),"form-control"]),placeholder:"Name"},null,2),[[te,S.item.name]]),x[18]||(x[18]=e("label",{for:"name",class:""},"Name",-1)),o(J).item.name.$error?(t(),s("div",Rv,[(t(!0),s(P,null,B(o(J).item.name.$errors,de=>(t(),s("div",{key:de.$uid},' d" '+m(de.$message),1))),128))])):V("",!0)])]),e("div",Fv,[e("div",zv,[e("div",Gv,[R(e("input",{"onUpdate:modelValue":x[6]||(x[6]=de=>S.startOffsetTime=de),type:"time",step:"1",id:"startOffsetTime",class:ee([o(k).getValidFeedbackCss(S.startOffsetTime),"form-control"])},null,2),[[te,S.startOffsetTime]]),x[19]||(x[19]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),u.value>0&&u.value<3e4?(t(),s("div",jv,x[20]||(x[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):V("",!0),u.value>y.value&&y.value>0?(t(),s("div",Yv,x[21]||(x[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):V("",!0),S.selected.vodSource&&u.value>=S.selected.vodSource.durationInMillis?(t(),s("div",Wv,x[22]||(x[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0),o(J).item.startOffsetMillis.$error?(t(),s("div",Kv,[(t(!0),s(P,null,B(o(J).item.startOffsetMillis.$errors,de=>(t(),s("div",{key:de.$uid},m(de.$message),1))),128))])):V("",!0)]),e("div",Qv,[e("div",Jv,[R(e("input",{"onUpdate:modelValue":x[7]||(x[7]=de=>S.endOffsetTime=de),type:"time",step:"1",id:"endOffsetTime",class:ee([o(k).getValidFeedbackCss(S.endOffsetTime),"form-control"])},null,2),[[te,S.endOffsetTime]]),x[23]||(x[23]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),y.value>0&&y.value<3e4?(t(),s("div",Zv,x[24]||(x[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):V("",!0),S.selected.vodSource&&y.value>S.selected.vodSource.durationInMillis?(t(),s("div",Xv,x[25]||(x[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0),o(J).item.endOffsetMillis.$error?(t(),s("div",eg,[(t(!0),s(P,null,B(o(J).item.endOffsetMillis.$errors,de=>(t(),s("div",{key:de.$uid},m(de.$message),1))),128))])):V("",!0)]),e("div",tg,[e("div",sg,[R(e("input",{"onUpdate:modelValue":x[8]||(x[8]=de=>f.value=de),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[te,f.value]]),x[26]||(x[26]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),S.selected.vodSource?(t(),s("div",og,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[x[28]||(x[28]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:g,class:"btn btn-outline-primary btn-sm"},x[27]||(x[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",ag,[e("table",lg,[x[33]||(x[33]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",ng,[(t(!0),s(P,null,B(S.item.adBreaks,(de,ue)=>(t(),s("tr",null,[e("td",null,m(ue+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":I=>de.offsetTime=I,onChange:I=>A(de),type:"time",step:"1",class:"form-control"},null,40,rg),[[te,de.offsetTime]]),de.offsetMillis>=S.selected.vodSource.durationInMillis?(t(),s("div",ig,x[29]||(x[29]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):V("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":I=>de.durationTime=I,onChange:I=>h(de),type:"time",step:"1",class:"form-control"},null,40,dg),[[te,de.durationTime]])]),e("td",null,[de.vodSource?(t(),s("span",ug,[e("button",{onClick:I=>de.vodSource=null,class:"btn btn-outline-warning btn-sm me-1"},x[30]||(x[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]),8,cg),Y(m(de.vodSource.name),1)])):V("",!0),de.durationInMillis<=0?(t(),s("span",mg," Specify the Ad Break Duration Time to configure the VOD to assign ")):V("",!0)]),e("td",fg,[e("div",pg,[de.durationInMillis>0?(t(),s("button",{key:0,onClick:I=>Z(de),class:"btn btn-outline-info btn-sm"},x[31]||(x[31]=[e("span",{class:"fas fa-fw fa-cog"},null,-1)]),8,vg)):V("",!0),e("button",{onClick:I=>E(ue),class:"btn btn-outline-warning btn-sm ms-2"},x[32]||(x[32]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,gg)])])]))),256))])]),x[34]||(x[34]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),Y(" Vod source can also be defined during creation of Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):V("",!0),e("div",bg,[x[37]||(x[37]=e("b",null," Duration ",-1)),e("div",yg,[e("div",$g,[e("div",hg,[R(e("input",{"onUpdate:modelValue":x[9]||(x[9]=de=>d.value=de),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[te,d.value]]),x[35]||(x[35]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",wg,[e("div",_g,[R(e("input",{"onUpdate:modelValue":x[10]||(x[10]=de=>p.value=de),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[te,p.value]]),x[36]||(x[36]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Sg={class:"ms-1"},Tg={class:"input-group"},Ig={class:"table-responsive border shadow-sm"},Mg={class:"table table-hover mb-0"},xg=["textContent"],Cg={class:"d-flex flex-column flex-lg-row justify-content-start"},Vg={class:""},Og={class:"mb-11"},Ag=["src"],Pg={class:"ms-lg-2"},Lg={key:0,class:"fas fa-fw fa-check-circle text-success"},Ug={class:"text-wrap text-truncate",style:{width:"20px !important"}},Hg={class:"badge bg-primary me-1"},Dg={key:0},Eg={class:"badge bg-info me-1"},qg={class:"text-end me-0 me-sm-5"},Bg={class:"text-center"},Ng={class:"mt-3 mt-lg-2"},Rg="/api/v1/programTemplates/search",Fg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,generateReturnUrl:i,security:S,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:y,getRowNumber:K,setSelected:f,isSelected:q}=De({appTitle:"Arcadian-FAST",pageTitle:"Program Templates",cacheKey:`${_==null?void 0:_.userId}/program-templates/search`,baseUrl:Rg,filter:{updateUrl:!0}});return fe(async()=>{W(),await y()}),(p,d)=>{const b=oe("router-link"),r=oe("PageHeader"),c=oe("m-pagination"),l=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:F(()=>[z(b,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Sg,[e("div",Tg,[R(e("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>o($).query.criteria=a),onKeyup:d[1]||(d[1]=He(a=>o(y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[te,o($).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=a=>o(y)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(l,{errorMessage:o(j)},{default:F(()=>[e("div",Ig,[e("table",Mg,[d[5]||(d[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o($).items,(a,U)=>(t(),s("tr",{key:a.programTemplateId},[e("td",{textContent:m(o(K)(U)),class:"text-center"},null,8,xg),e("td",null,[e("div",Cg,[e("div",Vg,[a.vodSource.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(a.vodSource.video.thumbnails,T=>(t(),s("div",Og,[e("img",{src:T.url,class:"img-fuild border",width:"128"},null,8,Ag)]))),256)):V("",!0)]),e("div",Pg,[z(b,{to:`${n.urlView}/${a.programTemplateId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[a.arn?(t(),s("span",Lg)):V("",!0),e("span",Ug,m(a.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(P,null,B(a.vodSource.video.categories,T=>(t(),s("div",null,[e("span",Hg,m(T.categoryName),1)]))),256)),a.vodSource.video.genres.length>0?(t(),s("div",Dg,[(t(!0),s(P,null,B(a.vodSource.video.genres,T=>(t(),s("span",Eg,m(T.genreName),1))),256))])):V("",!0)])])])]),e("td",qg,m(o(ae).moment.utc(a.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",Bg,m(a.adBreaks.length),1),e("td",null,[e("div",null,[z(b,{to:`${n.urlViewSourceLocation}/${a.sourceLocationId}/${o(i)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(a.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",Ng,[z(b,{to:`${n.urlViewVodSource}/${a.vodSourceId}/${o(i)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(a.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(c,{filter:o($),search:o(y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},zg={key:0},Gg={class:"nav nav-tabs",id:"myTab",role:"tablist"},jg={class:"nav-item",role:"presentation"},Yg={class:"nav-item",role:"presentation"},Wg={class:"nav-item d-none",role:"presentation"},Kg={class:"tab-content",id:"myTabContent"},Qg={class:""},Jg={class:""},Zg={class:"row row-cols-1 row-cols-lg-2"},Xg={class:"col"},e1={class:"col"},t1={class:"form-floating mb-2"},s1={id:"sourceLocation",class:"form-control-plaintext card"},o1={class:"col"},a1={class:"form-floating mb-2"},l1={id:"vodSource",class:"form-control-plaintext card"},n1={class:"col"},r1={class:"col"},i1={class:"form-floating mb-2"},d1={class:"row row-cols-1 row-cols-sm-3"},u1={class:"col"},c1={class:"form-floating mb-2"},m1={class:"col"},f1={class:"form-floating mb-2"},p1={class:"col"},v1={class:"form-floating mb-2"},g1={class:"row row-cols-1 row-cols-sm-2"},b1={class:"col"},y1={class:"form-floating mb-2"},$1={class:"col"},h1={class:"form-floating mb-2"},w1={class:""},_1={class:"table-responsive border"},k1={class:"table table-hover mb-0"},S1={class:"text-center"},T1={key:0},I1={class:"mt-2"},M1={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View Program Template"});Ce("$config");const J=we();J.user;const u=ye({user:J.user,item:null,hls:null}),y=ve();fe(async()=>{await p(),y.value=N.getPageTab("programTemplate")||"information-tab"});const K=r=>{N.setPageTab("programTemplate",r),y.value=r},f=r=>r!==y.value?"":"active",q=r=>r!==y.value?"":"show active",p=async()=>{const r=u;if(!w.value)try{w.value=!0,k.value="",u.item=null;const c=`/api/v1/programTemplates/${v.id}/`;await ae.get(c).then(l=>{r.item=l.data;const a=r.item;a.startOffsetTime=N.moment.utc(a.startOffsetMillis).format("HH:mm:ss"),a.endOffsetTime=N.moment.utc(a.endOffsetMillis).format("HH:mm:ss"),a.durationTime=N.moment.utc(a.durationInMillis).format("HH:mm:ss"),a.adBreaksDurationTime=N.moment.utc(a.adBreaksDurationInMillis).format("HH:mm:ss"),a.totalProgramTemplateDurationTime=N.moment.utc(a.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const U=a.vodSource.video,T=U.durationInMillis;U.durationInMillis=N.moment.utc(T).format("HH:mm:ss")}),u.item.vodSource&&await b(u.item.vodSourceId)}catch(c){k.value=N.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{w.value=!1}},d=async()=>{await p()},b=async r=>{try{let c=`/api/v1/vodSources/${r}/hls`;const l=await ae.get(c).then(U=>U.data);u.hls&&u.hls.destroy();const a=document.getElementById("video-view-program-template");u.hls=N.createHlsStream(a,l,"Previewing VOD.")}catch(c){k.value=N.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}};return(r,c)=>{const l=oe("router-link"),a=oe("PageHeader"),U=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(M)},{default:F(()=>[z(l,{to:`${n.urlEdit}/${n.id}/${o($)()}`,class:"ms-2 btn btn-primary"},{default:F(()=>c[11]||(c[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:c[0]||(c[0]=T=>d()),class:"ms-2 btn btn-secondary"},c[12]||(c[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:c[1]||(c[1]=T=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},c[13]||(c[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(U,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",zg,[e("div",null,[e("ul",Gg,[e("li",jg,[e("button",{onClick:c[2]||(c[2]=T=>K("information-tab")),class:ee([f("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Yg,[e("button",{onClick:c[3]||(c[3]=T=>K("adBreaks-tab")),class:ee([f("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Wg,[e("button",{onClick:c[4]||(c[4]=T=>K("programs-tab")),class:ee([f("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Kg,[e("div",{class:ee([q("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Qg,[e("div",Jg,[e("div",Zg,[e("div",Xg,[e("div",e1,[e("div",t1,[e("div",s1,[z(l,{to:`${n.urlViewSourceLocation}/${u.item.sourceLocationId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(u.item.sourceLocation.name),1)]),_:1},8,["to"])]),c[14]||(c[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",o1,[e("div",a1,[e("div",l1,[z(l,{to:`${n.urlViewVodSource}/${u.item.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(u.item.vodSource.name),1)]),_:1},8,["to"])]),c[15]||(c[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),c[16]||(c[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",n1,[e("div",r1,[e("div",i1,[R(e("input",{"onUpdate:modelValue":c[5]||(c[5]=T=>u.item.name=T),type:"text",class:"form-control-plaintext card",id:"name"},null,512),[[te,u.item.name]]),c[17]||(c[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",d1,[e("div",u1,[e("div",c1,[R(e("input",{"onUpdate:modelValue":c[6]||(c[6]=T=>u.item.startOffsetTime=T),type:"text",class:"form-control-plaintext card",id:"startOffsetTime"},null,512),[[te,u.item.startOffsetTime]]),c[18]||(c[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",m1,[e("div",f1,[R(e("input",{"onUpdate:modelValue":c[7]||(c[7]=T=>u.item.endOffsetTime=T),type:"text",class:"form-control-plaintext card",id:"endOffsetTime"},null,512),[[te,u.item.endOffsetTime]]),c[19]||(c[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",p1,[e("div",v1,[R(e("input",{"onUpdate:modelValue":c[8]||(c[8]=T=>u.item.durationTime=T),type:"text",class:"form-control-plaintext card",id:"durationTime"},null,512),[[te,u.item.durationTime]]),c[20]||(c[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",g1,[e("div",b1,[e("div",y1,[R(e("input",{"onUpdate:modelValue":c[9]||(c[9]=T=>u.item.adBreaksDurationTime=T),type:"text",class:"form-control-plaintext card",id:"adBreaksDurationTime"},null,512),[[te,u.item.adBreaksDurationTime]]),c[21]||(c[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",$1,[e("div",h1,[R(e("input",{"onUpdate:modelValue":c[10]||(c[10]=T=>u.item.totalProgramTemplateDurationTime=T),type:"text",class:"form-control-plaintext card",id:"totalProgramTemplateDurationTime"},null,512),[[te,u.item.totalProgramTemplateDurationTime]]),c[22]||(c[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:ee([q("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",w1,[e("div",_1,[e("table",k1,[c[23]||(c[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"Vod Source")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.adBreaks,(T,g)=>(t(),s("tr",{key:T.programTemplateAdBreakId},[e("td",S1,m(g+1),1),e("td",null,m(o(N).moment.utc(T.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(T.durationInMillis).format("HH:mm:ss")),1),e("td",null,[T.vodSource?(t(),s("span",T1,[z(l,{to:`${n.urlViewVodSource}/${T.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(T.vodSource.name),1)]),_:2},1032,["to"])])):V("",!0)])]))),128))]),_:1},512),[[ke,u.item.adBreaks.length>0]])])])])],2),e("div",{class:ee([q("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",I1,[e("pre",null,m(u.item.programs),1)])],2)])])])):V("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},x1=["disabled"],C1={class:"row row-cols-1 row-cols-lg-2"},V1={class:"col"},O1={class:""},A1={class:"row row-cols-1 row-cols-md-3"},P1={class:"col"},L1={class:"form-floating mb-2"},U1={key:0,class:"d-block invalid-feedback"},H1={class:"col"},D1={class:"form-floating mb-2"},E1={key:0,class:"d-block invalid-feedback"},q1={class:"col"},B1={class:"form-floating mb-2"},N1=["disabled"],R1={key:0,class:"d-block invalid-feedback"},F1={class:"col"},z1={class:"col"},G1={class:"form-floating mb-2"},j1=["value"],Y1={key:0,class:"d-block invalid-feedback"},W1={key:0,class:"w-100 text-center"},K1={class:"mx-auto"},Q1=["src"],J1={class:"col"},Z1={class:""},X1={class:"col"},eb={class:"form-floating mb-2"},tb=["value"],sb={key:0,class:"d-block invalid-feedback"},ob={class:"col"},ab={class:"input-group mb-2"},lb={class:"form-floating"},nb={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Channel"}),L=n,i=ye({lookups:{sourceLocations:[],vodSources:[],logos:[{id:"Viva | Batang 90s",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00203_KA_MAIN_HORIZ_LM_TGIS%20THE%20MOVIE.480.jpg"},{id:"Viva | Kids & Family",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00219_KA_MAIN_HORIZ_LM_ANG%20TANGING%20INA.480.jpg"},{id:"Viva | Horror Movie Marathon",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00408_KA_MAIN_HORIZ_FM_WINNIE%20THE%20POOH%20BLOOD%20AND%20HONEY.480.jpg"},{id:"Viva | BitterSweet Stories",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00074_KA_MAIN_HORIZ_LM_CAMP%20SAWI.480.jpg"},{id:"Viva | Comedy",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00207_KA_MAIN_HORIZ_LM_THE%20GIFTED.480.jpg"},{id:"Viva | Romance",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00697_KA_MAIN_HORIZ_LM_CLOSE%20TO%20YOU.480.jpg"},{id:"Viva | ROMCOM",url:"https://d1qfpvemzhsbpm.cloudfront.net/images/P00220_KA_MAIN_HORIZ_LM_KASAL,%20KASALI,%20KASALO.480.jpg"}]},selected:{vodSource:null},item:{name:"",logoUrl:null,tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null},hls:null}),S={item:{name:{title:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},logoUrl:{title:le.withMessage("Logo is required.",re),$autoDirty:!0,$lazy:!0},tier:{title:le.withMessage("Tier is required.",re),$autoDirty:!0,$lazy:!0},playbackMode:{title:le.withMessage("PlaybackMode is required.",re),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:le.withMessage("Filler Slate Source Location is required.",re),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:le.withMessage("Filler Slate Vod Source is required.",re),$autoDirty:!0,$lazy:!0},policy:{title:le.withMessage("Policy is required.",re),$autoDirty:!0,$lazy:!0}}},$=Ie(S,i);fe(async()=>{await W()});const W=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(b=>{i.lookups.sourceLocations=b.data,i.lookups.sourceLocations.length===1&&(i.item.fillerSlateSourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.fillerSlateSourceLocationId&&await u(i.item.fillerSlateSourceLocationId)}catch(d){O.value=k.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},J=async()=>{i.item.fillerSlateVodSourceId=null,await u(i.item.fillerSlateSourceLocationId)},u=async d=>{try{let b=`/api/v1/vodSources/lookup/source-location/${d}/?category=2`;await j.get(b).then(r=>{i.lookups.vodSources=r.data})}catch(b){O.value=k.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},y=()=>{if(i.item.name){const d=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${i.item.name}"}]}`;i.item.policy=d}else i.item.policy=null},K=async()=>{const d=i;if(M.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{M.value=!0,O.value="";const r=k.clone(d.item);await j.post("/api/v1/channels/",r).then(c=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const l=`${L.urlView}/${c.data}`;await Q.push(l)}})})}catch(r){O.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{M.value=!1}},f=()=>{i.item.playbackMode==="LOOP"&&i.item.tier!=="BASIC"&&(i.item.tier="BASIC")},q=async()=>{const d=Ae(Re,{sourceLocationId:i.item.sourceLocationId,genreId:0,categoryId:2,withArn:!0},{chore:!0,keepInitial:!1}),{data:b,isCanceled:r}=await d.reveal();if(d.closeAll(),!r&&b){const c=b;i.selected.vodSource=c,i.item.fillerSlateVodSourceId=c.vodSourceId,p()}},p=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var d=document.getElementById("video-preview");const r=i.selected.vodSource.video.formats.find(l=>l.formatName==="HLS"),c=r.serverUrl+r.path;i.hls=k.createHlsStream(d,c)}};return(d,b)=>{const r=oe("router-link"),c=oe("PageHeader"),l=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(c,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(_)},{default:F(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:b[0]||(b[0]=a=>K()),class:"btn btn-primary"},b[9]||(b[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,x1),z(r,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>b[10]||(b[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(l,{errorMessage:o(O),vuelidate:o($)},{default:F(()=>[e("div",C1,[e("div",V1,[e("div",O1,[e("div",A1,[e("div",P1,[e("div",L1,[R(e("input",{"onUpdate:modelValue":b[1]||(b[1]=a=>i.item.name=a),onChange:b[2]||(b[2]=a=>y()),id:"name",class:ee([o(k).getValidFeedbackCss(i.item.name),"form-control"]),placeholder:"name"},null,34),[[te,i.item.name]]),b[11]||(b[11]=e("label",{for:"name",class:""},"Name",-1)),o($).item.name.$error?(t(),s("div",U1,[(t(!0),s(P,null,B(o($).item.name.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",H1,[e("div",D1,[R(e("select",{"onUpdate:modelValue":b[3]||(b[3]=a=>i.item.playbackMode=a),onChange:b[4]||(b[4]=a=>f()),id:"playbackMode",class:"form-control",placeholder:"playbackMode"},b[12]||(b[12]=[e("option",{value:"LINEAR"},"LINEAR",-1),e("option",{value:"LOOP"},"LOOP",-1)]),544),[[ge,i.item.playbackMode]]),b[13]||(b[13]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o($).item.playbackMode.$error?(t(),s("div",E1,[(t(!0),s(P,null,B(o($).item.playbackMode.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",q1,[e("div",B1,[R(e("select",{"onUpdate:modelValue":b[5]||(b[5]=a=>i.item.tier=a),id:"tier",class:"form-control",placeholder:"Tier",disabled:i.item.playbackMode==="LOOP"},b[14]||(b[14]=[e("option",{value:"BASIC"},"BASIC",-1),e("option",{value:"STANDARD"},"STANDARD",-1)]),8,N1),[[ge,i.item.tier]]),b[15]||(b[15]=e("label",{for:"tier",class:""},"Tier",-1)),o($).item.tier.$error?(t(),s("div",R1,[(t(!0),s(P,null,B(o($).item.tier.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])])]),e("div",F1,[e("div",z1,[e("div",G1,[R(e("select",{"onUpdate:modelValue":b[6]||(b[6]=a=>i.item.logoUrl=a),class:ee([o(k).getValidFeedbackCss(i.item.logoUrl),"form-select"]),id:"logoUrl"},[(t(!0),s(P,null,B(i.lookups.logos,a=>(t(),s("option",{value:a.url},m(a.id),9,j1))),256))],2),[[ge,i.item.logoUrl]]),b[16]||(b[16]=e("label",{for:"logoUrl",class:""},"Logo",-1)),o($).item.logoUrl.$error?(t(),s("div",Y1,[(t(!0),s(P,null,B(o($).item.logoUrl.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),i.item.logoUrl?(t(),s("div",W1,[e("div",K1,[e("img",{src:i.item.logoUrl,class:"img-fluid card"},null,8,Q1)])])):V("",!0)])])]),e("div",J1,[e("div",Z1,[e("div",X1,[e("div",eb,[R(e("select",{"onUpdate:modelValue":b[7]||(b[7]=a=>i.item.fillerSlateSourceLocationId=a),onChange:b[8]||(b[8]=a=>J()),class:ee([o(k).getValidFeedbackCss(i.item.fillerSlateSourceLocationId),"form-select"]),id:"fillerSlateSourceLocationId"},[(t(!0),s(P,null,B(i.lookups.sourceLocations,a=>(t(),s("option",{value:a.id},m(a.name),9,tb))),256))],34),[[ge,i.item.fillerSlateSourceLocationId]]),b[17]||(b[17]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Filler Slate Source Location",-1)),o($).item.fillerSlateSourceLocationId.$error?(t(),s("div",sb,[(t(!0),s(P,null,B(o($).item.fillerSlateSourceLocationId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",ob,[e("div",ab,[e("div",lb,[e("div",{id:"fillerSlateVodSourceId",class:ee([o(k).getValidFeedbackCss(i.selected.vodSource),"form-control"]),placeholder:"Title"},[i.selected.vodSource?(t(),s(P,{key:0},[Y(" ["+m(o(k).moment.utc(i.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(i.selected.vodSource.name),1)],64)):V("",!0)],2),b[18]||(b[18]=e("label",{for:"fillerSlateVodSourceId",class:""},"Filler Slate VOD Source",-1))]),i.item.fillerSlateSourceLocationId?(t(),s("button",{key:0,onClick:q,class:"btn btn-primary",type:"button"},b[19]||(b[19]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):V("",!0)])]),R(e("div",null,b[20]||(b[20]=[e("div",{class:"card1"},[e("video",{id:"video-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain card"})],-1)]),512),[[ke,i.selected.vodSource]])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},rb={components:{Page:at},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ib(n,v,_,M,w,H){const O=oe("Page");return t(),be(O,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const db=Ve(rb,[["render",ib]]),ub={class:"ms-1"},cb={class:"input-group"},mb={class:"table-responsive border shadow-sm"},fb={class:"table table-hover mb-0"},pb=["textContent"],vb={class:"d-flex flex-column flex-lg-row"},gb=["src"],bb={class:"ms-lg-2 mt-2 mt-lg-0"},yb={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},$b={key:0,class:"badge text-bg-success"},hb={key:1,class:"badge text-bg-warning"},wb="/api/v1/channels/search",_b={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(n){Ce("$config");const _=we().user,{appTitle:M,pageTitle:w,busy:H,infoMessage:O,warningMessage:Q,errorMessage:j,router:k,axios:G,utils:ae,toasts:N,close:L,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:J,search:u,getRowNumber:y,setSelected:K,isSelected:f}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${_==null?void 0:_.userId}/Channels/search`,baseUrl:wb,filter:{updateUrl:!0}});return fe(async()=>{$(),await u()}),(q,p)=>{const d=oe("router-link"),b=oe("PageHeader"),r=oe("m-pagination"),c=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(b,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(w)},{default:F(()=>[z(d,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ub,[e("div",cb,[R(e("input",{"onUpdate:modelValue":p[0]||(p[0]=l=>o(S).query.criteria=l),onKeyup:p[1]||(p[1]=He(l=>o(u)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[te,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:p[2]||(p[2]=l=>o(u)(1))},p[4]||(p[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(c,{errorMessage:o(j)},{default:F(()=>[e("div",mb,[e("table",fb,[p[5]||(p[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Status"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o(S).items,(l,a)=>(t(),s("tr",{key:l.channelId},[e("td",{textContent:m(o(y)(a)),class:"text-center"},null,8,pb),e("td",null,[e("div",vb,[e("div",null,[e("img",{src:l.logoUrl,class:"img-fluid border",style:{width:"6rem"}},null,8,gb)]),e("div",bb,[z(d,{to:`${n.urlView}/${l.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[l.arn?(t(),s("span",yb)):V("",!0),Y(m(l.name),1)]),_:2},1032,["to"])])])]),e("td",null,[e("div",null,[l.state==="RUNNING"?(t(),s("span",$b,m(l.state),1)):l.state==="STOPPED"?(t(),s("span",hb,m(l.state),1)):V("",!0)])]),e("td",null,m(l.playbackMode),1),e("td",null,m(l.tier),1)]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(r,{filter:o(S),search:o(u),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},kb=["id"],Sb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Tb={class:"modal-content"},Ib={class:"modal-header"},Mb={class:"modal-title"},xb={class:"modal-body p-1"},Cb={class:"row row-cols-1 row-cols-sm-2 g-2"},Vb={class:"col-sm-4"},Ob={class:"card"},Ab={key:0,class:"mt-2"},Pb={class:"col"},Lb={class:"form-floating mb-2"},Ub={class:"col ms-2 my-2"},Hb={class:"badge bg-info me-1"},Db={class:"badge bg-primary me-1"},Eb={class:"row row-cols-1 row-cols-sm-2"},qb={class:"col"},Bb={class:"form-floating mb-2"},Nb={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Rb={class:"col"},Fb={class:"form-floating mb-2"},zb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Gb={class:"col"},jb={class:"form-floating mb-2"},Yb={class:"col-sm-8"},Wb={class:"col"},Kb={class:"input-group mb-2"},Qb={class:"form-floating"},Jb={class:"table-responsive border shadow-sm"},Zb={class:"table table-sm table-hover mb-0 overflow-auto"},Xb=["textContent"],ey={class:"d-flex flex-row justify-content-start"},ty={class:"mt-1"},sy=["src"],oy={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},ay={class:"ms-2"},ly=["onClick"],ny={class:"modal-footer"},ry="/api/v1/programtemplates/search",iy={__name:"_selectProgramTemplate",emits:["close"],setup(n,{expose:v,emit:_}){const w=we().user,{appTitle:H,pageTitle:O,busy:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,security:S,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:y,getRowNumber:K,setSelected:f,isSelected:q}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${w==null?void 0:w.userId}/program-templates/select`,baseUrl:ry,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),p=_,d=ve("modalSelectProgramTemplate"),b=ye({programTemplate:null,hls:null});fe(async()=>{W(),await r()}),Ue(()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy())});const r=async()=>{await a(),await U()},c=async g=>{$.value.query.sourceLocationId=g,G.value="",await y();var E=document.getElementById(d.value),A=_e.getOrCreateInstance(E);A.show()},l=async()=>{var g=document.getElementById(d.value),E=_e.getOrCreateInstance(g);E.hide(),b.hls&&(b.hls.stopLoad(),b.hls.destroy()),p("close",b.programTemplate)},a=async g=>{try{const A=await N.get("/api/v1/lookups/video-categories/").then(h=>h.data);$.value.lookups.categories=A}catch(E){G.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},U=async g=>{try{const A=await N.get("/api/v1/lookups/video-genres/").then(h=>h.data);$.value.lookups.genres=A}catch(E){G.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},T=g=>{b.programTemplate=g,l()};return v({open:c,close:l}),(g,E)=>{const A=oe("m-pagination"),h=oe("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-hidden":"true"},[e("div",Sb,[e("div",Tb,[e("div",Ib,[e("h5",Mb,[E[8]||(E[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Y(m(o(O)),1)]),e("button",{type:"button",class:"btn-close",onClick:E[0]||(E[0]=D=>l()),"aria-label":"Close"})]),e("div",xb,[z(h,{errorMessage:o(G)},{default:F(()=>[e("div",Cb,[e("div",Vb,[e("div",Ob,[E[13]||(E[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),b.programTemplate?(t(),s("div",Ab,[e("div",Pb,[e("div",Lb,[R(e("input",{"onUpdate:modelValue":E[1]||(E[1]=D=>b.programTemplate.vodSource.video.title=D),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[te,b.programTemplate.vodSource.video.title]]),E[9]||(E[9]=e("label",{for:"title"},"Title",-1))])]),e("div",Ub,[e("div",null,[(t(!0),s(P,null,B(b.programTemplate.vodSource.video.genres,D=>(t(),s("span",Hb,m(D.genreName),1))),256)),(t(!0),s(P,null,B(b.programTemplate.vodSource.video.categories,D=>(t(),s("span",Db,m(D.categoryName),1))),256))])]),e("div",Eb,[e("div",qb,[e("div",Bb,[e("div",Nb,m(o(L).moment(b.programTemplate.vodSource.video.dateReleased).calendar()),1),E[10]||(E[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Rb,[e("div",Fb,[e("div",zb,m(o(L).moment.utc(b.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),E[11]||(E[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Gb,[e("div",jb,[R(e("textarea",{"onUpdate:modelValue":E[2]||(E[2]=D=>b.programTemplate.vodSource.video.description=D),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[te,b.programTemplate.vodSource.video.description]]),E[12]||(E[12]=e("label",{for:"description"},"Description",-1))])])])):V("",!0)])]),e("div",Yb,[e("div",Wb,[e("div",Kb,[e("div",Qb,[R(e("input",{"onUpdate:modelValue":E[3]||(E[3]=D=>o($).query.criteria=D),onKeyup:E[4]||(E[4]=He(D=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[te,o($).query.criteria]]),E[14]||(E[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:E[5]||(E[5]=D=>o(y)(1))},E[15]||(E[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Jb,[e("table",Zb,[E[16]||(E[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o($).items,(D,X)=>(t(),s("tr",{key:D.videoId},[e("td",{textContent:m(o(K)(X)),class:"text-center"},null,8,Xb),e("td",null,[e("div",ey,[e("div",null,[D.vodSource.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(D.vodSource.video.thumbnails,C=>(t(),s("div",ty,[e("img",{src:C.url,class:"img-fuild border",width:"128"},null,8,sy)]))),256)):(t(),s("img",oy))]),e("div",ay,[e("a",{onClick:C=>T(D),class:"text-wrap link-offset-2",role:"button"},m(D.name),9,ly)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(A,{filter:o($),search:o(y),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",ny,[e("button",{onClick:E[6]||(E[6]=D=>l()),class:"btn btn-primary",type:"button"},E[17]||(E[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:E[7]||(E[7]=D=>l()),class:"btn btn-secondary ms-1"},E[18]||(E[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,kb)}}},dy={key:0,class:"modal-content"},uy={class:"modal-header p-2"},cy={class:"modal-title"},my={class:"modal-body container-fluid py-1 overflow-y-auto"},fy=["errorMessage"],py={class:"row row-cols-1 row-cols-sm-2"},vy={class:"card"},gy={key:0,class:"mt-2"},by={class:"col"},yy={class:"form-floating mb-2"},$y={class:"col ms-2 my-2"},hy={class:"badge bg-info me-1"},wy={class:"badge bg-primary me-1"},_y={class:"row row-cols-1 row-cols-sm-2"},ky={class:"col"},Sy={class:"form-floating mb-2"},Ty={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Iy={class:"col"},My={class:"form-floating mb-2"},xy={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Cy={class:"col"},Vy={class:"form-floating mb-2"},Oy={class:"col"},Ay={class:"input-group mb-2"},Py={class:"form-floating"},Ly={class:"table-responsive border shadow-sm"},Uy={class:"table table-sm table-hover mb-0 overflow-auto"},Hy=["textContent"],Dy={class:"d-flex flex-row justify-content-start"},Ey={class:"mt-1"},qy=["src"],By={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Ny={class:"ms-2"},Ry=["onClick"],Fy={class:"modal-footer p-1"},zy="/api/v1/programtemplates/search",Gy={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(n,{expose:v,emit:_}){const w=we().user,{appTitle:H,pageTitle:O,busy:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,security:S,filter:$,initializeFilter:W,getQuery:J,saveQuery:u,search:y,getRowNumber:K,setSelected:f,isSelected:q}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${w==null?void 0:w.userId}/program-templates/select`,baseUrl:zy,filter:{updateUrl:!1,lookups:{genres:[]},query:{}},initializeFilter:(E,A)=>{E.value,new URLSearchParams(window.location.search),JSON.parse(localStorage.getItem(A))},getQuery:E=>["?c=",encodeURIComponent(E.query.criteria),"&p=",E.pageIndex,"&s=",E.pageSize,"&sf=",E.sortField,"&so=",E.sortOrder,"&withArn=true"].join(""),saveQuery:(E,A)=>{},successAction:()=>{b.programTemplate&&(b.programTemplate=null)}}),p=n,d=_;ve("modalSelectProgramTemplateInline");const b=ye({programTemplate:null,hls:null});fe(async()=>{W(),await r()}),Ue(()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy())});const r=async()=>{await a(),await U()},c=async E=>{debugger;$.value.query.sourceLocationId=E,G.value="",await y(),p.isOpen=!0},l=async()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy()),d("close",b.programTemplate),p.isOpen=!1},a=async E=>{try{const h=await N.get("/api/v1/lookups/video-categories/").then(D=>D.data);$.value.lookups.categories=h}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},U=async E=>{try{const h=await N.get("/api/v1/lookups/video-genres/").then(D=>D.data);$.value.lookups.genres=h}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},T=E=>{b.programTemplate=E,g()},g=()=>{if(Hls.isSupported()){b.hls&&(b.hls.stopLoad(),b.hls.destroy());var E=document.getElementById("video-select-preview");const h=b.programTemplate.vodSource.video.formats.find(X=>X.formatName==="HLS"),D=h.serverUrl+h.path;b.hls=L.createHlsStream(E,D)}};return v({open:c,close:l}),(E,A)=>{const h=oe("PageMessages"),D=oe("m-pagination");return t(),be($e,null,{default:F(()=>[n.isOpen?(t(),s("div",dy,[e("div",uy,[e("h6",cy,[A[7]||(A[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Y(m(o(O)),1)])]),e("div",my,[z(h,{errorMessage:o(G)},null,8,["errorMessage"]),e("div",{errorMessage:o(G),class:""},[e("div",py,[e("div",{class:ee([b.programTemplate?"col-sm-4":"d-none"])},[e("div",vy,[A[12]||(A[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),b.programTemplate?(t(),s("div",gy,[e("div",by,[e("div",yy,[R(e("input",{"onUpdate:modelValue":A[0]||(A[0]=X=>b.programTemplate.vodSource.video.title=X),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[te,b.programTemplate.vodSource.video.title]]),A[8]||(A[8]=e("label",{for:"title"},"Title",-1))])]),e("div",$y,[e("div",null,[(t(!0),s(P,null,B(b.programTemplate.vodSource.video.genres,X=>(t(),s("span",hy,m(X.genreName),1))),256)),(t(!0),s(P,null,B(b.programTemplate.vodSource.video.categories,X=>(t(),s("span",wy,m(X.categoryName),1))),256))])]),e("div",_y,[e("div",ky,[e("div",Sy,[e("div",Ty,m(o(L).moment(b.programTemplate.vodSource.video.dateReleased).calendar()),1),A[9]||(A[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Iy,[e("div",My,[e("div",xy,m(o(L).moment.utc(b.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),A[10]||(A[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Cy,[e("div",Vy,[R(e("textarea",{"onUpdate:modelValue":A[1]||(A[1]=X=>b.programTemplate.vodSource.video.description=X),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[te,b.programTemplate.vodSource.video.description]]),A[11]||(A[11]=e("label",{for:"description"},"Description",-1))])])])):V("",!0)])],2),e("div",{class:ee([[b.programTemplate?"col-sm-8":"col-sm-12"],"mt-2 mt-sm-0"])},[e("div",Oy,[e("div",Ay,[e("div",Py,[R(e("input",{"onUpdate:modelValue":A[2]||(A[2]=X=>o($).query.criteria=X),onKeyup:A[3]||(A[3]=He(X=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[te,o($).query.criteria]]),A[13]||(A[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:A[4]||(A[4]=X=>o(y)(1))},A[14]||(A[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Ly,[e("table",Uy,[A[15]||(A[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(o($).items,(X,C)=>(t(),s("tr",{key:X.videoId},[e("td",{textContent:m(o(K)(C)),class:"text-center"},null,8,Hy),e("td",null,[e("div",Dy,[e("div",null,[X.vodSource.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(X.vodSource.video.thumbnails,ne=>(t(),s("div",Ey,[e("img",{src:ne.url,class:"img-fuild border",width:"128"},null,8,qy)]))),256)):(t(),s("img",By))]),e("div",Ny,[e("a",{onClick:ne=>T(X),class:"text-wrap link-offset-2",role:"button"},m(X.name),9,Ry)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(D,{filter:o($),search:o(y),showPerPage:!0},null,8,["filter","search"])],2)])],8,fy)]),e("div",Fy,[e("button",{onClick:A[5]||(A[5]=X=>l()),class:"btn btn-primary btn-sm",type:"button"},A[16]||(A[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:A[6]||(A[6]=X=>l(!1)),class:"btn btn-secondary btn-sm ms-1"},A[17]||(A[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):V("",!0)]),_:1})}}},jy=["id"],Yy={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Wy={class:"modal-content"},Ky={class:"modal-header"},Qy={class:"modal-title"},Jy={class:"modal-body"},Zy={key:0},Xy={class:"row row-cols-1 row-cols-sm-3"},e$={class:"col-sm-3"},t$={class:"form-floating mb-2"},s$={key:0,class:"d-block invalid-feedback"},o$={class:"col-sm-3"},a$={class:"form-floating mb-2"},l$={key:0,class:"d-block invalid-feedback"},n$={class:"col-sm-6"},r$={class:"form-floating"},i$={id:"programTemplateId",class:"form-control",placeholder:"Title"},d$={key:0,class:"d-block invalid-feedback"},u$={key:0},c$={class:"row row-cols-1 row-cols-sm-2"},m$={class:"col"},f$={class:"row row-cols-1"},p$={class:"col"},v$={class:"form-floating mb-2"},g$={class:"col"},b$={class:"form-floating mb-2"},y$={class:"row row-cols-1 row-cols-sm-3"},$$={class:"col"},h$={class:"form-floating mb-2"},w$={class:"col"},_$={class:"form-floating mb-2"},k$={class:"col"},S$={class:"form-floating mb-2"},T$={class:"row row-cols-1 row-cols-sm-3"},I$={class:"col"},M$={class:"form-floating mb-2"},x$={class:"col"},C$={class:"form-floating mb-2"},V$={key:1},O$={class:"table-responsive border mt-1"},A$={class:"table table-sm mb-0"},P$=["onUpdate:modelValue","onChange"],L$=["value"],U$={key:0,class:"modal-footer"},H$=["disabled"],D$={__name:"_addProgram",props:{channelId:{type:String,required:!0},eventId:{type:String,required:!0},dateScheduledStart:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),W=_,J=n,u=ve(),y=ve(),K=ve("modalAddProgramFromTemplate"),f=ye({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),q=(ne,Z,se)=>ne.length<=0?!0:ne.every(me=>me.vodSourceId),p={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},programTemplateId:{required:le.withMessage("Program Template is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:le.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:le.withMessage("Ad Break is not properly configured.",q),$each:le.forEach({vodSourceId:{required:le.withMessage("Vod Source is required.",re)}})}}},d=Ie(p,f);fe(async()=>{b()});const b=async()=>{const ne=f;Q.value.clear(),G.value="";const Z=L.moment(J.dateScheduledStart),x=Z.format("YYYY-MM-DD HH:mm"),me=Z.format("YYYYMMDD_HHmm")+"_PRG_";ne.eventId=J.eventId,ne.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},ne.selected={programTemplate:null},ne.item={programTemplateId:null,name:me,dateScheduledStart:x,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await c(),d.value.$reset();var ce=document.getElementById(K.value),de=_e.getOrCreateInstance(ce);de.show()},r=async ne=>{if(!ne){var Z=document.getElementById(K.value),se=_e.getOrCreateInstance(Z);se.hide(),W("cancel");return}if(!await d.value.$validate()){window.scrollTo(0,0);return}const me=f,ce=L.moment(me.item.dateScheduledStart).utc(!0).format(),de=L.moment(me.item.dateScheduledStart).add(me.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();f.item={eventId:J.eventId,programTemplateId:me.selected.programTemplate.programTemplateId,channelId:J.channelId,name:me.item.name,dateScheduledStart:ce,dateScheduledEnd:de,adBreaks:me.selected.programTemplate.adBreaks.map(ue=>({sourceLocationId:ue.sourceLocationId,vodSourceId:ue.vodSourceId,offsetMillis:ue.offsetMillis,durationInMillis:ue.durationInMillis}))};try{await N.post("/api/v1/programs/",f.item).then(pe=>{i.success("Add New Program",`Program [${f.item.name}] was added to this channel.`)});var Z=document.getElementById(K.value),se=_e.getOrCreateInstance(Z);se.hide(),W("confirm",f.item)}catch(ue){G.value=L.getErrorMessageAsHtml(ue)}},c=async()=>{await g(),await l(),await a()},l=async()=>{try{const ne=`/api/v1/channelOutputs/get-by-channel/${J.channelId}`;await N.get(ne).then(Z=>{f.lookups.channelOutputs=Z.data}),f.item.programTemplateId&&await U()}catch(ne){G.value=L.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{}},a=async()=>{try{const ne=`/api/v1/programTemplates/lookup/by-channel/${J.channelId}`;await N.get(ne).then(Z=>{f.lookups.programTemplates=Z.data,f.lookups.programTemplates.length===1&&(f.item.programTemplateId=f.lookups.programTemplates[0].id)}),f.item.programTemplateId&&await U(f.item.programTemplateId)}catch(ne){G.value=L.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{}},U=async ne=>{await T(ne)},T=async ne=>{try{const Z=`/api/v1/programTemplates/${ne}/`;await N.get(Z).then(me=>{f.selected.programTemplate=me.data;const ce=f.selected.programTemplate;ce.startOffsetTime=L.moment.utc(ce.startOffsetMillis).format("HH:mm:ss"),ce.endOffsetTime=L.moment.utc(ce.endOffsetMillis).format("HH:mm:ss"),ce.durationTime=L.moment.utc(ce.durationInMillis).format("HH:mm:ss"),ce.adBreaksDurationTime=L.moment.utc(ce.adBreaksDurationInMillis).format("HH:mm:ss"),ce.totalProgramTemplateDurationTime=L.moment.utc(ce.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),f.item.programTemplateId=ce.programTemplateId,f.item.adBreaks=ce.adBreaks});const se=f,x=se.lookups.channelOutputs[0].outputType;await A(se.selected.programTemplate.sourceLocationId,x)}catch(Z){G.value=L.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},g=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(Z=>{f.lookups.sourceLocations=Z.data,f.lookups.sourceLocations.length===1&&(f.item.sourceLocationId=f.lookups.sourceLocations[0].id)}),f.item.sourceLocationId&&await E(f.item.sourceLocationId)}catch(ne){G.value=L.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{}},E=async ne=>{try{let Z=`/api/v1/vodSources/lookup/source-location/${ne}`;await N.get(Z).then(se=>{f.lookups.vodSources=se.data})}catch(Z){G.value=L.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},A=async(ne,Z)=>{try{let se=`/api/v1/vodsources/lookup/output-type/${Z}`;await N.get(se).then(x=>{f.lookups.adBreakVodSources=x.data})}catch(se){G.value=L.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{}},h=ne=>{const Z=f.lookups.adBreakVodSources.find(se=>se.id==ne.vodSourceId);ne.sourceLocationId=Z.sourceLocationId},D=async ne=>{C.value=!1,ne&&(await U(ne.programTemplateId),X())},X=()=>{if(Hls.isSupported()){f.hls&&(f.hls.stopLoad(),f.hls.destroy());var ne=document.getElementById("video-add-program");const se=f.selected.programTemplate.vodSource.video.formats.find(me=>me.formatName==="HLS"),x=se.serverUrl+se.path;f.hls=L.createHlsStream(ne,x)}},C=ve(!1);return v({open:b,close:r}),(ne,Z)=>{const se=oe("PageMessages");return t(),be($e,null,{default:F(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-hidden":"false"},[e("div",Yy,[e("div",Wy,[e("div",Ky,[e("h5",Qy,[Z[13]||(Z[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:Z[0]||(Z[0]=x=>r(!1)),"aria-label":"Close"})]),e("div",Jy,[z(se,{errorMessage:o(G),vuelidate:o(d)},null,8,["errorMessage","vuelidate"]),z(Gy,{ref_key:"modalSelectProgramTemplateInline",ref:y,isOpen:C.value,onClose:D},null,8,["isOpen"]),C.value?V("",!0):(t(),s("div",Zy,[e("div",Xy,[e("div",e$,[e("div",t$,[R(e("input",{"onUpdate:modelValue":Z[1]||(Z[1]=x=>f.item.name=x),id:"name",class:"form-control",placeholder:"Name"},null,512),[[te,f.item.name]]),Z[14]||(Z[14]=e("label",{for:"name",class:""},"Name",-1)),o(d).item.name.$error?(t(),s("div",s$,[(t(!0),s(P,null,B(o(d).item.name.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",o$,[e("div",a$,[R(e("input",{"onUpdate:modelValue":Z[2]||(Z[2]=x=>f.item.dateScheduledStart=x),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[te,f.item.dateScheduledStart]]),Z[15]||(Z[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(d).item.dateScheduledStart.$error?(t(),s("div",l$,[(t(!0),s(P,null,B(o(d).item.dateScheduledStart.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),e("div",n$,[e("div",{onClick:Z[3]||(Z[3]=x=>C.value=!C.value),class:"input-group mb-2"},[e("div",r$,[e("div",i$,[f.selected.programTemplate?(t(),s(P,{key:0},[Y(m(f.selected.programTemplate.name),1)],64)):V("",!0)]),Z[16]||(Z[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),Z[17]||(Z[17]=e("button",{class:"btn btn-primary",type:"button"},[e("i",{class:"fa-solid fa-filter"})],-1))]),o(d).item.programTemplateId.$error?(t(),s("div",d$,[(t(!0),s(P,null,B(o(d).item.programTemplateId.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):V("",!0)])]),f.selected.programTemplate?(t(),s("div",u$,[e("div",c$,[Z[25]||(Z[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",m$,[e("div",f$,[f.selected.programTemplate?(t(),s(P,{key:0},[e("div",p$,[e("div",v$,[R(e("input",{"onUpdate:modelValue":Z[4]||(Z[4]=x=>f.selected.programTemplate.sourceLocation.name=x),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[te,f.selected.programTemplate.sourceLocation.name]]),Z[18]||(Z[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",g$,[e("div",b$,[R(e("input",{"onUpdate:modelValue":Z[5]||(Z[5]=x=>f.selected.programTemplate.vodSource.name=x),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[te,f.selected.programTemplate.vodSource.name]]),Z[19]||(Z[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):V("",!0)]),e("div",y$,[e("div",$$,[e("div",h$,[R(e("input",{"onUpdate:modelValue":Z[6]||(Z[6]=x=>f.selected.programTemplate.startOffsetTime=x),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[te,f.selected.programTemplate.startOffsetTime]]),Z[20]||(Z[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",w$,[e("div",_$,[R(e("input",{"onUpdate:modelValue":Z[7]||(Z[7]=x=>f.selected.programTemplate.endOffsetTime=x),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[te,f.selected.programTemplate.endOffsetTime]]),Z[21]||(Z[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",k$,[e("div",S$,[R(e("input",{"onUpdate:modelValue":Z[8]||(Z[8]=x=>f.selected.programTemplate.durationTime=x),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[te,f.selected.programTemplate.durationTime]]),Z[22]||(Z[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",T$,[e("div",I$,[e("div",M$,[R(e("input",{"onUpdate:modelValue":Z[9]||(Z[9]=x=>f.selected.programTemplate.adBreaksDurationTime=x),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[te,f.selected.programTemplate.adBreaksDurationTime]]),Z[23]||(Z[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",x$,[e("div",C$,[R(e("input",{"onUpdate:modelValue":Z[10]||(Z[10]=x=>f.selected.programTemplate.totalProgramTemplateDurationTime=x),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[te,f.selected.programTemplate.totalProgramTemplateDurationTime]]),Z[24]||(Z[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):V("",!0),f.selected.programTemplate&&f.selected.programTemplate.adBreaks.length>0?(t(),s("div",V$,[Z[27]||(Z[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",O$,[e("table",A$,[Z[26]||(Z[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(P,null,B(f.item.adBreaks,(x,me)=>(t(),s("tr",null,[e("td",null,m(me+1),1),e("td",null,m(o(L).moment.utc(x.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(L).moment.utc(x.durationInMillis).format("HH:mm:ss")),1),e("td",null,[f.lookups.adBreakVodSources.length>0?(t(),s(P,{key:0},[R(e("select",{"onUpdate:modelValue":ce=>x.vodSourceId=ce,onChange:ce=>h(x),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(P,null,B(f.lookups.adBreakVodSources,ce=>(t(),s(P,null,[ce.durationInMillis===x.durationInMillis?(t(),s("option",{key:0,value:ce.id}," ["+m(o(L).moment.utc(ce.durationInMillis).format("HH:mm:ss"))+"] "+m(ce.name),9,L$)):V("",!0)],64))),256))],40,P$),[[ge,x.vodSourceId]]),o(d).item.adBreaks.$each.$response?(t(!0),s(P,{key:0},B(o(d).item.adBreaks.$each.$response.$errors[me].vodSourceId,ce=>(t(),s("div",{key:ce,class:"d-block invalid-feedback"},m(ce.$message),1))),128)):V("",!0)],64)):V("",!0)])]))),256))])])])])):V("",!0)]))]),C.value?V("",!0):(t(),s("div",U$,[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:Z[11]||(Z[11]=x=>r(!0)),class:"btn btn-primary",type:"button"},Z[28]||(Z[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,H$),e("button",{onClick:Z[12]||(Z[12]=x=>r(!1)),class:"btn btn-secondary ms-1"},Z[29]||(Z[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),z(iy,{ref_key:"modalSelectProgramTemplate",ref:u,onClose:D},null,512)],8,jy)]),_:1})}}},E$=["id"],q$={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},B$={class:"modal-content"},N$={class:"modal-header"},R$={class:"modal-title"},F$={class:"modal-body"},z$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},G$=["innerHTML"],j$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Y$={key:2,class:"container"},W$={class:"row row-cols-1 row-cols-sm-2"},K$={class:"col"},Q$={class:"form-floating mb-2"},J$={class:"col"},Z$={class:"form-floating mb-2"},X$={class:"row row-cols-1 row-cols-sm-3 mt-2"},eh={class:"col"},th={class:"form-floating mb-2"},sh={class:"col"},oh={class:"form-floating mb-2"},ah={key:0,class:"d-block invalid-feedback"},lh={class:"col"},nh={class:"form-floating mb-2"},rh={key:0,class:"d-block invalid-feedback"},ih={class:"row row-cols-1 row-cols-sm-3"},dh={class:"col"},uh={class:"form-floating mb-2"},ch={class:"col"},mh={class:"form-floating mb-2"},fh={class:"col"},ph={class:"form-floating mb-2"},vh={class:"row row-cols-1 row-cols-sm-3"},gh={class:"col"},bh={class:"form-floating mb-2"},yh={class:"col"},$h={class:"form-floating mb-2"},hh={key:0,class:"col"},wh={class:"form-floating mb-2"},_h={key:0},kh={class:"table-responsive border mt-1"},Sh={class:"table table-sm mb-0"},Th={class:"align-middle"},Ih=["onUpdate:modelValue","onChange"],Mh=["value"],xh={class:"modal-footer"},Ch=["disabled"],ft={__name:"_editProgram",props:{programId:{type:String,required:!0},dateScheduledStart:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Edit Program"}),W=_,J=n,u=ve("modalEditProgram"),y=ye({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),K={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:le.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:le.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:le.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{f.value.$reset(),await q()});const q=async(l,a)=>{const U=y;Q.value.clear(),G.value="",U.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},U.item=null,await d(),await b();var T=document.getElementById(u.value),g=_e.getOrCreateInstance(T);g.show()},p=async l=>{if(!l){var a=document.getElementById(u.value),U=_e.getOrCreateInstance(a);U.hide(),W("cancel");return}const T=y,g=L.moment(T.item.dateScheduledStart).utc(!0).format(),E={programId:J.programId,name:T.item.name,dateScheduledStart:g,adBreaks:T.item.adBreaks.map(A=>({sourceLocationId:A.sourceLocationId,vodSourceId:A.vodSourceId,offsetMillis:A.offsetMillis,durationInMillis:A.durationInMillis}))};try{await N.put("/api/v1/programs/",E).then(X=>{i.success("Edit Program","Program was edited.")});var a=document.getElementById(u.value),U=_e.getOrCreateInstance(a);U.hide(),W("confirm")}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0);return}finally{}},d=async()=>{try{const l=`/api/v1/programs/${J.programId}/`;await N.get(l).then(T=>{y.item=T.data;const g=y.item,h=L.moment.utc(g.dateScheduledStart).format("YYYY-MM-DD HH:mm");y.item.dateScheduledStart=h,g.startOffsetTime=L.moment.utc(g.startOffsetMillis).format("HH:mm:ss"),g.endOffsetTime=L.moment.utc(g.endOffsetMillis).format("HH:mm:ss"),g.durationTime=L.moment.utc(g.durationInMillis).format("HH:mm:ss"),g.adBreaksDurationTime=L.moment.utc(g.adBreaksDurationInMillis).format("HH:mm:ss"),g.totalProgramTemplateDurationTime=L.moment.utc(g.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const a=y,U=a.item.channel.outputs[0].outputType;await r(a.item.sourceLocationId,U)}catch(l){G.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},b=async()=>{},r=async(l,a)=>{try{let U=`/api/v1/vodsources/lookup/output-type/${a}`;await N.get(U).then(T=>{y.lookups.adBreakVodSources=T.data})}catch(U){G.value=L.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},c=l=>{const a=y.lookups.adBreakVodSources.find(U=>U.id==l.vodSourceId);l.sourceLocationId=a.sourceLocationId};return v({open:q,close:p}),(l,a)=>(t(),s("div",{class:"modal show","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"false"},[e("div",q$,[e("div",B$,[e("div",N$,[e("h5",R$,[a[14]||(a[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=U=>p(!1)),"aria-label":"Close"})]),e("div",F$,[o(G)?(t(),s("div",z$,[a[15]||(a[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,G$)])):V("",!0),o(Q).size>0?(t(),s("div",j$,[a[16]||(a[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),U=>(t(),s("li",null,m(U),1))),256))])])):V("",!0),y.item?(t(),s("div",Y$,[e("div",W$,[e("div",K$,[e("div",Q$,[y.item.sourceLocation?R((t(),s("input",{key:0,"onUpdate:modelValue":a[1]||(a[1]=U=>y.item.sourceLocation.name=U),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[te,y.item.sourceLocation.name]]):V("",!0),a[17]||(a[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",J$,[e("div",Z$,[y.item.vodSource?R((t(),s("input",{key:0,"onUpdate:modelValue":a[2]||(a[2]=U=>y.item.vodSource.name=U),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[te,y.item.vodSource.name]]):V("",!0),a[18]||(a[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",X$,[e("div",eh,[e("div",th,[y.item.relativeProgram?R((t(),s("input",{key:0,"onUpdate:modelValue":a[3]||(a[3]=U=>y.item.relativeProgram.name=U),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[te,y.item.relativeProgram.name]]):V("",!0),a[19]||(a[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",sh,[e("div",oh,[R(e("input",{"onUpdate:modelValue":a[4]||(a[4]=U=>y.item.name=U),id:"name",class:ee([o(L).getValidFeedbackCss(y.item.name),"form-control"]),placeholder:"Name"},null,2),[[te,y.item.name]]),a[20]||(a[20]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",ah,[(t(!0),s(P,null,B(o(f).item.name.$errors,U=>(t(),s("div",{key:U.$uid},m(U.$message),1))),128))])):V("",!0)])]),e("div",lh,[e("div",nh,[R(e("input",{"onUpdate:modelValue":a[5]||(a[5]=U=>y.item.dateScheduledStart=U),type:"datetime-local",id:"dateScheduledStart",class:ee([o(L).getValidFeedbackCss(y.item.dateScheduledStart),"form-control"])},null,2),[[te,y.item.dateScheduledStart]]),a[21]||(a[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(f).item.dateScheduledStart.$error?(t(),s("div",rh,[(t(!0),s(P,null,B(o(f).item.dateScheduledStart.$errors,U=>(t(),s("div",{key:U.$uid},m(U.$message),1))),128))])):V("",!0)])])]),e("div",null,[e("div",ih,[e("div",dh,[e("div",uh,[R(e("input",{"onUpdate:modelValue":a[6]||(a[6]=U=>y.item.startOffsetTime=U),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.startOffsetTime]]),a[22]||(a[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",ch,[e("div",mh,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=U=>y.item.endOffsetTime=U),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.endOffsetTime]]),a[23]||(a[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",fh,[e("div",ph,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=U=>y.item.durationTime=U),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.durationTime]]),a[24]||(a[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",vh,[e("div",gh,[e("div",bh,[R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=U=>y.item.adBreaksDurationTime=U),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.adBreaksDurationTime]]),a[25]||(a[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",yh,[e("div",$h,[R(e("input",{"onUpdate:modelValue":a[10]||(a[10]=U=>y.item.totalProgramTemplateDurationTime=U),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.totalProgramTemplateDurationTime]]),a[26]||(a[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),y.item.relativeProgram?(t(),s("div",hh,[e("div",wh,[R(e("input",{"onUpdate:modelValue":a[11]||(a[11]=U=>y.item.relativeProgram.name=U),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[te,y.item.relativeProgram.name]]),a[27]||(a[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):V("",!0)])]),a[30]||(a[30]=e("hr",null,null,-1)),y.item?(t(),s("div",_h,[a[29]||(a[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",kh,[e("table",Sh,[a[28]||(a[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(P,null,B(y.item.adBreaks,(U,T)=>(t(),s("tr",Th,[e("td",null,m(T+1),1),e("td",null,m(o(L).moment.utc(U.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(L).moment.utc(U.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":g=>U.vodSourceId=g,onChange:g=>c(U),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(P,null,B(y.lookups.adBreakVodSources,g=>(t(),s(P,null,[g.durationInMillis===U.durationInMillis?(t(),s("option",{key:0,value:g.id}," ["+m(o(L).moment.utc(g.durationInMillis).format("HH:mm:ss"))+"] "+m(g.name),9,Mh)):V("",!0)],64))),256))],40,Ih),[[ge,U.vodSourceId]])])]))),256))])])])])):V("",!0)])):V("",!0)]),e("div",xh,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:a[12]||(a[12]=U=>p(!0)),class:"btn btn-primary ms-2",type:"button"},a[31]||(a[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ch),e("button",{onClick:a[13]||(a[13]=U=>p(!1)),class:"btn btn-secondary ms-1"},a[32]||(a[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,E$))}},Vh={class:"input-group"},Oh=["value"],Ah={class:"card m-1"},Ph={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:v,pageTitle:_,busy:M,infoMessage:w,warningMessage:H,errorMessage:O,router:Q,axios:j,utils:k,toasts:G,close:ae,security:N}=he({appTitle:"Arcadian-FAST",pageTitle:"Schedule Channel Programs"}),L=n,i=ve(null),S={viewType:"Week",cellDuration:15,heightSpec:"Full",startDate:Ge.DayPilot.Date.today(),onTimeRangeSelected:p=>{var d=p.control;const b={start:p.start,end:p.end,id:Ge.DayPilot.guid(),text:"NEW",tags:{type:"new"}};d.events.add(b);var r=d.events.find(b.id);K(r)},onBeforeEventRender:p=>{},eventDeleteHandling:"Disabled",onEventMoved:async p=>{const d=p.newStart.value,b=p.e.id(),r=k.moment(d).utc(!0).format();try{let c="/api/v1/programs/scheduled-date-start";const l={programId:b,dateScheduledStart:r};await j.put(c,l).then(a=>{G.success("Program date scheduled start was edited.")})}catch(c){O.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0);return}finally{}await u()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async p=>{var d=p.e.id();f(d)},contextMenu:new Ge.DayPilot.Menu([{text:"Clone",onClick:async p=>{const d=p.source.id();try{let b=`/api/v1/programs/${d}/clone`;await j.post(b).then(r=>{G.success("Clone Program","Program was cloned.")})}catch(b){O.value=k.getErrorMessageAsHtml(b),window.scrollTo(0,0);return}finally{await u()}}},{text:"Delete",onClick:async p=>{if(!confirm("Do you want to remove this program?"))return;const b=p.source.id();try{let r=`/api/v1/programs/${b}/`;await j.delete(r).then(c=>{G.success("Delete Program","Program was deleted.")}),i.value.control.events.remove(p.source)}catch(r){O.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0);return}finally{await u()}}}])},$=ve([]),W=()=>{i.value.control.update({events:$.value})},J=ye({lookups:{visibilityTypes:[],timezones:[{id:"",name:"UTC"},{id:"America/Los_Angeles",name:"(-07:00) America/Los_Angeles"},{id:"Asia/Manila",name:"(+08:00) Asia/Manila"},{id:"Australia/Brisbane",name:"(+10:00) Australia/Brisbane"},{id:"Europe/Berlin",name:"(+02:00) Europe/Berlin"},{id:"Pacific/Honolulu",name:"(-10:00) Pacific/Honolulu"}]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null},selectedTimezone:"",displayUtc:!1});fe(async()=>{J.selectedTimezone=localStorage.getItem("selectedTimezone")||"",await u()});const u=async()=>{await y(),await W()},y=async()=>{const p=J;if(!M.value)try{M.value=!0,O.value="";const d=`/api/v1/channels/${L.id}/`;await j.get(d).then(b=>{p.item=b.data;const r=p.item.outputs,c=p.item.programs.map(l=>{let a=`${l.name}`,U=`[${l.name}]`,T=k.moment(l.dateScheduledStart).utc(!1).format(),g=k.moment(l.dateScheduledEnd).utc(!1).format();const E=J.selectedTimezone;return E&&(T=k.moment(l.dateScheduledStart).tz(E).utc(!0).format(),g=k.moment(l.dateScheduledEnd).tz(E).utc(!0).format()),{start:T,end:g,id:l.programId,text:a,html:l.arn?`<div><span class="fas fa-fw fa-check-circle text-success me-1"></span>${a}</div>`:a,toolTip:U,backColor:l.arn?"azure":null,barColor:l.arn?"green":null}});$.value=c})}catch(d){O.value=k.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{M.value=!1}},K=async p=>{const d=Ae(D$,{channelId:L.id,eventId:p.id(),dateScheduledStart:p.start().value},{chore:!0,keepInitial:!1}),{data:b,isCanceled:r}=await d.reveal();d.closeAll(),!r&&b&&await u()},f=async p=>{const d=Ae(ft,{programId:p},{chore:!0,keepInitial:!1}),{data:b,isCanceled:r}=await d.reveal();d.closeAll(),r||await u()},q=async()=>{localStorage.setItem("selectedTimezone",J.selectedTimezone),await u()};return(p,d)=>{const b=oe("router-link"),r=oe("PageHeader"),c=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(_)},{default:F(()=>[e("div",Vh,[d[3]||(d[3]=e("span",{class:"input-group-text fw-bold"},"Timezone",-1)),R(e("select",{"onUpdate:modelValue":d[0]||(d[0]=l=>J.selectedTimezone=l),onChange:d[1]||(d[1]=l=>q()),class:"form-select"},[(t(!0),s(P,null,B(J.lookups.timezones,l=>(t(),s("option",{value:l.id},m(l.name),9,Oh))),256))],544),[[ge,J.selectedTimezone]])]),e("button",{onClick:d[2]||(d[2]=l=>u()),class:"btn btn-secondary ms-2"},d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(b,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:F(()=>d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(c,{errorMessage:o(O)},{default:F(()=>[e("div",Ah,[z(o(Ge.DayPilotCalendar),{id:"dp",config:S,ref_key:"calendarRef",ref:i},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},Lh=["id"],Uh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Hh={class:"modal-content"},Dh={class:"modal-header"},Eh={class:"modal-title"},qh={class:"modal-body"},Bh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Nh=["innerHTML"],Rh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Fh={class:"container"},zh={class:"row row-cols-1 row-cols-sm-3"},Gh={class:"col"},jh={class:"form-floating mb-2"},Yh=["disabled"],Wh=["value"],Kh={class:"col"},Qh={class:"form-floating mb-2"},Jh={key:0,class:"d-block invalid-feedback"},Zh={class:"col"},Xh={class:"form-floating mb-2"},ew={key:0,class:"d-block invalid-feedback"},tw={class:"row row-cols-sm-2"},sw={class:"col"},ow={class:"form-floating mb-2"},aw=["value"],lw={key:0,class:"d-block invalid-feedback"},nw={class:"col"},rw={class:"form-floating mb-2"},iw=["value"],dw={key:0,class:"d-block invalid-feedback"},uw={class:"col"},cw={class:"input-group mb-1"},mw={class:"form-floating"},fw={key:0,class:"input-group-text"},pw={key:0},vw={key:1},gw={key:2},bw={key:3,class:"d-block invalid-feedback"},yw={class:"col"},$w={class:"input-group mb-1"},hw={class:"form-floating"},ww={key:0,class:"input-group-text"},_w={key:0},kw={key:1},Sw={key:2,class:"d-block invalid-feedback"},Tw={class:"table-responsive border mt-1"},Iw={class:"table"},Mw={class:"input-group mb-1"},xw=["onUpdate:modelValue"],Cw={key:0,class:"input-group-text"},Vw=["onUpdate:modelValue"],Ow=["value"],Aw=["onUpdate:modelValue"],Pw=["value"],Lw=["onClick"],Uw={class:"modal-footer"},Hw=["disabled"],Dw={__name:"_addProgram",emits:["refresh"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),W=_,J=ve(),u=ve("modalAddProgram"),y=ye({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),K={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:le.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:le.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:le.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{f.value.$reset()});const q=async A=>{J.value=A;const h=y;Q.value.clear(),G.value="";const D=L.moment().local().add(2,"m"),C=D.format("YYYY-MM-DD HH:mm"),ne=D.format("YYYY_MM_DD")+"_PROGRAM_";h.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},h.item={name:ne,relativeProgramId:null,dateScheduledStart:C,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await b(),f.value.$reset();var Z=document.getElementById(u.value),se=_e.getOrCreateInstance(Z);se.show()},p=async()=>{var A=document.getElementById(u.value),h=_e.getOrCreateInstance(A);h.hide(),W("refresh")},d=async()=>{const A=y;if(H.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const X=A.item;delete X.vodSource,X.channelId=J.value;var D=X.dateScheduledStart;X.dateScheduledStart=L.moment(D).utc().format(),await N.post("/api/v1/programs/",X).then(C=>{i.success("Add Program","Program added to Channel",{async onClose(){}})}),await p()}catch(X){G.value=L.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{H.value=!1}},b=async()=>{await r(),await l(),await U()},r=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(h=>{y.lookups.sourceLocations=h.data,y.lookups.sourceLocations.length===1&&(y.item.sourceLocationId=y.lookups.sourceLocations[0].id)}),y.item.sourceLocationId&&await c(y.item.sourceLocationId)}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},c=async A=>{try{let h=`/api/v1/vodSources/lookup/source-location/${A}`;await N.get(h).then(D=>{y.lookups.vodSources=D.data})}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},l=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(h=>{y.lookups.adBreakSourceLocations=h.data})}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},a=async A=>{try{let h=`/api/v1/vodSources/lookup/source-location/${A}`;await N.get(h).then(D=>{y.lookups.adBreakVodSources=D.data})}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},U=async()=>{try{const A=`/api/v1/programs/lookup/?channelId=${J.value}`;await N.get(A).then(h=>{if(y.lookups.channelPrograms=h.data,y.lookups.channelPrograms.length===1){const X=y.lookups.channelPrograms[0];y.item.relativeProgramId=X.id}})}catch(A){G.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},T=()=>{const A={offsetMillis:0,sourceLocationId:null,vodSourceId:null},h=y.item.adBreaks.length;if(h>0){const D=y.item.adBreaks[h-1];A.offsetMillis=D.offsetMillis+1e4}y.item.adBreaks.push(A)},g=A=>{y.item.adBreaks.splice(A,1)},E=()=>{const A=y.item.vodSource;y.item.vodSourceId=A.id};return v({open:q,close:p}),(A,h)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Uh,[e("div",Hh,[e("div",Dh,[e("h5",Eh,[h[12]||(h[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:h[0]||(h[0]=D=>p()),"aria-label":"Close"})]),e("div",qh,[o(G)?(t(),s("div",Bh,[h[13]||(h[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Nh)])):V("",!0),o(Q).size>0?(t(),s("div",Rh,[h[14]||(h[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),D=>(t(),s("li",null,m(D),1))),256))])])):V("",!0),e("div",Fh,[e("div",zh,[e("div",Gh,[e("div",jh,[R(e("select",{"onUpdate:modelValue":h[1]||(h[1]=D=>y.item.relativeProgramId=D),class:"form-select",id:"sourceLocationId",disabled:y.lookups.channelPrograms.length<=0},[(t(!0),s(P,null,B(y.lookups.channelPrograms,D=>(t(),s("option",{value:D.id},m(D.name),9,Wh))),256))],8,Yh),[[ge,y.item.relativeProgramId]]),h[15]||(h[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",Kh,[e("div",Qh,[R(e("input",{"onUpdate:modelValue":h[2]||(h[2]=D=>y.item.name=D),id:"name",class:"form-control",placeholder:"Name"},null,512),[[te,y.item.name]]),h[16]||(h[16]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",Jh,[(t(!0),s(P,null,B(o(f).item.name.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)])]),e("div",Zh,[e("div",Xh,[R(e("input",{"onUpdate:modelValue":h[3]||(h[3]=D=>y.item.dateScheduledStart=D),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[te,y.item.dateScheduledStart]]),h[17]||(h[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(f).item.dateScheduledStart.$error?(t(),s("div",ew,[(t(!0),s(P,null,B(o(f).item.dateScheduledStart.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)])])]),e("div",tw,[e("div",sw,[e("div",ow,[R(e("select",{"onUpdate:modelValue":h[4]||(h[4]=D=>y.item.sourceLocationId=D),onChange:h[5]||(h[5]=D=>c(y.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(P,null,B(y.lookups.sourceLocations,D=>(t(),s("option",{value:D.id},m(D.name),9,aw))),256))],544),[[ge,y.item.sourceLocationId]]),h[18]||(h[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(f).item.sourceLocationId.$error?(t(),s("div",lw,[(t(!0),s(P,null,B(o(f).item.sourceLocationId.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)])]),e("div",nw,[e("div",rw,[R(e("select",{"onUpdate:modelValue":h[6]||(h[6]=D=>y.item.vodSource=D),onChange:h[7]||(h[7]=D=>E()),class:"form-select",id:"vodSourceId"},[(t(!0),s(P,null,B(y.lookups.vodSources,D=>(t(),s("option",{value:D},m(D.name),9,iw))),256))],544),[[ge,y.item.vodSource]]),h[19]||(h[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(f).item.vodSourceId.$error?(t(),s("div",dw,[(t(!0),s(P,null,B(o(f).item.vodSourceId.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)])]),e("div",uw,[e("div",cw,[e("div",mw,[R(e("input",{"onUpdate:modelValue":h[8]||(h[8]=D=>y.item.startOffsetMillis=D),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[te,y.item.startOffsetMillis]]),h[20]||(h[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),y.item.startOffsetMillis>0?(t(),s("span",fw,m(o(L).moment.utc(y.item.startOffsetMillis).format("HH:mm:ss")),1)):V("",!0)]),y.item.startOffsetMillis>0&&y.item.startOffsetMillis<3e4?(t(),s("div",pw,h[21]||(h[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):V("",!0),y.item.startOffsetMillis>y.item.endOffsetMillis&&y.item.endOffsetMillis>0?(t(),s("div",vw,h[22]||(h[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):V("",!0),y.item.vodSource&&y.item.startOffsetMillis>y.item.vodSource.durationInMillis?(t(),s("div",gw,h[23]||(h[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):V("",!0),o(f).item.startOffsetMillis.$error?(t(),s("div",bw,[(t(!0),s(P,null,B(o(f).item.startOffsetMillis.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)]),e("div",yw,[e("div",$w,[e("div",hw,[R(e("input",{"onUpdate:modelValue":h[9]||(h[9]=D=>y.item.endOffsetMillis=D),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[te,y.item.endOffsetMillis]]),h[24]||(h[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),y.item.endOffsetMillis>0?(t(),s("span",ww,m(o(L).moment.utc(y.item.endOffsetMillis).format("HH:mm:ss")),1)):V("",!0)]),y.item.endOffsetMillis>0&&y.item.endOffsetMillis<3e4?(t(),s("div",_w,h[25]||(h[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):V("",!0),y.item.vodSource&&y.item.endOffsetMillis>y.item.vodSource.durationInMillis?(t(),s("div",kw,h[26]||(h[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):V("",!0),o(f).item.endOffsetMillis.$error?(t(),s("div",Sw,[(t(!0),s(P,null,B(o(f).item.endOffsetMillis.$errors,D=>(t(),s("div",{key:D.$uid},m(D.$message),1))),128))])):V("",!0)])]),h[30]||(h[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[h[27]||(h[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:T,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Tw,[e("table",Iw,[h[29]||(h[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(P,null,B(y.item.adBreaks,(D,X)=>(t(),s("tr",null,[e("td",null,m(X+1),1),e("td",null,[e("div",Mw,[R(e("input",{"onUpdate:modelValue":C=>D.offsetMillis=C,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,xw),[[te,D.offsetMillis]]),D.offsetMillis>0?(t(),s("span",Cw,m(o(L).moment.utc(D.offsetMillis).format("HH:mm:ss")),1)):V("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":C=>D.sourceLocationId=C,onChange:h[10]||(h[10]=C=>a(y.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(P,null,B(y.lookups.adBreakSourceLocations,C=>(t(),s("option",{value:C.id},m(C.name),9,Ow))),256))],40,Vw),[[ge,D.sourceLocationId]])]),e("td",null,[R(e("select",{"onUpdate:modelValue":C=>D.vodSourceId=C,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(P,null,B(y.lookups.adBreakVodSources,C=>(t(),s("option",{value:C.id},m(C.name),9,Pw))),256))],8,Aw),[[ge,D.vodSourceId]])]),e("td",null,[e("button",{onClick:C=>g(X),class:"btn btn-outline-warning"},h[28]||(h[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Lw)])]))),256))])])])])])]),e("div",Uw,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:h[11]||(h[11]=D=>d()),class:"btn btn-primary",type:"button"},h[31]||(h[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Hw),h[32]||(h[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Lh))}},Ew=["id"],qw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Bw={class:"modal-content"},Nw={class:"modal-header"},Rw={class:"modal-title"},Fw={class:"modal-body"},zw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Gw=["innerHTML"],jw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Yw={class:"container"},Ww={class:"col"},Kw={class:"form-floating mb-2"},Qw={class:"col"},Jw={class:"form-floating mb-2"},Zw={key:0,class:"d-block invalid-feedback"},Xw={class:"col"},e_={class:"form-floating mb-2 d-none"},t_={key:0,class:"d-block invalid-feedback"},s_={class:"col"},o_={class:"form-floating mb-2"},a_={key:0,class:"d-block invalid-feedback"},l_={class:"modal-footer"},n_=["disabled"],r_={__name:"_addPlaybackConfiguration",props:{channelOutputId:{type:String,required:!0},playbackUrl:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=_,J=n,u=ve("modalAddPlaybackConfiguration"),y=ye({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),K={item:{name:{required:le.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:le.withMessage("adDecisionServerUrl is required.",re),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:le.withMessage("videoContentSourceUrl is required.",re),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{f.value.$reset(),await q()});const q=async()=>{const b=y;Q.value.clear(),G.value="";const r=J.playbackUrl;let c=r.lastIndexOf("/");const l=r.substring(0,c);let a=r.substring(c+1);c=a.lastIndexOf("."),a=a.substring(0,c)+"_ADCAMPAIGN_",b.item={name:a,originalVideoContentSourceUrl:J.playbackUrl,videoContentSourceUrl:l,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},f.value.$reset();var U=document.getElementById(u.value),T=_e.getOrCreateInstance(U);T.show()},p=async()=>{var b=document.getElementById(u.value),r=_e.getOrCreateInstance(b);r.hide(),W("cancel")},d=async()=>{const b=y;if(H.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const a=b.item;a.channelOutputId=J.channelOutputId,await N.put("/api/v1/channelOutputs/playback/",a).then(U=>{i.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})});var c=document.getElementById(u.value),l=_e.getOrCreateInstance(c);l.hide(),W("confirm")}catch(a){G.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{H.value=!1}};return v({open:q,close:p}),(b,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-hidden":"false"},[e("div",qw,[e("div",Bw,[e("div",Nw,[e("h5",Rw,[r[6]||(r[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:r[0]||(r[0]=c=>p()),"aria-label":"Close"})]),e("div",Fw,[o(G)?(t(),s("div",zw,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Gw)])):V("",!0),o(Q).size>0?(t(),s("div",jw,[r[8]||(r[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),c=>(t(),s("li",null,m(c),1))),256))])])):V("",!0),e("div",Yw,[e("div",Ww,[e("div",Kw,[R(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=c=>y.item.originalVideoContentSourceUrl=c),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[te,y.item.originalVideoContentSourceUrl]]),r[9]||(r[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",Qw,[e("div",Jw,[R(e("input",{"onUpdate:modelValue":r[2]||(r[2]=c=>y.item.name=c),id:"name",class:"form-control",placeholder:"Name"},null,512),[[te,y.item.name]]),r[10]||(r[10]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",Zw,[(t(!0),s(P,null,B(o(f).item.name.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0)])]),e("div",Xw,[e("div",e_,[R(e("input",{"onUpdate:modelValue":r[3]||(r[3]=c=>y.item.videoContentSourceUrl=c),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[te,y.item.videoContentSourceUrl]]),r[11]||(r[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),r[12]||(r[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(f).item.videoContentSourceUrl.$error?(t(),s("div",t_,[(t(!0),s(P,null,B(o(f).item.videoContentSourceUrl.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0)])]),e("div",s_,[e("div",o_,[R(e("textarea",{"onUpdate:modelValue":r[4]||(r[4]=c=>y.item.adDecisionServerUrl=c),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[te,y.item.adDecisionServerUrl]]),r[13]||(r[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(f).item.adDecisionServerUrl.$error?(t(),s("div",a_,[(t(!0),s(P,null,B(o(f).item.adDecisionServerUrl.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):V("",!0),r[14]||(r[14]=Xe('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",l_,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:r[5]||(r[5]=c=>d()),class:"btn btn-primary",type:"button"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,n_),r[16]||(r[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Ew))}},i_=["id"],d_={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},u_={class:"modal-content"},c_={class:"modal-header"},m_={class:"modal-title"},f_={class:"modal-body"},p_={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},v_=["innerHTML"],g_={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},b_={class:"container"},y_={class:"row row-cols-1 row-cols-md-3"},$_={class:"col"},h_={class:"form-floating mb-2"},w_=["value"],__={key:0,class:"d-block invalid-feedback"},k_={class:"col"},S_={class:"form-floating mb-2"},T_={key:0,class:"d-block invalid-feedback"},I_={class:"col"},M_={class:"form-floating mb-2"},x_={key:0,class:"d-block invalid-feedback"},C_={class:"modal-footer"},V_=["disabled"],O_={__name:"_addChannelOutput",props:{channelId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output"}),W=_,J=n,u=ve("modalAddChannelOutput"),y=ye({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),K={item:{sourceGroupId:{required:le.withMessage("Source Group is required.",re),$autoDirty:!0,$lazy:!0},manifestName:{required:le.withMessage("Manifest Name is required.",re),$autoDirty:!0,$lazy:!0},outputType:{required:le.withMessage("Output Type is required.",re),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{f.value.$reset(),d()});const q=async()=>{await p()},p=async()=>{try{await N.get("/api/v1/sourceGroups/lookup/").then(l=>{y.lookups.sourceGroups=l.data,y.lookups.sourceGroups.length===1&&(y.item.sourceGroupId=y.lookups.sourceGroups[0].id)})}catch(c){G.value=L.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},d=async()=>{const c=y;Q.value.clear(),G.value="",c.lookups={sourceGroups:[]},c.item={sourceGroupId:null,outputType:null},await q(),f.value.$reset();var l=document.getElementById(u.value),a=_e.getOrCreateInstance(l);a.show()},b=async()=>{var c=document.getElementById(u.value),l=_e.getOrCreateInstance(c);l.hide(),W("cancel")},r=async()=>{const c=y;if(H.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const T=c.item;T.channelId=J.channelId,await N.post("/api/v1/channelOutputs",T).then(g=>{i.success("Add Channel Output","Channel output added.")});var a=document.getElementById(u.value),U=_e.getOrCreateInstance(a);U.hide(),W("confirm")}catch(T){G.value=L.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{H.value=!1}};return v({open:d,close:b}),(c,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-hidden":"true"},[e("div",d_,[e("div",u_,[e("div",c_,[e("h5",m_,[l[4]||(l[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),l[5]||(l[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",f_,[o(G)?(t(),s("div",p_,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,v_)])):V("",!0),o(Q).size>0?(t(),s("div",g_,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),a=>(t(),s("li",null,m(a),1))),256))])])):V("",!0),e("div",b_,[e("div",y_,[e("div",$_,[e("div",h_,[R(e("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>y.item.sourceGroupId=a),class:ee([o(L).getValidFeedbackCss(y.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(P,null,B(y.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},m(a.name),9,w_))),256))],2),[[ge,y.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(f).item.sourceGroupId.$error?(t(),s("div",__,[(t(!0),s(P,null,B(o(f).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",k_,[e("div",S_,[R(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>y.item.outputType=a),class:ee([o(L).getValidFeedbackCss(y.item.outputType),"form-select"]),id:"outputType"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,y.item.outputType]]),l[10]||(l[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(f).item.outputType.$error?(t(),s("div",T_,[(t(!0),s(P,null,B(o(f).item.outputType.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])]),e("div",I_,[e("div",M_,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>y.item.manifestName=a),class:ee([o(L).getValidFeedbackCss(y.item.manifestName),"form-control"]),id:"manifestName"},null,2),[[te,y.item.manifestName]]),l[11]||(l[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(f).item.manifestName.$error?(t(),s("div",x_,[(t(!0),s(P,null,B(o(f).item.manifestName.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):V("",!0)])])])])]),e("div",C_,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:l[3]||(l[3]=a=>r()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,V_),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,i_))}},A_=["id"],P_={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},L_={class:"modal-content"},U_={class:"modal-header"},H_={class:"modal-title"},D_={class:"modal-body"},E_={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},q_=["innerHTML"],B_={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},N_={class:"container"},R_={class:"row row-cols-1 row-cols-md-2"},F_={class:"col"},z_={class:"form-floating mb-2"},G_=["value"],j_={key:0,class:"d-block invalid-feedback"},Y_={class:"col"},W_={class:"form-floating mb-2"},K_=["value"],Q_={key:0,class:"d-block invalid-feedback"},J_={class:"col"},Z_={class:"card h-100"},X_=["id"],e2={class:"modal-footer"},t2=["disabled"],s2={__name:"_editFillerSlate",props:{channelId:{type:String},sourceLocationId:{type:String},vodSourceId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:_}){const{appTitle:M,pageTitle:w,busy:H,isDirty:O,validations:Q,infoMessage:j,warningMessage:k,errorMessage:G,router:ae,axios:N,utils:L,toasts:i,closeWithReturnUrl:S,security:$}=he({appTitle:"Arcadian-FAST",pageTitle:"Edit Filler Slate"}),W=_,J=n,u=ve("modalEditFillerSlate"),y=ye({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),K={item:{channelId:{required:le.withMessage("channelId is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:le.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:le.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0}}},f=Ie(K,y);fe(async()=>{b(),f.value.$reset()}),Ue(()=>{y.hls&&(y.hls.stopLoad(),y.hls.destroy())});const q=async()=>{await p()},p=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(g=>{y.lookups.sourceLocations=g.data}),y.item.sourceLocationId&&await d(y.item.sourceLocationId)}catch(T){G.value=L.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},d=async T=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${T}/?category=2`;await N.get(g).then(E=>{y.lookups.vodSources=E.data})}catch(g){G.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},b=async()=>{const T=y;Q.value.clear(),G.value="",T.lookups={sourceLocations:[],vodSources:[]},T.item={channelId:J.channelId,sourceLocationId:J.sourceLocationId,vodSourceId:J.vodSourceId},await q(),y.item.vodSourceId&&await U(y.item.vodSourceId),f.value.$reset();var g=document.getElementById(u.value),E=_e.getOrCreateInstance(g);E.show()},r=async()=>{var T=document.getElementById(u.value),g=_e.getOrCreateInstance(T);g.hide(),y.hls&&(y.hls.stopLoad(),y.hls.destroy()),W("cancel","cancel clicked")},c=async()=>{const T=y;if(H.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const h=T.item;await N.put("/api/v1/channels/filler-slate",h).then(D=>{i.success("Update Channel Filler Slate","Channel's Filler slate was updated.")});var E=document.getElementById(u.value),A=_e.getOrCreateInstance(E);A.hide(),y.hls&&(y.hls.stopLoad(),y.hls.destroy()),W("confirm",y.item)}catch(h){G.value=L.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{H.value=!1}},l=async()=>{y.item.vodSourceId=null,await d(y.item.sourceLocationId)},a=async()=>{await U(y.item.vodSourceId)},U=async T=>{try{let g=`/api/v1/vodSources/${T}/hls`;const E=await N.get(g).then(h=>h.data);if(y.hls){y.hls.loadSource(E);return}const A=document.getElementById(`video-${y.item.channelId}`);y.hls=L.createHlsStream(A,E)}catch(g){G.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}};return v({open:b,close:r}),(T,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:u.value,tabindex:"-1","aria-hidden":"true"},[e("div",P_,[e("div",L_,[e("div",U_,[e("h5",H_,[g[6]||(g[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Y(m(o(w)),1)]),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=E=>r()),"aria-label":"Close"})]),e("div",D_,[o(G)?(t(),s("div",E_,[g[7]||(g[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,q_)])):V("",!0),o(Q).size>0?(t(),s("div",B_,[g[8]||(g[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(o(Q).values(),E=>(t(),s("li",null,m(E),1))),256))])])):V("",!0),e("div",N_,[e("div",R_,[e("div",F_,[e("div",z_,[R(e("select",{"onUpdate:modelValue":g[1]||(g[1]=E=>y.item.sourceLocationId=E),onChange:g[2]||(g[2]=E=>l()),class:ee([o(L).getValidFeedbackCss(y.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(P,null,B(y.lookups.sourceLocations,E=>(t(),s("option",{value:E.id},m(E.name),9,G_))),256))],34),[[ge,y.item.sourceLocationId]]),g[9]||(g[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(f).item.sourceLocationId.$error?(t(),s("div",j_,[(t(!0),s(P,null,B(o(f).item.sourceLocationId.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):V("",!0)])]),e("div",Y_,[e("div",W_,[R(e("select",{"onUpdate:modelValue":g[3]||(g[3]=E=>y.item.vodSourceId=E),onChange:a,class:ee([o(L).getValidFeedbackCss(y.item.vodSourceId),"form-select"]),id:"vodSourceId"},[(t(!0),s(P,null,B(y.lookups.vodSources,E=>(t(),s("option",{value:E.id},m(E.name),9,K_))),256))],34),[[ge,y.item.vodSourceId]]),g[10]||(g[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(f).item.vodSourceId.$error?(t(),s("div",Q_,[(t(!0),s(P,null,B(o(f).item.vodSourceId.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):V("",!0)])])]),e("div",J_,[e("div",Z_,[e("video",{id:`video-${y.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,X_)])])])]),e("div",e2,[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:g[4]||(g[4]=E=>c()),class:"btn btn-primary",type:"button"},g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,t2),e("button",{onClick:g[5]||(g[5]=E=>r()),class:"btn btn-secondary ms-1"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,A_))}},o2={class:"my-2"},a2={class:""},l2={class:"form-floating mb-2"},n2={id:"vodSourceTitle",class:"form-control-plaintext"},r2={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},i2={class:"row"},d2={class:"col-12 col-md-4"},u2={class:"form-floating mb-2"},c2={id:"vodSourceVideoTitle",class:"form-control-plaintext"},m2={class:"col-12 col-md-8"},f2={class:"form-floating mb-2"},p2={id:"vodSourceVideoDesc",class:"form-control-plaintext"},v2={class:"mt-2"},g2={class:"row row-cols-1 row-cols-sm-3"},b2={class:"col"},y2={class:"form-floating mb-2"},$2={id:"startOffsetMillis",class:"form-control-plaintext"},h2={class:"col"},w2={class:"form-floating mb-2"},_2={id:"endOffsetMillis",class:"form-control-plaintext"},k2={class:"col"},S2={class:"form-floating mb-2"},T2={id:"durationInMillis",class:"form-control-plaintext"},I2={class:"row row-cols-1 row-cols-sm-3"},M2={class:"col"},x2={class:"form-floating mb-2"},C2={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},V2={class:"col"},O2={class:"form-floating mb-2"},A2={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},P2={class:"row row-cols-1 row-cols-sm-3"},L2={class:"col"},U2={class:"form-floating mb-2"},H2={id:"dateScheduledStart",class:"form-control-plaintext"},D2={class:"col"},E2={class:"form-floating mb-2"},q2={id:"dateScheduledEnd",class:"form-control-plaintext"},B2={key:0,class:"col"},N2={class:"form-floating mb-2"},R2={id:"relativeProgram",class:"form-control-plaintext"},F2={key:0,class:"mt-2"},z2={class:"table-responsive border overflow-y-auto",style:{height:"20rem"}},G2={class:"table table-bordered1 mb-0"},j2={class:"align-center"},Y2={class:"text-center me-1"},W2={class:"text-center"},K2={class:"text-center"},Q2={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},J2={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},Z2={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(n){const v=n,{moment:_,generateReturnUrl:M}=tt();return fe(()=>{v.item.value}),(w,H)=>{const O=oe("router-link");return t(),s("div",o2,[e("div",null,[H[1]||(H[1]=e("h5",null," VOD ",-1)),e("div",a2,[e("div",l2,[e("div",n2,[z(O,{to:`${n.urlViewVodSource}/${n.item.vodSourceId}/${o(M)()}`,class:"link-offset-2"},{default:F(()=>[n.item.vodSource.arn?(t(),s("span",r2)):V("",!0),Y(" "+m(n.item.vodSource.name),1)]),_:1},8,["to"])]),H[0]||(H[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[H[4]||(H[4]=e("h5",null," Video ",-1)),e("div",i2,[e("div",d2,[e("div",u2,[e("div",c2,[z(O,{to:`${n.urlViewVideo}/${n.item.vodSource.video.videoId}/${o(M)()}`,class:"link-offset-2"},{default:F(()=>[Y(m(n.item.vodSource.video.title),1)]),_:1},8,["to"])]),H[2]||(H[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",m2,[e("div",f2,[e("div",p2,m(n.item.vodSource.video.description),1),H[3]||(H[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",v2,[H[13]||(H[13]=e("h5",null," Schedule ",-1)),e("div",g2,[e("div",b2,[e("div",y2,[e("div",$2,m(o(_).utc(n.item.startOffsetMillis).format("HH:mm:ss")),1),H[5]||(H[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",h2,[e("div",w2,[e("div",_2,m(o(_).utc(n.item.endOffsetMillis).format("HH:mm:ss")),1),H[6]||(H[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",k2,[e("div",S2,[e("div",T2,m(o(_).utc(n.item.durationInMillis).format("HH:mm:ss")),1),H[7]||(H[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",I2,[e("div",M2,[e("div",x2,[e("div",C2,m(o(_).utc(n.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),H[8]||(H[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",V2,[e("div",O2,[e("div",A2,m(o(_).utc(n.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),H[9]||(H[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",P2,[e("div",L2,[e("div",U2,[e("div",H2,m(o(_).utc(n.item.dateScheduledStart).format("lll")),1),H[10]||(H[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",D2,[e("div",E2,[e("div",q2,m(o(_).utc(n.item.dateScheduledEnd).format("lll")),1),H[11]||(H[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),n.item.relativeProgram?(t(),s("div",B2,[e("div",N2,[e("div",R2,m(n.item.relativeProgram.name),1),H[12]||(H[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):V("",!0)])]),n.item.adBreaks.length?(t(),s("div",F2,[H[15]||(H[15]=e("h5",null," Ad Breaks ",-1)),e("div",z2,[e("table",G2,[e("tbody",null,[H[14]||(H[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(P,null,B(n.item.adBreaks,(Q,j)=>(t(),s("tr",j2,[e("td",Y2,m(j+1),1),e("td",W2,m(o(_).utc(Q.offsetMillis).format("HH:mm:ss")),1),e("td",K2,m(o(_).utc(Q.durationInMillis).format("HH:mm:ss")),1),e("td",null,[z(O,{to:`${n.urlViewVodSource}/${Q.vodSource.vodSourceId}/${o(M)()}`,class:"link-offset-2"},{default:F(()=>[Q.vodSource.arn?(t(),s("span",Q2)):(t(),s("span",J2)),Y(" "+m(Q.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):V("",!0)])}}},X2={key:0,class:"dropdown"},ek={key:0,class:"fas fa-fw fa-play"},tk={key:1,class:"fas fa-fw fa-stop"},sk={class:"dropdown-menu"},ok={key:0},ak={key:1},lk={key:2},nk={key:0},rk={class:"nav nav-tabs",id:"myTab",role:"tablist"},ik={class:"nav-item",role:"presentation"},dk={class:"nav-item",role:"presentation"},uk={class:"nav-item",role:"presentation"},ck={class:"nav-item",role:"presentation"},mk={class:"nav-item",role:"presentation"},fk={class:"tab-content",id:"myTabContent"},pk={class:""},vk={class:"row row-cols-1 row-cols-lg-2"},gk={class:"col"},bk={class:"row row-cols-1 row-cols-xl-3"},yk={class:"col"},$k={class:"form-floating mb-2"},hk={class:"col"},wk={class:"form-floating mb-2"},_k={class:"col"},kk={class:"form-floating mb-2"},Sk={class:"col"},Tk={class:"input-group"},Ik={class:"form-floating"},Mk=["value"],xk={class:"w-100 mt-2"},Ck={class:"text-center"},Vk=["src"],Ok={class:"col"},Ak={class:"mt-1 mt-lg-0"},Pk={class:"col"},Lk={class:"form-floating mb-2"},Uk={class:"form-control-plaintext card"},Hk={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Dk={class:"col"},Ek={class:"input-group border mb-2"},qk={class:"form-floating"},Bk={class:"form-control-plaintext card"},Nk={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Rk={class:""},Fk={class:"d-flex flex-row justify-content-start align-items-center"},zk={class:"ms-2"},Gk={key:0,class:"alert bg-warning mt-2"},jk={class:"table-responsive border mt-1"},Yk={class:"table table-bordered1 mb-0"},Wk={class:"badge bg-info"},Kk={key:0,class:"text-wrap"},Qk={key:1,class:"text-warning"},Jk={key:0,class:"text-end"},Zk={key:1,class:"text-end"},Xk=["onClick"],eS={key:0},tS={colspan:"999"},sS={class:"d-flex flex-row justify-content-start align-items-center"},oS={class:"ms-2"},aS={if:"item.playbackUrl"},lS=["onClick"],nS={key:0,class:"table-responsive mt-2"},rS={class:"table table-borderless mb-0 table-sm"},iS={class:"align-middle1"},dS={class:"badge bg-success"},uS={class:"border p-2 mt-2 text-wrap text-truncate",style:{"max-width":"65rem"}},cS={class:"text-end"},mS={class:"d-flex flex-row justify-content-end align-items-baseline"},fS=["onClick"],pS=["onClick"],vS={class:""},gS={class:"table-responsive border"},bS={class:"table mb-0 table-sm table-bordered1"},yS={class:"align-middle1"},$S={class:"text-center me-1"},hS={class:"d-flex flex-column flex-md-row justify-content-start gap-1"},wS={class:""},_S={class:"mb-1 mb-md-0"},kS=["src"],SS={class:"me-auto ms-md-2"},TS={key:0,class:"fas fa-fw fa-check-circle text-success"},IS={class:"mx-md-5"},MS={class:"fw-lighter small text-nowrap"},xS={class:"fw-lighter small text-nowrap"},CS={class:"me-md-5"},VS={class:"fw-lighter small text-nowrap"},OS={class:"fw-lighter small text-nowrap"},AS={class:"text-center"},PS={class:"text-center"},LS={class:"text-end"},US={class:"btn-group position-static"},HS=["onClick"],DS={key:0,class:"fas fa-fw fa-chevron-circle-up"},ES={key:1,class:"fas fa-fw fa-chevron-circle-down"},qS={class:"dropdown-menu"},BS=["onClick"],NS={key:0},RS=["onClick"],FS=["onClick"],zS=["onClick"],GS={key:0},jS={colspan:"999"},YS={class:"text-end mt-2 d-none"},WS={class:""},KS={class:"text-end mb-2"},QS={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},JS={class:"col"},ZS={class:"card shadow-sm"},XS=["id"],e0={class:"p-1"},t0={class:"card-title1 text-center"},s0={class:"col"},o0={class:"card shadow-sm"},a0=["id"],l0={class:"p-1"},n0={class:"card-title1 text-center text-truncate"},r0={class:"small1"},i0={class:""},d0={key:0,class:"fas fa-fw fa-check-circle text-success"},u0={key:1,class:"fas fa-fw fa-times-circle text-warning"},c0={key:0,class:"fas fa-fw fa-check-circle text-success"},m0={key:1,class:"fas fa-fw fa-times-circle text-warning"},f0={key:0,class:"fas fa-fw fa-check-circle text-success"},p0={key:1,class:"fas fa-fw fa-times-circle text-warning"},v0={key:0,class:"fas fa-fw fa-check text-warning"},g0={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},b0={key:0,class:"fas fa-fw fa-check-circle text-success"},y0={key:1,class:"fas fa-fw fa-times-circle text-warning"},$0={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(n){const v=n,{appTitle:_,pageTitle:M,busy:w,isDirty:H,validations:O,infoMessage:Q,warningMessage:j,errorMessage:k,router:G,axios:ae,utils:N,toasts:L,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=he({appTitle:"Arcadian-FAST",pageTitle:"View Channel"});Ce("$config");const J=we();J.user;const u=ye({lookups:{logos:[{id:"Sony One | Shark Tank",url:"https://images.frequency.com/linear_channel/745/solid/square/w360_h360/10uv7lt02iuk41hlxyvu261e60.jpg"},{id:"Sony One | Comedy Hits",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/3cffd1d9-3303-4362-8e84-62fc5a94bc53.png"},{id:"Sony One | Action Hits",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/14e8a1ba-31e9-4b24-af7b-3d2572d6959f.png"},{id:"Sony One | Comedy TV",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/c21c538d-0cae-4fbd-a3e8-6651b02139dc.png"},{id:"Sony One | Blacklist",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/f23e9816-f3c9-44b4-85b9-2edda88fc68a.png"},{id:"Sony One | Thriller TV",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/197db601-d24e-4e8c-9278-3ff18a05a2b6.png"},{id:"Sony One | Faves",url:"https://prd-linear-creative.frequency.com/linear-channel/logo/291d893a-dc06-44fb-b26a-7e625909d939.png"}]},user:J.user,logoUrl:null,item:null}),y=ve(null),K=ve(),f=xe(()=>u.item&&u.item.state==="RUNNING");fe(async()=>{await b();const ue=N.getPageTab("channel")||"information-tab";q(ue)}),Ue(()=>{me()});const q=ue=>{N.setPageTab("channel",ue),K.value=ue,ue==="preview-tab"&&setTimeout(()=>{var I=document.getElementById("masonry");new it(I,{})},2e3)},p=ue=>ue===K.value?"active":"",d=ue=>ue===K.value?"show active":"",b=async()=>{const ue=u;if(me(),!w.value)try{w.value=!0,k.value="",u.item=null;const I=`/api/v1/channels/${v.id}/`;await ae.get(I).then(pe=>{ue.item=pe.data,ue.item.outputs.forEach(Pe=>{Pe.playbackConfigurations.forEach(ie=>{if(Pe.playbackUrl){const Le=Pe.playbackUrl,Me=Le.lastIndexOf("/"),nt=Le.substring(0,Me),We=Le.substring(Me+1),rt=ie.hlsConfigurationManifestEndpointPrefix;rt&&(ie.hlsPlaylist=rt+We)}})})}),u.logoUrl=u.item.logoUrl,ce()}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}},r=async()=>{if(confirm("Do you want to delete this Channel?")&&!w.value)try{w.value=!0,k.value="";const I=`/api/v1/channels/${v.id}/`;await ae.delete(I).then(pe=>{}),S(v.urlMain)}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}},c=async()=>{await b()},l=async ue=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!w.value){k.value=null;try{w.value=!0;var pe=ue?"?include-program=true":"";await ae.post(`/api/v1/channels/${v.id}/publish/${pe}`).then(Te=>{L.success("Publish Channel","Channel was published.")}),w.value=!1,await c()}catch(Te){k.value=N.getErrorMessageAsHtml(Te),window.scrollTo(0,0)}finally{w.value=!1}}},a=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!w.value){k.value=null;try{w.value=!0,await ae.delete(`/api/v1/channels/${v.id}/unpublish/`).then(I=>{L.warning("Remove Channel","Channel was removed.")}),w.value=!1,await c()}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}}},U=()=>{y.value.open(v.id)},T=async ue=>{if(ue.outputType==="HLS"){const I=Ae(r_,{channelOutputId:ue.channelOutputId,playbackUrl:ue.playbackUrl},{chore:!0,keepInitial:!1}),{data:pe,isCanceled:Te}=await I.reveal();I.close(),Te||await c()}},g=async()=>{const ue=Ae(O_,{channelId:u.item.channelId},{chore:!0,keepInitial:!1}),{data:I,isCanceled:pe}=await ue.reveal();ue.close(),pe||await c()},E=async ue=>{const I=Ae(ft,{programId:ue},{chore:!0,keepInitial:!1}),{data:pe,isCanceled:Te}=await I.reveal();I.closeAll(),Te||await c()},A=async(ue,I)=>{const pe=Ae(s2,{channelId:u.item.channelId,sourceLocationId:u.item.fillerSlateSourceLocation.sourceLocationId,vodSourceId:u.item.fillerSlateVodSource.vodSourceId},{chore:!0,keepInitial:!1}),{data:Te,isCanceled:Pe}=await pe.reveal();pe.close(),Pe||await c()},h=async ue=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!w.value){k.value=null;try{w.value=!0,await ae.delete(`/api/v1/programs/${ue}/`).then(pe=>{L.success("Delete Program","Program was deleted..",{async onClose(){}})}),w.value=!1,await c()}catch(pe){k.value=N.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{w.value=!1}}},D=async ue=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!w.value){k.value=null;try{w.value=!0,await ae.delete(`/api/v1/channelOutputs/${ue}/`).then(pe=>{L.success("Delete Channel Output","Channel output was deleted..")}),w.value=!1,await c()}catch(pe){k.value=N.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{w.value=!1}}},X=async ue=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!w.value){k.value=null;try{w.value=!0,await ae.post(`/api/v1/programs/${ue}/publish/`).then(pe=>{L.success("Publish Program","Program was published..",{async onClose(){}})}),w.value=!1,await c()}catch(pe){k.value=N.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{w.value=!1}}},C=async ue=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!w.value){k.value=null;try{w.value=!0,await ae.delete(`/api/v1/programs/${ue}/unpublish/`).then(pe=>{L.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),w.value=!1,await c()}catch(pe){k.value=N.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{w.value=!1}}},ne=async ue=>{if(!w.value){k.value=null;try{w.value=!0,await ae.put(`/api/v1/channels/${v.id}/change-state/${ue}`).then(I=>{L.success("Update Channel state","Change state was updated")}),w.value=!1,ue==="STOPPED"&&K.value==="preview-tab"&&(me(),q("information-tab")),await c()}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}}},Z=async ue=>{if(!w.value)try{w.value=!0,k.value="",await ae.post(`/api/v1/channelOutputs/${ue}/playback/publish/`).then(I=>{L.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),w.value=!1,await c()}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}},se=async ue=>{if(confirm("Do you want to remove this Playback Configuration?")&&!w.value)try{w.value=!0,k.value="",await ae.delete(`/api/v1/channelOutputs/${ue}/playback/`).then(pe=>{L.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),w.value=!1,await c()}catch(pe){k.value=N.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{w.value=!1}},x=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ue=u.item.outputs;me(),ue.forEach(I=>{var pe=document.getElementById(`video-${I.channelOutputId}`);I.hls&&I.hls.destroy(),I.hls=N.createHlsStream(pe,I.playbackUrl,"Main playlist started."),pe.play(),I.playbackConfigurations.forEach(Te=>{if(Te.hls&&Te.hls.destroy(),Te.arn){var Pe=document.getElementById(`video-${Te.channelOutputPlaybackConfigurationId}`);try{Te.hls=N.createHlsStream(Pe,Te.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Pe.play()}catch(ie){L.error("Failed Stream SSAI Playlist",ie)}}})}),setTimeout(()=>{var I=document.getElementById("masonry");new it(I,{})},2e3)}},me=()=>{u.item&&u.item.outputs&&u.item.outputs.forEach(I=>{I.hls&&(I.hls.detachMedia(),I.hls.destroy(),delete I.hls),I.playbackConfigurations.forEach(pe=>{pe.hls&&(pe.hls.detachMedia(),pe.hls.destroy(),delete pe.hls)})})},ce=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var ue=document.getElementById("video-filler-slate"),I=u.item.fillerSlateVodSource;const Te=I.video.formats.find(ie=>ie.formatName==="HLS"),Pe=Te.serverUrl+Te.path;u.hls=N.createHlsStream(ue,Pe)}},de=async()=>{const ue=u;if(!w.value)try{w.value=!0,k.value="";const I=encodeURIComponent(ue.logoUrl);await ae.put(`/api/v1/channels/${v.id}/logo/?url=${I}`).then(pe=>{L.success("Edit Channel Logo","Channel logo was updated.")}),w.value=!1,await c()}catch(I){k.value=N.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{w.value=!1}};return(ue,I)=>{const pe=oe("router-link"),Te=oe("PageHeader"),Pe=oe("PageBody");return t(),be($e,null,{default:F(()=>[e("div",null,[z(Te,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(M)},{default:F(()=>[o(w)?V("",!0):(t(),s(P,{key:0},[u.item?(t(),s("div",X2,[e("button",{class:ee([[f.value?"btn-outline-success":"btn-outline-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[f.value?(t(),s("span",ek)):(t(),s("span",tk)),Y(" "+m(u.item.state),1)],2),e("ul",sk,[u.item.arn?(t(),s("li",ok,[f.value?(t(),s("button",{key:0,onClick:I[0]||(I[0]=ie=>ne("STOPPED")),class:"dropdown-item"},I[24]||(I[24]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),Y("Stop ")]))):(t(),s("button",{key:1,onClick:I[1]||(I[1]=ie=>ne("RUNNING")),class:"dropdown-item"},I[25]||(I[25]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),Y("Start ")])))])):V("",!0),f.value?V("",!0):(t(),s("li",ak,[u.item.arn?(t(),s("button",{key:0,onClick:I[2]||(I[2]=ie=>a()),class:"dropdown-item"},I[26]||(I[26]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),Y("Unpublish ")]))):(t(),s(P,{key:1},[e("button",{onClick:I[3]||(I[3]=ie=>l()),class:"dropdown-item"},I[27]||(I[27]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Y("Publish ")])),e("button",{onClick:I[4]||(I[4]=ie=>l(!0)),class:"dropdown-item"},I[28]||(I[28]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Y("Publish With Programs ")]))],64))])),u.item.arn?(t(),s("li",lk,[e("button",{onClick:I[5]||(I[5]=ie=>l()),class:"dropdown-item"},I[29]||(I[29]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Y("Republish ")]))])):V("",!0),!f.value&&!u.item.arn?(t(),s(P,{key:3},[I[31]||(I[31]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:I[6]||(I[6]=ie=>r()),class:"dropdown-item"},I[30]||(I[30]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),Y("Delete ")]))])],64)):V("",!0)])])):V("",!0),z(pe,{to:`${n.urlSchedulePrograms}/${n.id}`,class:"ms-2 btn btn-primary"},{default:F(()=>I[32]||(I[32]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:I[7]||(I[7]=ie=>c()),class:"ms-2 btn btn-secondary"},I[33]||(I[33]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))],64)),e("button",{onClick:I[8]||(I[8]=ie=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},I[34]||(I[34]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(Pe,{errorMessage:o(k)},{default:F(()=>[u.item?(t(),s("div",nk,[e("ul",rk,[e("li",ik,[e("button",{onClick:I[9]||(I[9]=ie=>q("information-tab")),class:ee([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},I[35]||(I[35]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),Y("Information ")]),2)]),e("li",dk,[e("button",{onClick:I[10]||(I[10]=ie=>q("outputPlayback-tab")),class:ee([p("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},I[36]||(I[36]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),Y("Output/Playback ")]),2)]),e("li",uk,[e("button",{onClick:I[11]||(I[11]=ie=>q("programs-tab")),class:ee([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},I[37]||(I[37]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),Y("Programs ")]),2)]),e("li",ck,[e("button",{onClick:I[12]||(I[12]=ie=>q("preview-tab")),class:ee([[f.value?"":"disabled",p("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},I[38]||(I[38]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),Y("Preview ")]),2)]),e("li",mk,[e("button",{onClick:I[13]||(I[13]=ie=>q("checklist-tab")),class:ee([p("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},I[39]||(I[39]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),Y("Checklist ")]),2)])]),e("div",fk,[e("div",{class:ee([d("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",pk,[e("div",null,[e("div",vk,[e("div",gk,[e("div",bk,[e("div",yk,[e("div",$k,[R(e("input",{"onUpdate:modelValue":I[14]||(I[14]=ie=>u.item.name=ie),type:"text",class:"form-control-plaintext card",id:"name"},null,512),[[te,u.item.name]]),I[40]||(I[40]=e("label",{for:"name"},"Name",-1))])]),e("div",hk,[e("div",wk,[R(e("input",{"onUpdate:modelValue":I[15]||(I[15]=ie=>u.item.playbackMode=ie),type:"text",class:"form-control-plaintext card",id:"playbackMode",readonly:""},null,512),[[te,u.item.playbackMode]]),I[41]||(I[41]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",_k,[e("div",kk,[R(e("input",{"onUpdate:modelValue":I[16]||(I[16]=ie=>u.item.tier=ie),type:"text",class:"form-control-plaintext card",id:"tier",readonly:""},null,512),[[te,u.item.tier]]),I[42]||(I[42]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",Sk,[e("div",Tk,[e("div",Ik,[R(e("select",{"onUpdate:modelValue":I[17]||(I[17]=ie=>u.logoUrl=ie),class:"form-select",id:"logoUrl"},[(t(!0),s(P,null,B(u.lookups.logos,ie=>(t(),s("option",{value:ie.url},m(ie.id),9,Mk))),256))],512),[[ge,u.logoUrl]]),I[43]||(I[43]=e("label",{for:"logoUrl",class:""},"Logo",-1))]),u.logoUrl!==u.item.logoUrl?(t(),s("button",{key:0,onClick:I[18]||(I[18]=ie=>de()),class:"btn btn-primary"},I[44]||(I[44]=[e("i",{class:"fa-solid fa-save"},null,-1)]))):V("",!0)]),e("div",xk,[e("div",Ck,[e("img",{src:u.logoUrl,class:"img-fluid card"},null,8,Vk)])])])]),e("div",Ok,[e("div",Ak,[e("div",Pk,[e("div",Lk,[e("div",Uk,[z(pe,{to:`${n.urlViewSourceLocation}/${u.item.fillerSlateSourceLocation.sourceLocationId}/${o($)()}`,class:ee([[u.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:F(()=>[u.item.fillerSlateSourceLocation.arn?(t(),s("span",Hk)):V("",!0),Y(m(u.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),I[45]||(I[45]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Dk,[e("div",Ek,[e("div",qk,[e("div",Bk,[z(pe,{to:`${n.urlViewVodSource}/${u.item.fillerSlateVodSource.vodSourceId}/${o($)()}`,class:ee([[u.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:F(()=>[u.item.fillerSlateVodSource.arn?(t(),s("span",Nk)):V("",!0),Y(m(u.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),I[46]||(I[46]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))]),f.value?V("",!0):(t(),s("button",{key:0,onClick:I[19]||(I[19]=ie=>A(u.item.fillerSlateSourceLocation.sourceLocationId,u.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-primary"},I[47]||(I[47]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])))])])]),I[48]||(I[48]=e("div",{class:"col"},[e("div",{class:"h-100"},[e("video",{id:"video-filler-slate",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain card"})])],-1))])])])])],2),e("div",{class:ee([d("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Rk,[e("div",null,[e("div",Fk,[I[50]||(I[50]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",zk,[e("button",{onClick:I[20]||(I[20]=ie=>g()),class:"btn btn-outline-primary btn-sm"},I[49]||(I[49]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),u.item.outputs.length<=0?(t(),s("div",Gk,I[51]||(I[51]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),Y("Channel Output is required ")]))):V("",!0),e("div",jk,[e("table",Yk,[I[60]||(I[60]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url"),e("th")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider align-middle"},{default:F(()=>[(t(!0),s(P,null,B(u.item.outputs,(ie,Le)=>(t(),s(P,{key:ie.channelOutputId},[e("tr",null,[e("td",null,m(Le+1),1),e("td",null,[e("div",null,m(ie.manifestName),1),e("div",null,[e("span",Wk,m(ie.outputType),1)])]),e("td",null,[e("div",null,[z(pe,{to:`${n.urlViewSourceGroup}/${ie.sourceGroupId}/${o($)()}`,class:"link-offset-2",tag:"button"},{default:F(()=>[Y(m(ie.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ie.playbackUrl?(t(),s("div",Kk,m(ie.playbackUrl),1)):(t(),s("div",Qk,I[52]||(I[52]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),Y("Publish channel to get the playback url ")])))]),f.value?(t(),s("td",Jk)):(t(),s("td",Zk,[e("button",{onClick:Me=>D(ie.channelOutputId),class:"btn btn-outline-danger btn-sm"},I[53]||(I[53]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Xk)]))]),ie.playbackUrl?(t(),s("tr",eS,[I[58]||(I[58]=e("td",null,null,-1)),I[59]||(I[59]=e("td",null,null,-1)),e("td",tS,[e("div",sS,[I[55]||(I[55]=e("h5",null,[Y("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",oS,[e("div",aS,[e("button",{onClick:Me=>T(ie),class:"btn btn-outline-primary btn-sm"},I[54]||(I[54]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,lS)])])]),ie.playbackConfigurations.length>0?(t(),s("div",nS,[e("table",rS,[e("tbody",null,[(t(!0),s(P,null,B(ie.playbackConfigurations,(Me,nt)=>(t(),s("tr",iS,[e("td",null,m(nt+1),1),e("td",null,[e("span",dS,m(Me.name),1),e("div",uS,[e("span",null,m(Me.adDecisionServerUrl),1)])]),e("td",cS,[e("div",mS,[Me.arn?V("",!0):(t(),s("button",{key:0,onClick:We=>Z(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},I[56]||(I[56]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,fS)),e("button",{onClick:We=>se(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-danger btn-sm ms-2"},I[57]||(I[57]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,pS)])])]))),256))])])])):V("",!0)])])):V("",!0)],64))),128))]),_:1},512),[[ke,u.item.outputs.length>0]])])])])])],2),e("div",{class:ee([d("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",vS,[e("div",gS,[e("table",bS,[I[69]||(I[69]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),R(z(Se,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(P,null,B(u.item.programs,(ie,Le)=>(t(),s(P,{key:ie.programId},[e("tr",yS,[e("td",$S,m(Le+1),1),e("td",null,[e("div",hS,[e("div",wS,[ie.vodSource.video.thumbnails.length>0?(t(!0),s(P,{key:0},B(ie.vodSource.video.thumbnails,Me=>(t(),s("div",_S,[e("img",{src:Me.url,class:"img-fuild border",width:"128"},null,8,kS)]))),256)):V("",!0)]),e("div",SS,[ie.arn?(t(),s("span",TS)):V("",!0),e("span",null,m(ie.name),1)]),e("div",IS,[I[61]||(I[61]=Y(" UTC ")),e("div",null,[e("span",MS,m(o(N).moment.utc(ie.dateScheduledStart).format("lll"))+" (utc)",1)]),e("div",null,[e("span",xS,m(o(N).moment.utc(ie.dateScheduledEnd).format("lll"))+" (utc)",1)])]),e("div",CS,[I[62]||(I[62]=Y(" Local ")),e("div",null,[e("span",VS,m(o(N).moment(ie.dateScheduledStart).format("lll"))+" (local)",1)]),e("div",null,[e("span",OS,m(o(N).moment(ie.dateScheduledEnd).format("lll"))+" (local)",1)])])])]),e("td",AS,m(o(N).moment.utc(ie.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",PS,m(ie.adBreaks.length),1),e("td",LS,[e("div",US,[e("button",{onClick:Me=>ie.expand=!ie.expand,type:"button",class:ee([[ie.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[ie.expand?(t(),s("span",DS)):(t(),s("span",ES))],10,HS),I[67]||(I[67]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",qS,[e("li",null,[e("button",{onClick:Me=>E(ie.programId),class:"dropdown-item"},I[63]||(I[63]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),Y("Edit ")]),8,BS)]),ie.arn?(t(),s("li",NS,[e("button",{onClick:Me=>C(ie.programId),class:"dropdown-item"},I[64]||(I[64]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),Y("Unpublish ")]),8,RS)])):(t(),s(P,{key:1},[e("li",null,[e("button",{onClick:Me=>X(ie.programId),class:"dropdown-item"},I[65]||(I[65]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Y("Publish ")]),8,FS)]),e("li",null,[e("button",{onClick:Me=>h(ie.programId),class:"dropdown-item"},I[66]||(I[66]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),Y("Remove ")]),8,zS)])],64))])])])]),ie.expand?(t(),s("tr",GS,[I[68]||(I[68]=e("td",null,null,-1)),e("td",jS,[z(Z2,{item:ie,urlViewVideo:n.urlViewVideo,urlViewVodSource:n.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):V("",!0)],64))),128))]),_:1},512),[[ke,u.item.programs.length>0]])])]),e("div",YS,[e("button",{onClick:I[21]||(I[21]=ie=>U()),class:"btn btn-outline-primary"},I[70]||(I[70]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),Y("Program ")]))])])],2),f.value?(t(),s("div",{key:0,class:ee([d("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",WS,[e("div",KS,[u.item.outputs[0].hls?(t(),s("button",{key:1,onClick:I[23]||(I[23]=ie=>me()),class:"btn btn-primary"},I[72]||(I[72]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:I[22]||(I[22]=ie=>x()),class:"btn btn-primary"},I[71]||(I[71]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",QS,[(t(!0),s(P,null,B(u.item.outputs,ie=>(t(),s(P,null,[e("div",JS,[e("div",ZS,[e("video",{id:`video-${ie.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,XS),e("div",e0,[e("div",t0,m(ie.manifestName),1)])])]),(t(!0),s(P,null,B(ie.playbackConfigurations,(Le,Me)=>(t(),s("div",s0,[e("div",o0,[e("video",{id:`video-${Le.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,a0),e("div",l0,[e("div",n0,[Y(" #"+m(Me+1)+" ",1),e("span",r0,m(Le.name),1)])])])]))),256))],64))),256))])])],2)):V("",!0),e("div",{class:ee([d("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",i0,[I[78]||(I[78]=Y(" Checklist ")),e("ul",null,[e("li",null,[u.item.fillerSlateSourceLocation.arn?(t(),s("span",d0)):(t(),s("span",u0)),I[73]||(I[73]=Y(" Filler Slate Source Location "))]),e("li",null,[u.item.fillerSlateVodSource.arn?(t(),s("span",c0)):(t(),s("span",m0)),I[74]||(I[74]=Y(" Filler Slate VOD Source "))]),e("li",null,[u.item.outputs.length>0?(t(),s("span",f0)):(t(),s("span",p0)),I[76]||(I[76]=Y(" Outputs ")),e("ul",null,[e("li",null,[u.item.outputs.some(ie=>ie.playbackConfigurations.length>0)?(t(),s("span",v0)):(t(),s("span",g0)),I[75]||(I[75]=Y(" Ad Insertion setup "))])])]),e("li",null,[u.item.programs.length>0?(t(),s("span",b0)):(t(),s("span",y0)),I[77]||(I[77]=Y(" Programs "))])])])],2)])])):V("",!0)]),_:1},8,["errorMessage"]),z(Dw,{ref_key:"modalAddProgram",ref:y,onRefresh:c},null,512)])]),_:1})}}},h0={path:"/",component:Ha,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:rl},{path:"videos",children:[{path:"",component:nr},{path:"view/:id",component:zr,props:!0},{path:"add",component:Rl},{path:"edit/:id",component:Tn,props:!0}]},{path:"source-groups",children:[{path:"add",component:Wr},{path:"edit/:id",component:gi,props:!0},{path:"",component:Ii},{path:"view/:id",component:Ni,props:!0}]},{path:"source-locations",children:[{path:"add",component:Yi},{path:"edit/:id",component:Qi,props:!0},{path:"",component:rd},{path:"view/:id",component:xd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:ju},{path:"edit/:id",component:hc,props:!0},{path:"",component:Jc},{path:"view/:id",component:Hf,props:!0}]},{path:"channels",children:[{path:"add",component:nb},{path:"edit/:id",component:db,props:!0},{path:"",component:_b},{path:"schedule-programs/:id",component:Ph,props:!0},{path:"view/:id",component:$0,props:!0}]},{path:"program-templates",children:[{path:"add",component:Mv},{path:"edit/:id",component:kg,props:!0},{path:"",component:Fg},{path:"view/:id",component:M1,props:!0}]}]},lt=yt({history:$t("/"),linkActiveClass:"active",routes:[{...ko},{path:"/administrator",redirect:"/"},{...h0}]});lt.beforeEach(async n=>{Tt().clear();var _=n.meta;const M=["/accounts/login","/accounts/loginRedirect","/accounts/logout","/accounts/register"],w=_.requiresAuth&&!M.includes(n.path),H=we(),O=H.user;if(w&&!O)return H.returnUrl=n.fullPath,{path:"/accounts/login",query:{returnUrl:encodeURIComponent(n.fullPath)}};var Q=n.meta.roles;if(Q&&!H.user.roles.some(j=>Q.includes(j)))return alert("You are not authorized to acccess this page."),{path:"/accounts/login/",query:{returnUrl:encodeURIComponent(n.fullPath)}}});const w0={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const n=this,_=new ht().withUrl("https://vivafastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();_.on("onNotificationCreated",function(M){let w=M.content;M.notificationEntityClassText==="Deposit"&&(w+="<br/>",w+=`<a href="${n.urlViewDeposit}${M.referenceId}">Click ${M.notificationEntityClassText} here</a>`),M.notificationEntityClassText==="Withdraw"&&(w+="<br/>",w+=`<a href="${n.urlViewWithdraw}${M.referenceId}">Click ${M.notificationEntityClassText} here</a>`),M.notificationEntityClassText==="ManualModeOfPayment"&&(w+="<br/>",w+=`<a href="${n.urlViewManualModeOfPayment}${M.referenceId}">Click ${M.notificationEntityClassText} here</a>`),M.iconClass;let H="secondary";switch(M.notificationType){case 1:H="success";break;case 3:H="info";break;case 3:H="success";break;case 4:H="info";break;case 5:H="warning";break;case 6:H="error";break}n.$toast[H](M.subject,w,{timeOut:1e4});const O=M.subject,k={body:w,icon:"/img/192x102.png"};new Notification(O,k)}),_.on("jobUpdated",function(M){n.$bus.$emit("event:job-updated",M)}),await _.start().then(function(){}).catch(function(M){})}}};function _0(n,v,_,M,w,H){return t(),s("div")}const k0=Ve(w0,[["render",_0],["__scopeId","data-v-5b4a9fa2"]]),S0={class:"navbar bg-dark bg-gradient shadow-sm flex-grow-0","data-bs-theme":"dark"},T0={class:"container-xxl"},I0={class:"col-md"},M0={class:"navbar-brand mb-0 ms-1 align-middle"},x0={class:"col-md-auto"},C0={class:"d-flex flex-row align-items-center justify-content-end"},V0={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(n){return(v,_)=>(t(),be($e,null,{default:F(()=>[e("nav",S0,[e("div",T0,[e("div",I0,[Ee(v.$slots,"title",{},()=>[e("a",M0,[e("i",{class:ee([n.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,m(n.pageTitle),1)])],!0)]),e("div",x0,[e("div",C0,[Ee(v.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},O0=Ve(V0,[["__scopeId","data-v-4d803e86"]]),A0={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},P0=["innerHTML"],L0={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},U0={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(v,_)=>(t(),be($e,null,{default:F(()=>[Ee(v.$slots,"default",{},()=>[n.errorMessage?(t(),s("div",A0,[_[0]||(_[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Y("Error ")],-1)),e("div",{innerHTML:n.errorMessage},null,8,P0)])):V("",!0),n.vuelidate&&n.vuelidate.$error?(t(),s("div",L0,[_[1]||(_[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Y("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(P,null,B(n.vuelidate.$errors,M=>(t(),s("li",{key:M.$uid},[M.$validator==="$each"?(t(),s(P,{key:0},[Y(" Check errors in '"+m(M.$property)+"' ",1)],64)):(t(),s(P,{key:1},[Y(m(M.$message),1)],64))]))),128))])])):V("",!0)])]),_:3}))}},H0={class:"py-3 container-xxl flex-grow-1 overflow-y-auto"},D0={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(v,_)=>{const M=oe("PageMessages");return t(),be($e,null,{default:F(()=>[e("div",H0,[z(M,{errorMessage:n.errorMessage,vuelidate:n.vuelidate},null,8,["errorMessage","vuelidate"]),Ee(v.$slots,"default")])]),_:3})}}},E0={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const n=this;n.busy||(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveFirst(){const n=this;if(n.busy)return;n.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveLast(){const n=this;if(n.busy)return;const v=n.filter;v.pageIndex!==v.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(v.totalPages))},async move(n){const v=this;if(v.busy)return;const _=v.filter,M=_.pageIndex+n;M>=0&&M<=_.totalPages&&(document.activeElement&&document.activeElement.blur(),await v.search(M))}}},q0={class:"mt-2"},B0={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},N0={key:0,class:"col-sm order-2 order-sm-1"},R0={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},F0={class:"me-1 fw-bold"},z0={class:"fw-bold"},G0={class:"ms-1"},j0={class:"col-sm-auto ms-auto order-1 order-sm-2"},Y0={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},W0={key:0,class:"page-item"},K0={key:1,class:"page-item"},Q0={key:2,class:"page-item"},J0={class:"page-item active"},Z0={class:"page-link"},X0={key:3,class:"page-item"},eT={key:4,class:"page-item"},tT={key:5,class:"page-item"},sT={key:1,class:"text-info font-weight-bold text-center"},oT={key:0},aT={key:1};function lT(n,v,_,M,w,H){return t(),s("div",q0,[_.filter.items.length?(t(),s("div",B0,[_.showPerPage?(t(),s("div",N0,[e("div",R0,[e("div",null,[e("span",F0,m(_.filter.totalCount),1),v[8]||(v[8]=Y("records in ")),e("span",z0,m(_.filter.totalPages),1),v[9]||(v[9]=Y(" page(s) "))]),e("div",G0,[R(e("select",{"onUpdate:modelValue":v[0]||(v[0]=O=>_.filter.pageSize=O),onChange:v[1]||(v[1]=(...O)=>H.changePagination&&H.changePagination(...O)),class:"form-select form-select-sm me-1"},v[10]||(v[10]=[Xe('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ge,_.filter.pageSize]])]),v[11]||(v[11]=e("div",{class:"ms-1"},"per page",-1))])])):V("",!0),e("div",j0,[e("ul",Y0,[_.filter.pageIndex!==1?(t(),s("li",W0,[e("button",{class:"page-link","aria-label":"Previous",onClick:v[2]||(v[2]=(...O)=>H.moveFirst&&H.moveFirst(...O))},v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):V("",!0),_.filter.pageIndex>2?(t(),s("li",K0,[e("button",{class:"page-link",onClick:v[3]||(v[3]=O=>H.move(-2))},m(_.filter.pageIndex-2),1)])):V("",!0),_.filter.pageIndex>1?(t(),s("li",Q0,[e("button",{class:"page-link",onClick:v[4]||(v[4]=O=>H.move(-1))},m(_.filter.pageIndex-1),1)])):V("",!0),e("li",J0,[e("span",Z0,m(_.filter.pageIndex),1)]),_.filter.pageIndex<_.filter.totalPages?(t(),s("li",X0,[e("button",{class:"page-link",onClick:v[5]||(v[5]=O=>H.move(1))},m(_.filter.pageIndex+1),1)])):V("",!0),_.filter.pageIndex<_.filter.totalPages-1?(t(),s("li",eT,[e("button",{class:"page-link",onClick:v[6]||(v[6]=O=>H.move(2))},m(_.filter.pageIndex+2),1)])):V("",!0),_.filter.pageIndex<_.filter.totalPages?(t(),s("li",tT,[e("button",{class:"page-link","aria-label":"Next",onClick:v[7]||(v[7]=(...O)=>H.moveLast&&H.moveLast(...O))},v[13]||(v[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):V("",!0)])])])):(t(),s("div",sT,[_.noRecords?(t(),s("div",oT,m(_.noRecords),1)):(t(),s("div",aT,"No record(s) found."))]))])}const nT=Ve(E0,[["render",lT]]),rT={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let n=this;if(!n.enabled)return;let v=n.filter;v.sortField===n.field?v.sortOrder===0?v.sortField=null:v.sortOrder=v.sortOrder===0?1:0:(v.sortField=n.field,v.sortOrder=1),n.$emit("search")}}},iT={class:"align-self-center"};function dT(n,v,_,M,w,H){return t(),s("div",{onClick:v[0]||(v[0]=(...O)=>H.click&&H.click(...O)),class:"d-flex flex-row justify-content-start align-content-center",style:ut({cursor:_.enabled?"pointer":""})},[Ee(n.$slots,"default"),e("span",iT,[_.showSort?(t(),s("span",{key:0,class:ee([{"fa-sort text-gray-500":!H.currentSortField(),"fa-sort-up":H.currentSortField()&&H.sortUp(),"fa-sort-down":H.currentSortField()&&!H.sortUp()},"fas fa-fw mr-1"])},null,2)):V("",!0)])],4)}const uT=Ve(rT,[["render",dT]]),cT={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(n){const v=this;v.setSelected(n),v.$emit("onSelectedRow",n)}}},mT={class:"table-responsive m-0"},fT=["href"],pT={key:1},vT=["onClick"],gT={class:"form-group row no-gutters"},bT={class:"col-5 col-form-label"},yT={class:"col align-self-center"},$T=["href"],hT={key:1};function wT(n,v,_,M,w,H){return t(),s("div",null,[e("div",mT,[e("table",{class:ee(["table table-hover d-none d-md-table card",_.tableCss])},[e("thead",null,[Ee(n.$slots,"header",{},()=>[v[0]||(v[0]=e("th",null,"#",-1)),(t(!0),s(P,null,B(_.header.columns,O=>(t(),s("th",null,m(O.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(P,null,B(_.items,(O,Q)=>Ee(n.$slots,"table-row",{key:`row1-${O[_.header.key]}`,item:O,index:Q},()=>[e("td",null,m(_.getRowNumber(Q)),1),(t(!0),s(P,null,B(_.header.columns,j=>(t(),s("td",null,[j.href?(t(),s("a",{key:0,href:j.href(O[_.header.key]),class:"font-weight-bold"},m(O[j.field]),9,fT)):(t(),s("span",pT,m(O[j.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ee(["d-block d-md-none",_.rowCss])},[(t(!0),s(P,null,B(_.items,(O,Q)=>(t(),s("div",{key:`row2-${O[_.header.key]}`,onClick:j=>H.onSelectedRow(O),class:"border"},[e("div",{class:ee(["p-2",{"b-left":_.isSelected(O)}])},[Ee(n.$slots,"table-list",{item:O,index:Q},()=>[(t(!0),s(P,null,B(_.header.columns,j=>(t(),s("div",gT,[e("label",bT,m(j.title),1),e("div",yT,[j.href?(t(),s("a",{key:0,href:j.href(O[_.header.key]),class:"font-weight-bold"},m(O[j.field]),9,$T)):(t(),s("span",hT,m(O[j.field]),1))])]))),256))],!0)],2)],8,vT))),128))],2)])}const _T=Ve(cT,[["render",wT],["__scopeId","data-v-65929213"]]),Oe=wt(St);Oe.use(_t());Oe.use(kt);Oe.use(lt);Oe.component("m-notification",k0);Oe.component("m-pagination",nT);Oe.component("sort-field",uT);Oe.component("table-list",_T);Oe.component("Toasts",Aa);Oe.component("PageHeader",O0);Oe.component("PageMessages",U0);Oe.component("PageBody",D0);const kT="https://vivafastpoc.azurewebsites.net/",ST="Arcadian-FAST",TT=void 0,IT={API_URL:kT,appName:ST,tenantId:TT};Oe.provide("$config",IT);Oe.provide("$bus",st);Oe.mount("#app");
